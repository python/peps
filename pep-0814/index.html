
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>PEP 814 – Add frozendict built-in type | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png">
    <link rel="canonical" href="https://peps.python.org/pep-0814/">
    <link rel="stylesheet" href="../_static/style.css" type="text/css">
    <link rel="stylesheet" href="../_static/mq.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg-light">
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark">
    <link rel="alternate" type="application/rss+xml" title="Latest PEPs" href="https://peps.python.org/peps.rss">
    <meta property="og:title" content='PEP 814 – Add frozendict built-in type | peps.python.org'>
    <meta property="og:description" content="A new public immutable type frozendict is added to the builtins module.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://peps.python.org/pep-0814/">
    <meta property="og:site_name" content="Python Enhancement Proposals (PEPs)">
    <meta property="og:image" content="https://peps.python.org/_static/og-image.png">
    <meta property="og:image:alt" content="Python PEPs">
    <meta property="og:image:width" content="200">
    <meta property="og:image:height" content="200">
    <meta name="description" content="A new public immutable type frozendict is added to the builtins module.">
    <meta name="theme-color" content="#3776ab">
</head>
<body>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-sun-half" viewBox="0 0 24 24" pointer-events="all">
    <title>Following system colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9"></circle>
      <path d="M12 3v18m0-12l4.65-4.65M12 14.3l7.37-7.37M12 19.6l8.85-8.85"></path>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected dark colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected light colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
</svg>
    <script>

        document.documentElement.dataset.colour_scheme = localStorage.getItem("colour_scheme") || "auto"
    </script>
    <section id="pep-page-section">
        <header>
            <h1 data-pagefind-ignore>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 814</li>
            </ul>
            <button id="colour-scheme-cycler" onClick="setColourScheme(nextColourScheme())">
                <svg aria-hidden="true" class="colour-scheme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-dark"><use href="#svg-moon"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-light"><use href="#svg-sun"></use></svg>
                <span class="visually-hidden">Toggle light / dark / auto colour theme</span>
            </button>
        </header>
        
        <div id="mobile-search" class="mobile-search-container"></div>
        
        <article data-pagefind-body>
            
            <span data-pagefind-meta="title:PEP 814 – Add frozendict built-in type" data-pagefind-weight="10" class="visually-hidden">PEP 814 – Add frozendict built-in type</span>
            <section id="pep-content">
<h1 class="page-title">PEP 814 – Add frozendict built-in type</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd">Victor Stinner &lt;vstinner&#32;&#97;t&#32;python.org&gt;, Donghee Na &lt;donghee.na&#32;&#97;t&#32;python.org&gt;</dd>
<dt class="field-even">Discussions-To<span class="colon">:</span></dt>
<dd class="field-even"><a class="reference external" href="https://discuss.python.org/t/104854">Discourse thread</a></dd>
<dt class="field-odd">Status<span class="colon">:</span></dt>
<dd class="field-odd"><abbr title="Accepted and implementation complete, or no longer active">Final</abbr></dd>
<dt class="field-even">Type<span class="colon">:</span></dt>
<dd class="field-even"><abbr title="Normative PEP with a new feature for Python, implementation change for CPython or interoperability standard for the ecosystem">Standards Track</abbr></dd>
<dt class="field-odd">Created<span class="colon">:</span></dt>
<dd class="field-odd">12-Nov-2025</dd>
<dt class="field-even">Python-Version<span class="colon">:</span></dt>
<dd class="field-even">3.15</dd>
<dt class="field-odd">Post-History<span class="colon">:</span></dt>
<dd class="field-odd"><a class="reference external" href="https://discuss.python.org/t/104854" title="Discourse thread">13-Nov-2025</a></dd>
<dt class="field-even">Resolution<span class="colon">:</span></dt>
<dd class="field-even"><a class="reference external" href="https://discuss.python.org/t/pep-814-add-frozendict-built-in-type/104854/121">11-Feb-2026</a></dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Table of Contents</summary><ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#construction">Construction</a></li>
<li><a class="reference internal" href="#iteration">Iteration</a></li>
<li><a class="reference internal" href="#hashing-and-comparison">Hashing and Comparison</a></li>
<li><a class="reference internal" href="#union-operators">Union operators</a></li>
<li><a class="reference internal" href="#copy">Copy</a></li>
<li><a class="reference internal" href="#typing">Typing</a></li>
<li><a class="reference internal" href="#representation">Representation</a></li>
<li><a class="reference internal" href="#c-api">C API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#differences-between-dict-and-frozendict">Differences between <code class="docutils literal notranslate"><span class="pre">dict</span></code> and <code class="docutils literal notranslate"><span class="pre">frozendict</span></code></a></li>
<li><a class="reference internal" href="#possible-candidates-for-frozendict-in-the-stdlib">Possible candidates for <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> in the stdlib</a><ul>
<li><a class="reference internal" href="#python-modules">Python modules</a></li>
<li><a class="reference internal" href="#extension-modules">Extension modules</a></li>
</ul>
</li>
<li><a class="reference internal" href="#relationship-to-pep-416-frozendict">Relationship to PEP 416 frozendict</a></li>
<li><a class="reference internal" href="#relationship-to-pep-603-frozenmap">Relationship to PEP 603 frozenmap</a></li>
<li><a class="reference internal" href="#reference-implementation">Reference Implementation</a></li>
<li><a class="reference internal" href="#thread-safety">Thread Safety</a></li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#inherit-from-dict">Inherit from dict</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deferred-ideas">Deferred Ideas</a><ul>
<li><a class="reference internal" href="#new-syntax-for-frozendict-literals">New syntax for <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> literals</a></li>
<li><a class="reference internal" href="#method-to-convert-dict-to-frozendict">Method to convert <code class="docutils literal notranslate"><span class="pre">dict</span></code> to <code class="docutils literal notranslate"><span class="pre">frozendict</span></code></a></li>
<li><a class="reference internal" href="#type-annotation">Type annotation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#acknowledgements">Acknowledgements</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<div class="pep-banner canonical-doc sticky-banner admonition important">
<p class="admonition-title">Important</p>
<p>This PEP is a historical document. The up-to-date, canonical documentation can now be found at <a class="reference external" href="https://docs.python.org/3.15/library/stdtypes.html#frozendict" title="(in Python v3.15)"><code class="xref py py-class docutils literal notranslate"><span class="pre">frozendict</span></code></a>.</p>
<p class="close-button">×</p>
<p>See <a class="pep reference internal" href="../pep-0001/" title="PEP 1 – PEP Purpose and Guidelines">PEP 1</a> for how to propose changes.</p>
</div>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract" role="doc-backlink">Abstract</a></h2>
<p>A new public immutable type <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> is added to the <code class="docutils literal notranslate"><span class="pre">builtins</span></code>
module.</p>
<p>We expect <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> to be safe by design, as it prevents any unintended
modifications. This addition benefits not only CPython’s standard
library, but also third-party maintainers who can take advantage of a
reliable, immutable dictionary type.</p>
</section>
<section id="rationale">
<h2><a class="toc-backref" href="#rationale" role="doc-backlink">Rationale</a></h2>
<p>The proposed <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> type:</p>
<ul class="simple">
<li>implements the <code class="docutils literal notranslate"><span class="pre">collections.abc.Mapping</span></code> protocol,</li>
<li>supports pickling.</li>
</ul>
<p>The following use cases illustrate why an immutable mapping is
desirable:</p>
<ul class="simple">
<li>Immutable mappings are hashable which allows their use as dictionary
keys or set elements.</li>
<li>This hashable property permits functions decorated with
<code class="docutils literal notranslate"><span class="pre">&#64;functools.lru_cache()</span></code> to accept immutable mappings as arguments.
Unlike an immutable mapping, passing a plain <code class="docutils literal notranslate"><span class="pre">dict</span></code> to such a function
results in error.</li>
<li>Using an immutable mapping as a function parameter’s default value
avoids the problem of mutable default values.</li>
</ul>
<p>There are already third-party <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> and <code class="docutils literal notranslate"><span class="pre">frozenmap</span></code> packages
available on PyPI, proving that there is demand for
immutable mappings.</p>
</section>
<section id="specification">
<h2><a class="toc-backref" href="#specification" role="doc-backlink">Specification</a></h2>
<p>A new public immutable type <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> is added to the <code class="docutils literal notranslate"><span class="pre">builtins</span></code>
module. It is not a <code class="docutils literal notranslate"><span class="pre">dict</span></code> subclass but inherits directly from
<code class="docutils literal notranslate"><span class="pre">object</span></code>.</p>
<section id="construction">
<h3><a class="toc-backref" href="#construction" role="doc-backlink">Construction</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">frozendict</span></code> implements a <code class="docutils literal notranslate"><span class="pre">dict</span></code>-like construction API:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">frozendict()</span></code> creates a new empty immutable mapping.</li>
<li><code class="docutils literal notranslate"><span class="pre">frozendict(**kwargs)</span></code> creates a mapping from <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>,
e.g. <code class="docutils literal notranslate"><span class="pre">frozendict(x=1,</span> <span class="pre">y=2)</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">frozendict(collection)</span></code> creates a mapping from the passed
collection object. The passed collection object can be:<ul>
<li>a <code class="docutils literal notranslate"><span class="pre">dict</span></code>,</li>
<li>another <code class="docutils literal notranslate"><span class="pre">frozendict</span></code>,</li>
<li>or an iterable of key/value tuples.</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">frozendict(collection,</span> <span class="pre">**kwargs)</span></code> combines the two previous
constructions.</li>
</ul>
<p>Keys must be hashable, but values can be non-hashable.
Using hashable values creates a hashable <code class="docutils literal notranslate"><span class="pre">frozendict</span></code>.</p>
<p>Creating a <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> from a <code class="docutils literal notranslate"><span class="pre">dict</span></code>, <code class="docutils literal notranslate"><span class="pre">frozendict(dict)</span></code>, has a
complexity of <em>O</em>(<em>n</em>): items are copied (shallow copy).</p>
<p>The insertion order is preserved.</p>
</section>
<section id="iteration">
<h3><a class="toc-backref" href="#iteration" role="doc-backlink">Iteration</a></h3>
<p>As <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> implements the standard <code class="docutils literal notranslate"><span class="pre">collections.abc.Mapping</span></code>
protocol, so all expected methods of iteration are supported:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="o">==</span> <span class="p">[(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">)]</span>
<span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span>
<span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">]</span>
<span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Iterating on <code class="docutils literal notranslate"><span class="pre">frozendict</span></code>, as on <code class="docutils literal notranslate"><span class="pre">dict</span></code>, uses the insertion order.</p>
</section>
<section id="hashing-and-comparison">
<h3><a class="toc-backref" href="#hashing-and-comparison" role="doc-backlink">Hashing and Comparison</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">frozendict</span></code> instances can be hashable just like tuple objects:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">hash</span><span class="p">(</span><span class="n">frozendict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">))</span>  <span class="c1"># works</span>
<span class="nb">hash</span><span class="p">(</span><span class="n">frozendict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]))</span>  <span class="c1"># error, list is not hashable</span>
</pre></div>
</div>
<p>The hash value does not depend on the items’ order. It is computed on
keys and values. Pseudo-code of <code class="docutils literal notranslate"><span class="pre">hash(frozendict)</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">hash</span><span class="p">(</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">frozendict</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
</pre></div>
</div>
<p>Equality test does not depend on the items’ order either. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">frozendict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">frozendict</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hash</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="nb">hash</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">==</span> <span class="n">b</span>
<span class="go">True</span>
</pre></div>
</div>
<p>It’s possible to compare <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> to <code class="docutils literal notranslate"><span class="pre">dict</span></code>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">frozendict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</section>
<section id="union-operators">
<h3><a class="toc-backref" href="#union-operators" role="doc-backlink">Union operators</a></h3>
<p>It’s possible to join two <code class="docutils literal notranslate"><span class="pre">frozendict</span></code>, or a <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> with a
<code class="docutils literal notranslate"><span class="pre">dict</span></code>, with the merge (<code class="docutils literal notranslate"><span class="pre">|</span></code>) operator. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">frozendict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">frozendict</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">frozendict({&#39;x&#39;: 1, &#39;y&#39;: 1})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frozendict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">frozendict({&#39;x&#39;: 1, &#39;y&#39;: 1})</span>
</pre></div>
</div>
<p>If some keys are in common, the values of the right operand are taken:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">frozendict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">frozendict</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="go">frozendict({&#39;x&#39;: 1, &#39;y&#39;: 5})</span>
</pre></div>
</div>
<p>The update operator <code class="docutils literal notranslate"><span class="pre">|=</span></code> does not modify a <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> in-place, but
creates a new <code class="docutils literal notranslate"><span class="pre">frozendict</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">frozendict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">copy</span> <span class="o">=</span> <span class="n">d</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">|=</span> <span class="n">frozendict</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">frozendict({&#39;x&#39;: 1, &#39;y&#39;: 2})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">copy</span>   <span class="c1"># left unchanged</span>
<span class="go">frozendict({&#39;x&#39;: 1})</span>
</pre></div>
</div>
<p>See also <a class="pep reference internal" href="../pep-0584/" title="PEP 584 – Add Union Operators To dict">PEP 584</a> “Add Union Operators To dict”.</p>
</section>
<section id="copy">
<h3><a class="toc-backref" href="#copy" role="doc-backlink">Copy</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">frozendict.copy()</span></code> returns a shallow copy. In CPython, it simply
returns the same <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> (new reference).</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">copy.deepcopy()</span></code> to get a deep copy.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">copy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">frozendict</span><span class="p">(</span><span class="n">mutable</span><span class="o">=</span><span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shallow_copy</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">deep_copy</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;mutable&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;modified&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">frozendict({&#39;mutable&#39;: [&#39;modified&#39;]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shallow_copy</span>  <span class="c1"># modified!</span>
<span class="go">frozendict({&#39;mutable&#39;: [&#39;modified&#39;]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">deep_copy</span>     <span class="c1"># unchanged</span>
<span class="go">frozendict({&#39;mutable&#39;: []})</span>
</pre></div>
</div>
</section>
<section id="typing">
<h3><a class="toc-backref" href="#typing" role="doc-backlink">Typing</a></h3>
<p>It is possible to use the standard typing notation for <code class="docutils literal notranslate"><span class="pre">frozendict</span></code>s:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="p">:</span> <span class="n">frozendict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">frozendict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="representation">
<h3><a class="toc-backref" href="#representation" role="doc-backlink">Representation</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">frozendict</span></code> will not use a special syntax for its representation.
The <code class="docutils literal notranslate"><span class="pre">repr()</span></code> of a <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> instance looks like this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">frozendict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">frozendict({&#39;x&#39;: 1, &#39;y&#39;: 2})</span>
</pre></div>
</div>
</section>
<section id="c-api">
<h3><a class="toc-backref" href="#c-api" role="doc-backlink">C API</a></h3>
<p>Add the following APIs:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PyAnyDict_Check(op)</span></code> macro</li>
<li><code class="docutils literal notranslate"><span class="pre">PyAnyDict_CheckExact(op)</span></code> macro</li>
<li><code class="docutils literal notranslate"><span class="pre">PyFrozenDict_Check()</span></code> macro</li>
<li><code class="docutils literal notranslate"><span class="pre">PyFrozenDict_CheckExact()</span></code> macro</li>
<li><code class="docutils literal notranslate"><span class="pre">PyFrozenDict_New(collection)</span></code> function</li>
<li><code class="docutils literal notranslate"><span class="pre">PyFrozenDict_Type</span></code></li>
</ul>
<p>Even if <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> is not a <code class="docutils literal notranslate"><span class="pre">dict</span></code> subclass, it can be used with
<code class="docutils literal notranslate"><span class="pre">PyDict_GetItemRef()</span></code> and similar “PyDict_Get” functions.</p>
<p>Passing a <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> to <code class="docutils literal notranslate"><span class="pre">PyDict_SetItem()</span></code> or <code class="docutils literal notranslate"><span class="pre">PyDict_DelItem()</span></code>
fails with <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>. <code class="docutils literal notranslate"><span class="pre">PyDict_Check()</span></code> on a <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> is
false.</p>
</section>
</section>
<section id="differences-between-dict-and-frozendict">
<h2><a class="toc-backref" href="#differences-between-dict-and-frozendict" role="doc-backlink">Differences between <code class="docutils literal notranslate"><span class="pre">dict</span></code> and <code class="docutils literal notranslate"><span class="pre">frozendict</span></code></a></h2>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">dict</span></code> has more methods than <code class="docutils literal notranslate"><span class="pre">frozendict</span></code>:<ul>
<li><code class="docutils literal notranslate"><span class="pre">__delitem__(key)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">__setitem__(key,</span> <span class="pre">value)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">clear()</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">pop(key)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">popitem()</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">setdefault(key,</span> <span class="pre">value)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">update(*args,</span> <span class="pre">**kwargs)</span></code></li>
</ul>
</li>
<li>A <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> can be hashed with <code class="docutils literal notranslate"><span class="pre">hash(frozendict)</span></code> if all keys
and values can be hashed.</li>
</ul>
</section>
<section id="possible-candidates-for-frozendict-in-the-stdlib">
<h2><a class="toc-backref" href="#possible-candidates-for-frozendict-in-the-stdlib" role="doc-backlink">Possible candidates for <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> in the stdlib</a></h2>
<p>We have identified several stdlib modules where adopting <code class="docutils literal notranslate"><span class="pre">frozendict</span></code>
can enhance safety and prevent unintended modifications by design. We
also believe that there are additional potential use cases beyond the
ones listed below. However, this does not mean that we intend to make
these changes without the approval of the respective module maintainers.</p>
<p>Note: it remains possible to bind again a variable to a new modified
<code class="docutils literal notranslate"><span class="pre">frozendict</span></code> or a new mutable <code class="docutils literal notranslate"><span class="pre">dict</span></code>.</p>
<section id="python-modules">
<h3><a class="toc-backref" href="#python-modules" role="doc-backlink">Python modules</a></h3>
<p>Replace <code class="docutils literal notranslate"><span class="pre">dict</span></code> with <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> in function results:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">email.headerregistry</span></code>: <code class="docutils literal notranslate"><span class="pre">ParameterizedMIMEHeader.params()</span></code>
(replace <code class="docutils literal notranslate"><span class="pre">MappingProxyType</span></code>)</li>
<li><code class="docutils literal notranslate"><span class="pre">enum</span></code>: <code class="docutils literal notranslate"><span class="pre">EnumType.__members__()</span></code> (replace <code class="docutils literal notranslate"><span class="pre">MappingProxyType</span></code>)</li>
</ul>
<p>Replace <code class="docutils literal notranslate"><span class="pre">dict</span></code> with <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> for constants:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">_opcode_metadata</span></code>: <code class="docutils literal notranslate"><span class="pre">_specializations</span></code>, <code class="docutils literal notranslate"><span class="pre">_specialized_opmap</span></code>,
<code class="docutils literal notranslate"><span class="pre">opmap</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">_pydatetime</span></code>: <code class="docutils literal notranslate"><span class="pre">specs</span></code> (in <code class="docutils literal notranslate"><span class="pre">_format_time()</span></code>)</li>
<li><code class="docutils literal notranslate"><span class="pre">_pydecimal</span></code>: <code class="docutils literal notranslate"><span class="pre">_condition_map</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">bdb</span></code>: <code class="docutils literal notranslate"><span class="pre">_MonitoringTracer.EVENT_CALLBACK_MAP</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">dataclasses</span></code>: <code class="docutils literal notranslate"><span class="pre">_hash_action</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">dis</span></code>: <code class="docutils literal notranslate"><span class="pre">deoptmap</span></code>, <code class="docutils literal notranslate"><span class="pre">COMPILER_FLAG_NAMES</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">functools</span></code>: <code class="docutils literal notranslate"><span class="pre">_convert</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">gettext</span></code>: <code class="docutils literal notranslate"><span class="pre">_binary_ops</span></code>, <code class="docutils literal notranslate"><span class="pre">_c2py_ops</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">imaplib</span></code>: <code class="docutils literal notranslate"><span class="pre">Commands</span></code>, <code class="docutils literal notranslate"><span class="pre">Mon2num</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">json.decoder</span></code>: <code class="docutils literal notranslate"><span class="pre">_CONSTANTS</span></code>, <code class="docutils literal notranslate"><span class="pre">BACKSLASH</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">json.encoder</span></code>: <code class="docutils literal notranslate"><span class="pre">ESCAPE_DCT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">json.tool</span></code>: <code class="docutils literal notranslate"><span class="pre">_group_to_theme_color</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">locale</span></code>: <code class="docutils literal notranslate"><span class="pre">locale_encoding_alias</span></code>, <code class="docutils literal notranslate"><span class="pre">locale_alias</span></code>,
<code class="docutils literal notranslate"><span class="pre">windows_locale</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">opcode</span></code>: <code class="docutils literal notranslate"><span class="pre">_cache_format</span></code>, <code class="docutils literal notranslate"><span class="pre">_inline_cache_entries</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">optparse</span></code>: <code class="docutils literal notranslate"><span class="pre">_builtin_cvt</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">platform</span></code>: <code class="docutils literal notranslate"><span class="pre">_ver_stages</span></code>, <code class="docutils literal notranslate"><span class="pre">_default_architecture</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">plistlib</span></code>: <code class="docutils literal notranslate"><span class="pre">_BINARY_FORMAT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">ssl</span></code>: <code class="docutils literal notranslate"><span class="pre">_PROTOCOL_NAMES</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">stringprep</span></code>: <code class="docutils literal notranslate"><span class="pre">b3_exceptions</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">symtable</span></code>: <code class="docutils literal notranslate"><span class="pre">_scopes_value_to_name</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">tarfile</span></code>: <code class="docutils literal notranslate"><span class="pre">PAX_NUMBER_FIELDS</span></code>, <code class="docutils literal notranslate"><span class="pre">_NAMED_FILTERS</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">token</span></code>: <code class="docutils literal notranslate"><span class="pre">tok_name</span></code>, <code class="docutils literal notranslate"><span class="pre">EXACT_TOKEN_TYPES</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">tomllib._parser</span></code>: <code class="docutils literal notranslate"><span class="pre">BASIC_STR_ESCAPE_REPLACEMENTS</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">typing</span></code>: <code class="docutils literal notranslate"><span class="pre">_PROTO_ALLOWLIST</span></code></li>
</ul>
<p>Accept <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> type:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">builtins</span></code>: <code class="docutils literal notranslate"><span class="pre">eval()</span></code> and <code class="docutils literal notranslate"><span class="pre">exec()</span></code> (<em>globals</em> argument)</li>
</ul>
</section>
<section id="extension-modules">
<h3><a class="toc-backref" href="#extension-modules" role="doc-backlink">Extension modules</a></h3>
<p>Replace <code class="docutils literal notranslate"><span class="pre">dict</span></code> with <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> for constants:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">errno</span></code>: <code class="docutils literal notranslate"><span class="pre">errorcode</span></code></li>
</ul>
</section>
</section>
<section id="relationship-to-pep-416-frozendict">
<h2><a class="toc-backref" href="#relationship-to-pep-416-frozendict" role="doc-backlink">Relationship to PEP 416 frozendict</a></h2>
<p>Since 2012 (<a class="pep reference internal" href="../pep-0416/" title="PEP 416 – Add a frozendict builtin type">PEP 416</a>), the Python ecosystem has evolved:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">asyncio</span></code> was added in 2014 (Python 3.4)</li>
<li>Free threading was added in 2024 (Python 3.13)</li>
<li><code class="docutils literal notranslate"><span class="pre">concurrent.interpreters</span></code> was added in 2025 (Python 3.14)</li>
</ul>
<p>There are now more use cases to share immutable mappings.</p>
<p><code class="docutils literal notranslate"><span class="pre">frozendict</span></code> now preserves the insertion order, whereas PEP 416
<code class="docutils literal notranslate"><span class="pre">frozendict</span></code> was unordered (as <a class="pep reference internal" href="../pep-0603/" title="PEP 603 – Adding a frozenmap type to collections">PEP 603</a> <code class="docutils literal notranslate"><span class="pre">frozenmap</span></code>). <code class="docutils literal notranslate"><span class="pre">frozendict</span></code>
relies on the <code class="docutils literal notranslate"><span class="pre">dict</span></code> implementation which preserves the insertion
order since Python 3.6.</p>
<p>The first motivation to add <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> was to implement a sandbox
in Python. It’s no longer the case in this PEP.</p>
<p><code class="docutils literal notranslate"><span class="pre">types.MappingProxyType</span></code> was added in 2012 (Python 3.3). This type is
not hashable and it’s not possible to inherit from it. It’s also easy to
retrieve the original dictionary which can be mutated, for example using
<code class="docutils literal notranslate"><span class="pre">gc.get_referents()</span></code>.</p>
</section>
<section id="relationship-to-pep-603-frozenmap">
<h2><a class="toc-backref" href="#relationship-to-pep-603-frozenmap" role="doc-backlink">Relationship to PEP 603 frozenmap</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">collections.frozenmap</span></code> has different properties than frozendict:</p>
<ul>
<li><code class="docutils literal notranslate"><span class="pre">frozenmap</span></code> items are unordered, whereas <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> preserves
the insertion order.</li>
<li><code class="docutils literal notranslate"><span class="pre">frozenmap</span></code> has additional methods:<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">including(key,</span> <span class="pre">value)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">excluding(key)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">union(mapping=None,</span> <span class="pre">**kw)</span></code></li>
</ul>
<p>These methods to mutate a <code class="docutils literal notranslate"><span class="pre">frozenmap</span></code> have a complexity of <em>O</em>(1).</p>
</li>
<li>A mapping lookup (<code class="docutils literal notranslate"><span class="pre">mapping[key]</span></code>) has a complexity of <em>O</em>(log <em>n</em>)
with <code class="docutils literal notranslate"><span class="pre">frozenmap</span></code> and a complexity of <em>O</em>(1) with <code class="docutils literal notranslate"><span class="pre">frozendict</span></code>.</li>
</ul>
</section>
<section id="reference-implementation">
<h2><a class="toc-backref" href="#reference-implementation" role="doc-backlink">Reference Implementation</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/python/cpython/pull/141508">https://github.com/python/cpython/pull/141508</a></li>
<li><code class="docutils literal notranslate"><span class="pre">frozendict</span></code> shares most of its code with the <code class="docutils literal notranslate"><span class="pre">dict</span></code> type.</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">PyFrozenDictObject</span></code> structure which inherits from
<code class="docutils literal notranslate"><span class="pre">PyDictObject</span></code> and has an additional <code class="docutils literal notranslate"><span class="pre">ma_hash</span></code> member.</li>
</ul>
</section>
<section id="thread-safety">
<h2><a class="toc-backref" href="#thread-safety" role="doc-backlink">Thread Safety</a></h2>
<p>Once a <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> is created, its shallow immutability is guaranteed.
This means it can be safely shared between threads without synchronization,
as long as its values are not modified by other threads.</p>
</section>
<section id="rejected-ideas">
<h2><a class="toc-backref" href="#rejected-ideas" role="doc-backlink">Rejected Ideas</a></h2>
<section id="inherit-from-dict">
<h3><a class="toc-backref" href="#inherit-from-dict" role="doc-backlink">Inherit from dict</a></h3>
<p>If <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> inherits from <code class="docutils literal notranslate"><span class="pre">dict</span></code>, it would become possible to
call <code class="docutils literal notranslate"><span class="pre">dict</span></code> methods to mutate an immutable <code class="docutils literal notranslate"><span class="pre">frozendict</span></code>.  For
example, it would be possible to call
<code class="docutils literal notranslate"><span class="pre">dict.__setitem__(frozendict,</span> <span class="pre">key,</span> <span class="pre">value)</span></code>.</p>
<p>It may be possible to prevent modifying <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> using <code class="docutils literal notranslate"><span class="pre">dict</span></code>
methods, but that would require to explicitly exclude <code class="docutils literal notranslate"><span class="pre">frozendict</span></code>
which can affect <code class="docutils literal notranslate"><span class="pre">dict</span></code> performance. Also, there is a higher risk of
forgetting to exclude <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> in some methods.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> does not inherit from <code class="docutils literal notranslate"><span class="pre">dict</span></code>, there is no such
issue.</p>
</section>
</section>
<section id="deferred-ideas">
<h2><a class="toc-backref" href="#deferred-ideas" role="doc-backlink">Deferred Ideas</a></h2>
<section id="new-syntax-for-frozendict-literals">
<h3><a class="toc-backref" href="#new-syntax-for-frozendict-literals" role="doc-backlink">New syntax for <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> literals</a></h3>
<p>Various syntaxes have been proposed to write <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> literals.</p>
<p>A new syntax can be added later if needed.</p>
</section>
<section id="method-to-convert-dict-to-frozendict">
<h3><a class="toc-backref" href="#method-to-convert-dict-to-frozendict" role="doc-backlink">Method to convert <code class="docutils literal notranslate"><span class="pre">dict</span></code> to <code class="docutils literal notranslate"><span class="pre">frozendict</span></code></a></h3>
<p>Different methods have been proposed to convert a mutable <code class="docutils literal notranslate"><span class="pre">dict</span></code> to an
immutable <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> with <em>O</em>(1) complexity, such as
<code class="docutils literal notranslate"><span class="pre">dict.freeze()</span></code>. The idea would be to move <code class="docutils literal notranslate"><span class="pre">dict</span></code> contents into
<code class="docutils literal notranslate"><span class="pre">frozendict</span></code>: it would make the <code class="docutils literal notranslate"><span class="pre">dict</span></code> empty. Another idea would be
to use “copy-on-write”: only copy the <code class="docutils literal notranslate"><span class="pre">dict</span></code> at its first
modification.</p>
<p>We consider that such method can be added later if needed, but it
doesn’t have to be added right now. Moreover, if such method is added,
it would be nice to add a similar method for <code class="docutils literal notranslate"><span class="pre">list</span></code>/<code class="docutils literal notranslate"><span class="pre">tuple</span></code> and
<code class="docutils literal notranslate"><span class="pre">set</span></code>/<code class="docutils literal notranslate"><span class="pre">frozenset</span></code>. See also <a class="pep reference internal" href="../pep-0351/" title="PEP 351 – The freeze protocol">PEP 351</a> (Freeze protocol).</p>
</section>
<section id="type-annotation">
<h3><a class="toc-backref" href="#type-annotation" role="doc-backlink">Type annotation</a></h3>
<p>It <a class="reference external" href="https://discuss.python.org/t/pep-814-add-frozendict-built-in-type/104854/37">has been proposed</a>
to add <code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">TD(TypedDict,</span> <span class="pre">frozen=True)</span></code> or <code class="docutils literal notranslate"><span class="pre">Frozen[MyTypedDict]</span></code>
to define a <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> type.</p>
<p>We consider that such type can be added later if needed.</p>
</section>
</section>
<section id="references">
<h2><a class="toc-backref" href="#references" role="doc-backlink">References</a></h2>
<ul class="simple">
<li><a class="pep reference internal" href="../pep-0416/" title="PEP 416 – Add a frozendict builtin type">PEP 416</a> (<code class="docutils literal notranslate"><span class="pre">frozendict</span></code>)</li>
<li><a class="pep reference internal" href="../pep-0603/" title="PEP 603 – Adding a frozenmap type to collections">PEP 603</a> (<code class="docutils literal notranslate"><span class="pre">collections.frozenmap</span></code>)</li>
</ul>
</section>
<section id="acknowledgements">
<h2><a class="toc-backref" href="#acknowledgements" role="doc-backlink">Acknowledgements</a></h2>
<p>This PEP is based on prior work from Yury Selivanov (<a class="pep reference internal" href="../pep-0603/" title="PEP 603 – Adding a frozenmap type to collections">PEP 603</a>).</p>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright" role="doc-backlink">Copyright</a></h2>
<p>This document is placed in the public domain or under the
CC0-1.0-Universal license, whichever is more permissive.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/peps/pep-0814.rst">https://github.com/python/peps/blob/main/peps/pep-0814.rst</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/peps/pep-0814.rst">2026-02-21 20:35:40 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <div id="search"></div>
            <h2>Contents</h2>
            <ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#construction">Construction</a></li>
<li><a class="reference internal" href="#iteration">Iteration</a></li>
<li><a class="reference internal" href="#hashing-and-comparison">Hashing and Comparison</a></li>
<li><a class="reference internal" href="#union-operators">Union operators</a></li>
<li><a class="reference internal" href="#copy">Copy</a></li>
<li><a class="reference internal" href="#typing">Typing</a></li>
<li><a class="reference internal" href="#representation">Representation</a></li>
<li><a class="reference internal" href="#c-api">C API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#differences-between-dict-and-frozendict">Differences between <code class="docutils literal notranslate"><span class="pre">dict</span></code> and <code class="docutils literal notranslate"><span class="pre">frozendict</span></code></a></li>
<li><a class="reference internal" href="#possible-candidates-for-frozendict-in-the-stdlib">Possible candidates for <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> in the stdlib</a><ul>
<li><a class="reference internal" href="#python-modules">Python modules</a></li>
<li><a class="reference internal" href="#extension-modules">Extension modules</a></li>
</ul>
</li>
<li><a class="reference internal" href="#relationship-to-pep-416-frozendict">Relationship to PEP 416 frozendict</a></li>
<li><a class="reference internal" href="#relationship-to-pep-603-frozenmap">Relationship to PEP 603 frozenmap</a></li>
<li><a class="reference internal" href="#reference-implementation">Reference Implementation</a></li>
<li><a class="reference internal" href="#thread-safety">Thread Safety</a></li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#inherit-from-dict">Inherit from dict</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deferred-ideas">Deferred Ideas</a><ul>
<li><a class="reference internal" href="#new-syntax-for-frozendict-literals">New syntax for <code class="docutils literal notranslate"><span class="pre">frozendict</span></code> literals</a></li>
<li><a class="reference internal" href="#method-to-convert-dict-to-frozendict">Method to convert <code class="docutils literal notranslate"><span class="pre">dict</span></code> to <code class="docutils literal notranslate"><span class="pre">frozendict</span></code></a></li>
<li><a class="reference internal" href="#type-annotation">Type annotation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#acknowledgements">Acknowledgements</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br>
            <a id="source" href="https://github.com/python/peps/blob/main/peps/pep-0814.rst?plain=1">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
    <script src="../_static/sticky_banner.js"></script>
    <script src="https://analytics.python.org/js/script.outbound-links.js"
            data-domain="peps.python.org" defer></script>
    <script src="/pagefind/pagefind-ui.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            // Ranking configuration to boost exact title matches
            const searchOptions = {
                ranking: {
                    termSimilarity: 9.0, // Higher values favor exact matches
                    termFrequency: 0.5, // Lower values reduce penalty for low term frequency
                    pageLength: 0.2, // Lower values reduce the impact of page length
                }
            };

            // Initialize pagefind for either mobile or desktop, not both
            if (window.innerWidth <= 640) {
                new PagefindUI({ element: "#mobile-search", ...searchOptions, showSubResults: false });
            } else {
                new PagefindUI({ element: "#search", ...searchOptions, showSubResults: true });
            }
        });
    </script>
</body>
</html>