
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>PEP 363 – Syntax For Dynamic Attribute Access | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png">
    <link rel="canonical" href="https://peps.python.org/pep-0363/">
    <link rel="stylesheet" href="../_static/style.css" type="text/css">
    <link rel="stylesheet" href="../_static/mq.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg-light">
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark">
    <link rel="alternate" type="application/rss+xml" title="Latest PEPs" href="https://peps.python.org/peps.rss">
    <meta property="og:title" content='PEP 363 – Syntax For Dynamic Attribute Access | peps.python.org'>
    <meta property="og:description" content="Dynamic attribute access is currently possible using the “getattr” and “setattr” builtins.  The present PEP suggests a new syntax to make such access easier, allowing the coder for example to write:">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://peps.python.org/pep-0363/">
    <meta property="og:site_name" content="Python Enhancement Proposals (PEPs)">
    <meta property="og:image" content="https://peps.python.org/_static/og-image.png">
    <meta property="og:image:alt" content="Python PEPs">
    <meta property="og:image:width" content="200">
    <meta property="og:image:height" content="200">
    <meta name="description" content="Dynamic attribute access is currently possible using the “getattr” and “setattr” builtins.  The present PEP suggests a new syntax to make such access easier, allowing the coder for example to write:">
    <meta name="theme-color" content="#3776ab">
</head>
<body>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-sun-half" viewBox="0 0 24 24" pointer-events="all">
    <title>Following system colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9"></circle>
      <path d="M12 3v18m0-12l4.65-4.65M12 14.3l7.37-7.37M12 19.6l8.85-8.85"></path>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected dark colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected light colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
</svg>
    <script>

        document.documentElement.dataset.colour_scheme = localStorage.getItem("colour_scheme") || "auto"
    </script>
    <section id="pep-page-section">
        <header>
            <h1 data-pagefind-ignore>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 363</li>
            </ul>
            <button id="colour-scheme-cycler" onClick="setColourScheme(nextColourScheme())">
                <svg aria-hidden="true" class="colour-scheme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-dark"><use href="#svg-moon"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-light"><use href="#svg-sun"></use></svg>
                <span class="visually-hidden">Toggle light / dark / auto colour theme</span>
            </button>
        </header>
        
        <div id="mobile-search" class="mobile-search-container"></div>
        
        <article data-pagefind-body>
            
            <span data-pagefind-meta="title:PEP 363 – Syntax For Dynamic Attribute Access" data-pagefind-weight="10" class="visually-hidden">PEP 363 – Syntax For Dynamic Attribute Access</span>
            <section id="pep-content">
<h1 class="page-title">PEP 363 – Syntax For Dynamic Attribute Access</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd">Ben North &lt;ben&#32;&#97;t&#32;redfrontdoor.org&gt;</dd>
<dt class="field-even">Status<span class="colon">:</span></dt>
<dd class="field-even"><abbr title="Formally declined and will not be accepted">Rejected</abbr></dd>
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><abbr title="Normative PEP with a new feature for Python, implementation change for CPython or interoperability standard for the ecosystem">Standards Track</abbr></dd>
<dt class="field-even">Created<span class="colon">:</span></dt>
<dd class="field-even">29-Jan-2007</dd>
<dt class="field-odd">Post-History<span class="colon">:</span></dt>
<dd class="field-odd">12-Feb-2007</dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Table of Contents</summary><ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#impact-on-existing-code">Impact On Existing Code</a></li>
<li><a class="reference internal" href="#performance-impact">Performance Impact</a></li>
<li><a class="reference internal" href="#error-cases">Error Cases</a></li>
<li><a class="reference internal" href="#draft-implementation">Draft Implementation</a></li>
<li><a class="reference internal" href="#mailing-lists-discussion">Mailing Lists Discussion</a></li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<div class="pep-banner sticky-banner deprecated rejected admonition warning">
<p class="admonition-title">Warning</p>
<p>This PEP has been rejected.</p>
<p class="close-button">×</p>
<p>See <a class="reference internal" href="#rejection"><span class="std std-ref">Mailing Lists Discussion</span></a> for more information.</p>
<p></p>
</div>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract" role="doc-backlink">Abstract</a></h2>
<p>Dynamic attribute access is currently possible using the “getattr”
and “setattr” builtins.  The present PEP suggests a new syntax to
make such access easier, allowing the coder for example to write:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="o">.</span><span class="p">(</span><span class="s1">&#39;foo_</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">z</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="p">(</span><span class="s1">&#39;foo_</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="p">(</span><span class="s1">&#39;bar_</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p>instead of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">attr_name</span> <span class="o">=</span> <span class="s1">&#39;foo_</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">n</span>
<span class="nb">setattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">z</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="s1">&#39;foo_</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">n</span><span class="p">),</span> <span class="s1">&#39;bar_</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="rationale">
<h2><a class="toc-backref" href="#rationale" role="doc-backlink">Rationale</a></h2>
<p>Dictionary access and indexing both have a friendly invocation
syntax: instead of <code class="docutils literal notranslate"><span class="pre">x.__getitem__(12)</span></code> the coder can write <code class="docutils literal notranslate"><span class="pre">x[12]</span></code>.
This also allows the use of subscripted elements in an augmented
assignment, as in “x[12] += 1”.  The present proposal brings this
ease-of-use to dynamic attribute access too.</p>
<p>Attribute access is currently possible in two ways:</p>
<ul>
<li>When the attribute name is known at code-writing time, the
“.NAME” trailer can be used, as in:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="o">.</span><span class="n">foo</span> <span class="o">=</span> <span class="mi">42</span>
<span class="n">y</span><span class="o">.</span><span class="n">bar</span> <span class="o">+=</span> <span class="mi">100</span>
</pre></div>
</div>
</li>
<li>When the attribute name is computed dynamically at run-time, the
“getattr” and “setattr” builtins must be used:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="s1">&#39;foo_</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span>
<span class="nb">setattr</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="s1">&#39;bar_</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">s</span><span class="p">,</span> <span class="mi">99</span><span class="p">)</span>
</pre></div>
</div>
<p>The “getattr” builtin also allows the coder to specify a default
value to be returned in the event that the object does not have
an attribute of the given name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="s1">&#39;foo_</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>This PEP describes a new syntax for dynamic attribute access —
“x.(expr)” — with examples given in the Abstract above.</p>
<p>(The new syntax could also allow the provision of a default value in
the “get” case, as in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="p">(</span><span class="s1">&#39;foo_</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">n</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>This 2-argument form of dynamic attribute access would not be
permitted as the target of an (augmented or normal) assignment.  The
“Discussion” section below includes opinions specifically on the
2-argument extension.)</p>
<p>Finally, the new syntax can be used with the “del” statement, as in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">x</span><span class="o">.</span><span class="p">(</span><span class="n">attr_name</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="impact-on-existing-code">
<h2><a class="toc-backref" href="#impact-on-existing-code" role="doc-backlink">Impact On Existing Code</a></h2>
<p>The proposed new syntax is not currently valid, so no existing
well-formed programs have their meaning altered by this proposal.</p>
<p>Across all “*.py” files in the 2.5 distribution, there are around
600 uses of “getattr”, “setattr” or “delattr”.  They break down as
follows (figures have some room for error because they were
arrived at by partially-manual inspection):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="mf">.300</span> <span class="n">uses</span> <span class="n">of</span> <span class="n">plain</span> <span class="s2">&quot;getattr(x, attr_name)&quot;</span><span class="p">,</span> <span class="n">which</span> <span class="n">could</span> <span class="n">be</span>
      <span class="n">replaced</span> <span class="k">with</span> <span class="n">the</span> <span class="n">new</span> <span class="n">syntax</span><span class="p">;</span>

<span class="n">c</span><span class="mf">.150</span> <span class="n">uses</span> <span class="n">of</span> <span class="n">the</span> <span class="mi">3</span><span class="o">-</span><span class="n">argument</span> <span class="n">form</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="p">,</span> <span class="k">with</span> <span class="n">the</span> <span class="n">default</span>
      <span class="n">value</span><span class="p">;</span> <span class="n">these</span> <span class="n">could</span> <span class="n">be</span> <span class="n">replaced</span> <span class="k">with</span> <span class="n">the</span> <span class="mi">2</span><span class="o">-</span><span class="n">argument</span> <span class="n">form</span>
      <span class="n">of</span> <span class="n">the</span> <span class="n">new</span> <span class="n">syntax</span> <span class="p">(</span><span class="n">the</span> <span class="n">cases</span> <span class="k">break</span> <span class="n">down</span> <span class="n">into</span> <span class="n">c</span><span class="mf">.125</span> <span class="n">cases</span>
      <span class="n">where</span> <span class="n">the</span> <span class="n">attribute</span> <span class="n">name</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">literal</span> <span class="n">string</span><span class="p">,</span> <span class="ow">and</span> <span class="n">c</span><span class="mf">.25</span>
      <span class="n">where</span> <span class="n">it</span><span class="s1">&#39;s only known at run-time);</span>

<span class="n">c</span><span class="mf">.5</span>   <span class="n">uses</span> <span class="n">of</span> <span class="n">the</span> <span class="mi">2</span><span class="o">-</span><span class="n">argument</span> <span class="n">form</span> <span class="k">with</span> <span class="n">a</span> <span class="n">literal</span> <span class="n">string</span>
      <span class="n">attribute</span> <span class="n">name</span><span class="p">,</span> <span class="n">which</span> <span class="n">I</span> <span class="n">think</span> <span class="n">could</span> <span class="n">be</span> <span class="n">replaced</span> <span class="k">with</span> <span class="n">the</span>
      <span class="n">standard</span> <span class="s2">&quot;x.attribute&quot;</span> <span class="n">syntax</span><span class="p">;</span>

<span class="n">c</span><span class="mf">.120</span> <span class="n">uses</span> <span class="n">of</span> <span class="nb">setattr</span><span class="p">,</span> <span class="n">of</span> <span class="n">which</span> <span class="mi">15</span> <span class="n">use</span> <span class="nb">getattr</span> <span class="n">to</span> <span class="n">find</span> <span class="n">the</span>
      <span class="n">new</span> <span class="n">value</span><span class="p">;</span> <span class="nb">all</span> <span class="n">could</span> <span class="n">be</span> <span class="n">replaced</span> <span class="k">with</span> <span class="n">the</span> <span class="n">new</span> <span class="n">syntax</span><span class="p">,</span>
      <span class="n">the</span> <span class="mi">15</span> <span class="n">where</span> <span class="nb">getattr</span> <span class="ow">is</span> <span class="n">also</span> <span class="n">involved</span> <span class="n">would</span> <span class="n">show</span> <span class="n">a</span>
      <span class="n">particular</span> <span class="n">increase</span> <span class="ow">in</span> <span class="n">clarity</span><span class="p">;</span>

<span class="n">c</span><span class="mf">.5</span>   <span class="n">uses</span> <span class="n">which</span> <span class="n">would</span> <span class="n">have</span> <span class="n">to</span> <span class="n">stay</span> <span class="k">as</span> <span class="s2">&quot;getattr&quot;</span> <span class="n">because</span> <span class="n">they</span>
      <span class="n">are</span> <span class="n">calls</span> <span class="n">of</span> <span class="n">a</span> <span class="n">variable</span> <span class="n">named</span> <span class="s2">&quot;getattr&quot;</span> <span class="n">whose</span> <span class="n">default</span>
      <span class="n">value</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">builtin</span> <span class="s2">&quot;getattr&quot;</span><span class="p">;</span>

<span class="n">c</span><span class="mf">.5</span>   <span class="n">uses</span> <span class="n">of</span> <span class="n">the</span> <span class="mi">2</span><span class="o">-</span><span class="n">argument</span> <span class="n">form</span><span class="p">,</span> <span class="n">inside</span> <span class="n">a</span> <span class="k">try</span><span class="o">/</span><span class="k">except</span> <span class="n">block</span>
      <span class="n">which</span> <span class="n">catches</span> <span class="ne">AttributeError</span> <span class="ow">and</span> <span class="n">uses</span> <span class="n">a</span> <span class="n">default</span> <span class="n">value</span>
      <span class="n">instead</span><span class="p">;</span> <span class="n">these</span> <span class="n">could</span> <span class="n">use</span> <span class="mi">2</span><span class="o">-</span><span class="n">argument</span> <span class="n">form</span> <span class="n">of</span> <span class="n">the</span> <span class="n">new</span>
      <span class="n">syntax</span><span class="p">;</span>

<span class="n">c</span><span class="mf">.10</span>  <span class="n">uses</span> <span class="n">of</span> <span class="s2">&quot;delattr&quot;</span><span class="p">,</span> <span class="n">which</span> <span class="n">could</span> <span class="n">use</span> <span class="n">the</span> <span class="n">new</span> <span class="n">syntax</span><span class="o">.</span>
</pre></div>
</div>
<p>As examples, the line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">change_root</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">)))</span>
</pre></div>
</div>
<p>from Lib/distutils/command/install.py could be rewritten:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span> <span class="o">=</span> <span class="n">change_root</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="p">(</span><span class="n">attr</span><span class="p">))</span>
</pre></div>
</div>
<p>and the line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method_name</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span> <span class="n">method_name</span><span class="p">))</span>
</pre></div>
</div>
<p>from Lib/distutils/dist.py could be rewritten:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="p">(</span><span class="n">method_name</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="p">(</span><span class="n">method_name</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="performance-impact">
<h2><a class="toc-backref" href="#performance-impact" role="doc-backlink">Performance Impact</a></h2>
<p>Initial pystone measurements are inconclusive, but suggest there may
be a performance penalty of around 1% in the pystones score with the
patched version.  One suggestion is that this is because the longer
main loop in ceval.c hurts the cache behaviour, but this has not
been confirmed.</p>
<p>On the other hand, measurements suggest a speed-up of around 40–45%
for dynamic attribute access.</p>
</section>
<section id="error-cases">
<h2><a class="toc-backref" href="#error-cases" role="doc-backlink">Error Cases</a></h2>
<p>Only strings are permitted as attribute names, so for instance the
following error is produced:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span> <span class="o">=</span> <span class="mi">8</span>
<span class="go">   Traceback (most recent call last):</span>
<span class="go">     File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span>
<span class="go">   TypeError: attribute name must be string, not &#39;int&#39;</span>
</pre></div>
</div>
<p>This is handled by the existing <code class="docutils literal notranslate"><span class="pre">PyObject_GetAttr</span></code> function.</p>
</section>
<section id="draft-implementation">
<h2><a class="toc-backref" href="#draft-implementation" role="doc-backlink">Draft Implementation</a></h2>
<p>A draft implementation adds a new alternative to the “trailer”
clause in Grammar/Grammar; a new AST type, “DynamicAttribute” in
Python.asdl, with accompanying changes to symtable.c, ast.c, and
compile.c, and three new opcodes (load/store/del) with
accompanying changes to opcode.h and ceval.c.  The patch consists
of c.180 additional lines in the core code, and c.100 additional
lines of tests.  It is available as sourceforge patch #1657573 <a class="footnote-reference brackets" href="#id4" id="id1">[1]</a>.</p>
</section>
<section id="mailing-lists-discussion">
<span id="rejection"></span><h2><a class="toc-backref" href="#mailing-lists-discussion" role="doc-backlink">Mailing Lists Discussion</a></h2>
<p>Initial posting of this PEP in draft form was to python-ideas on
20070209 <a class="footnote-reference brackets" href="#id5" id="id2">[2]</a>, and the response was generally positive.  The PEP was
then posted to python-dev on 20070212 <a class="footnote-reference brackets" href="#id6" id="id3">[3]</a>, and an interesting
discussion ensued.  A brief summary:</p>
<p>Initially, there was reasonable (but not unanimous) support for the
idea, although the precise choice of syntax had a more mixed
reception.  Several people thought the “.” would be too easily
overlooked, with the result that the syntax could be confused with a
method/function call.  A few alternative syntaxes were suggested:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span><span class="o">.</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="n">obj</span><span class="o">.</span><span class="p">[</span><span class="n">foo</span><span class="p">]</span>
<span class="n">obj</span><span class="o">.</span><span class="p">{</span><span class="n">foo</span><span class="p">}</span>
<span class="n">obj</span><span class="p">{</span><span class="n">foo</span><span class="p">}</span>
<span class="n">obj</span><span class="o">.*</span><span class="n">foo</span>
<span class="n">obj</span><span class="o">-&gt;</span><span class="n">foo</span>
<span class="n">obj</span><span class="o">&lt;-</span><span class="n">foo</span>
<span class="n">obj</span><span class="o">@</span><span class="p">[</span><span class="n">foo</span><span class="p">]</span>
<span class="n">obj</span><span class="o">.</span><span class="p">[[</span><span class="n">foo</span><span class="p">]]</span>
</pre></div>
</div>
<p>with “obj.[foo]” emerging as the preferred one.  In this initial
discussion, the two-argument form was universally disliked, so it
was to be taken out of the PEP.</p>
<p>Discussion then took a step back to whether this particular feature
provided enough benefit to justify new syntax.  As well as requiring
coders to become familiar with the new syntax, there would also be
the problem of backward compatibility — code using the new syntax
would not run on older pythons.</p>
<p>Instead of new syntax, a new “wrapper class” was proposed, with the
following specification / conceptual implementation suggested by
Martin von Löwis:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">attrs</span><span class="p">:</span>
   <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
     <span class="bp">self</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span>
   <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
     <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
   <span class="k">def</span><span class="w"> </span><span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
     <span class="k">return</span> <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
   <span class="k">def</span><span class="w"> </span><span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
     <span class="k">return</span> <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
   <span class="k">def</span><span class="w"> </span><span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
     <span class="k">return</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>This was considered a cleaner and more elegant solution to the
original problem.  (Another suggestion was a mixin class providing
dictionary-style access to an object’s attributes.)</p>
<p>The decision was made that the present PEP did not meet the burden
of proof for the introduction of new syntax, a view which had been
put forward by some from the beginning of the discussion.  The
wrapper class idea was left open as a possibility for a future PEP.</p>
</section>
<section id="references">
<h2><a class="toc-backref" href="#references" role="doc-backlink">References</a></h2>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id4" role="doc-footnote">
<dt class="label" id="id4">[<a href="#id1">1</a>]</dt>
<dd>Sourceforge patch #1657573
<a class="reference external" href="http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1657573&amp;group_id=5470&amp;atid=305470">http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1657573&amp;group_id=5470&amp;atid=305470</a></aside>
<aside class="footnote brackets" id="id5" role="doc-footnote">
<dt class="label" id="id5">[<a href="#id2">2</a>]</dt>
<dd><a class="reference external" href="https://mail.python.org/pipermail/python-ideas/2007-February/000210.html">https://mail.python.org/pipermail/python-ideas/2007-February/000210.html</a>
and following posts</aside>
<aside class="footnote brackets" id="id6" role="doc-footnote">
<dt class="label" id="id6">[<a href="#id3">3</a>]</dt>
<dd><a class="reference external" href="https://mail.python.org/pipermail/python-dev/2007-February/070939.html">https://mail.python.org/pipermail/python-dev/2007-February/070939.html</a>
and following posts</aside>
</aside>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright" role="doc-backlink">Copyright</a></h2>
<p>This document has been placed in the public domain.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/peps/pep-0363.rst">https://github.com/python/peps/blob/main/peps/pep-0363.rst</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/peps/pep-0363.rst">2024-04-14 20:08:31 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <div id="search"></div>
            <h2>Contents</h2>
            <ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#impact-on-existing-code">Impact On Existing Code</a></li>
<li><a class="reference internal" href="#performance-impact">Performance Impact</a></li>
<li><a class="reference internal" href="#error-cases">Error Cases</a></li>
<li><a class="reference internal" href="#draft-implementation">Draft Implementation</a></li>
<li><a class="reference internal" href="#mailing-lists-discussion">Mailing Lists Discussion</a></li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br>
            <a id="source" href="https://github.com/python/peps/blob/main/peps/pep-0363.rst?plain=1">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
    <script src="../_static/sticky_banner.js"></script>
    <script src="https://analytics.python.org/js/script.outbound-links.js"
            data-domain="peps.python.org" defer></script>
    <script src="/pagefind/pagefind-ui.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            // Ranking configuration to boost exact title matches
            const searchOptions = {
                ranking: {
                    termSimilarity: 9.0, // Higher values favor exact matches
                    termFrequency: 0.5, // Lower values reduce penalty for low term frequency
                    pageLength: 0.2, // Lower values reduce the impact of page length
                }
            };

            // Initialize pagefind for either mobile or desktop, not both
            if (window.innerWidth <= 640) {
                new PagefindUI({ element: "#mobile-search", ...searchOptions, showSubResults: false });
            } else {
                new PagefindUI({ element: "#search", ...searchOptions, showSubResults: true });
            }
        });
    </script>
</body>
</html>