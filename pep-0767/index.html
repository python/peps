
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>PEP 767 – Annotating Read-Only Attributes | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png">
    <link rel="canonical" href="https://peps.python.org/pep-0767/">
    <link rel="stylesheet" href="../_static/style.css" type="text/css">
    <link rel="stylesheet" href="../_static/mq.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg-light">
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark">
    <link rel="alternate" type="application/rss+xml" title="Latest PEPs" href="https://peps.python.org/peps.rss">
    <meta property="og:title" content='PEP 767 – Annotating Read-Only Attributes | peps.python.org'>
    <meta property="og:description" content="PEP 705 introduced the typing.ReadOnly type qualifier to allow defining read-only typing.TypedDict items.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://peps.python.org/pep-0767/">
    <meta property="og:site_name" content="Python Enhancement Proposals (PEPs)">
    <meta property="og:image" content="https://peps.python.org/_static/og-image.png">
    <meta property="og:image:alt" content="Python PEPs">
    <meta property="og:image:width" content="200">
    <meta property="og:image:height" content="200">
    <meta name="description" content="PEP 705 introduced the typing.ReadOnly type qualifier to allow defining read-only typing.TypedDict items.">
    <meta name="theme-color" content="#3776ab">
</head>
<body>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-sun-half" viewBox="0 0 24 24" pointer-events="all">
    <title>Following system colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9"></circle>
      <path d="M12 3v18m0-12l4.65-4.65M12 14.3l7.37-7.37M12 19.6l8.85-8.85"></path>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected dark colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected light colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
</svg>
    <script>

        document.documentElement.dataset.colour_scheme = localStorage.getItem("colour_scheme") || "auto"
    </script>
    <section id="pep-page-section">
        <header>
            <h1 data-pagefind-ignore>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 767</li>
            </ul>
            <button id="colour-scheme-cycler" onClick="setColourScheme(nextColourScheme())">
                <svg aria-hidden="true" class="colour-scheme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-dark"><use href="#svg-moon"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-light"><use href="#svg-sun"></use></svg>
                <span class="visually-hidden">Toggle light / dark / auto colour theme</span>
            </button>
        </header>
        
        <div id="mobile-search" class="mobile-search-container"></div>
        
        <article data-pagefind-body>
            
            <span data-pagefind-meta="title:PEP 767 – Annotating Read-Only Attributes" data-pagefind-weight="10" class="visually-hidden">PEP 767 – Annotating Read-Only Attributes</span>
            <section id="pep-content">
<h1 class="page-title">PEP 767 – Annotating Read-Only Attributes</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd">Eneg &lt;eneg at discuss.python.org&gt;</dd>
<dt class="field-even">Sponsor<span class="colon">:</span></dt>
<dd class="field-even">Carl Meyer &lt;carl&#32;&#97;t&#32;oddbird.net&gt;</dd>
<dt class="field-odd">Discussions-To<span class="colon">:</span></dt>
<dd class="field-odd"><a class="reference external" href="https://discuss.python.org/t/pep-767-annotating-read-only-attributes/73408">Discourse thread</a></dd>
<dt class="field-even">Status<span class="colon">:</span></dt>
<dd class="field-even"><abbr title="Proposal under active discussion and revision">Draft</abbr></dd>
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><abbr title="Normative PEP with a new feature for Python, implementation change for CPython or interoperability standard for the ecosystem">Standards Track</abbr></dd>
<dt class="field-even">Topic<span class="colon">:</span></dt>
<dd class="field-even"><a class="reference external" href="../topic/typing/">Typing</a></dd>
<dt class="field-odd">Created<span class="colon">:</span></dt>
<dd class="field-odd">18-Nov-2024</dd>
<dt class="field-even">Python-Version<span class="colon">:</span></dt>
<dd class="field-even">3.15</dd>
<dt class="field-odd">Post-History<span class="colon">:</span></dt>
<dd class="field-odd"><a class="reference external" href="https://discuss.python.org/t/expanding-readonly-to-normal-classes-protocols/67359" title="Discourse thread">09-Oct-2024</a></dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Table of Contents</summary><ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a><ul>
<li><a class="reference internal" href="#classes">Classes</a></li>
<li><a class="reference internal" href="#protocols">Protocols</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#initialization">Initialization</a><ul>
<li><a class="reference internal" href="#instance-attributes">Instance Attributes</a></li>
<li><a class="reference internal" href="#class-attributes">Class Attributes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#subtyping">Subtyping</a></li>
<li><a class="reference internal" href="#interaction-with-other-type-qualifiers">Interaction with Other Type Qualifiers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#security-implications">Security Implications</a></li>
<li><a class="reference internal" href="#how-to-teach-this">How to Teach This</a></li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#clarifying-interaction-of-property-and-protocols">Clarifying Interaction of <code class="docutils literal notranslate"><span class="pre">&#64;property</span></code> and Protocols</a></li>
<li><a class="reference internal" href="#assignment-only-in-init-and-class-body">Assignment Only in <code class="docutils literal notranslate"><span class="pre">__init__</span></code> and Class Body</a></li>
</ul>
</li>
<li><a class="reference internal" href="#open-issues">Open Issues</a><ul>
<li><a class="reference internal" href="#extending-initialization">Extending Initialization</a></li>
</ul>
</li>
<li><a class="reference internal" href="#footnotes">Footnotes</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract" role="doc-backlink">Abstract</a></h2>
<p><a class="pep reference internal" href="../pep-0705/" title="PEP 705 – TypedDict: Read-only items">PEP 705</a> introduced the <a class="reference external" href="https://docs.python.org/3.13/library/typing.html#typing.ReadOnly" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.ReadOnly</span></code></a> type qualifier
to allow defining read-only <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.TypedDict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.TypedDict</span></code></a> items.</p>
<p>This PEP proposes using <code class="docutils literal notranslate"><span class="pre">ReadOnly</span></code> in <a class="reference external" href="https://docs.python.org/3/glossary.html#term-annotation" title="(in Python v3.14)"><span class="xref std std-term">annotations</span></a> of class and protocol
<a class="reference external" href="https://docs.python.org/3/glossary.html#term-attribute" title="(in Python v3.14)"><span class="xref std std-term">attributes</span></a>, as a single concise way to mark them read-only.</p>
<p>Akin to <a class="pep reference internal" href="../pep-0705/" title="PEP 705 – TypedDict: Read-only items">PEP 705</a>, it makes no changes to setting attributes at runtime. Correct
usage of read-only attributes is intended to be enforced only by static type checkers.</p>
</section>
<section id="motivation">
<h2><a class="toc-backref" href="#motivation" role="doc-backlink">Motivation</a></h2>
<p>The Python type system lacks a single concise way to mark an attribute read-only.
This feature is present in other statically and gradually typed languages
(such as <a class="reference external" href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/readonly">C#</a>
or <a class="reference external" href="https://www.typescriptlang.org/docs/handbook/2/objects.html#readonly-properties">TypeScript</a>),
and is useful for removing the ability to reassign or <code class="docutils literal notranslate"><span class="pre">del</span></code>ete an attribute
at a type checker level, as well as defining a broad interface for structural subtyping.</p>
<section id="classes">
<span id="id1"></span><h3><a class="toc-backref" href="#classes" role="doc-backlink">Classes</a></h3>
<p>Today, there are three major ways of achieving read-only attributes, honored by type checkers:</p>
<ul>
<li>annotating the attribute with <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Final" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.Final</span></code></a>:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="p">:</span>
    <span class="n">number</span><span class="p">:</span> <span class="n">Final</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">number</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Bar</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="p">:</span> <span class="n">Final</span> <span class="o">=</span> <span class="n">number</span>
</pre></div>
</div>
<ul class="simple">
<li>Supported by <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html#module-dataclasses" title="(in Python v3.14)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dataclasses</span></code></a> (and type checkers since <a class="reference external" href="https://github.com/python/typing/pull/1669">typing#1669</a>).</li>
<li>Overriding <code class="docutils literal notranslate"><span class="pre">number</span></code> is not possible - the specification of <code class="docutils literal notranslate"><span class="pre">Final</span></code>
imposes that the name cannot be overridden in subclasses.</li>
</ul>
</li>
<li>read-only proxy via <code class="docutils literal notranslate"><span class="pre">&#64;property</span></code>:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="p">:</span>
    <span class="n">_number</span><span class="p">:</span> <span class="nb">int</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_number</span> <span class="o">=</span> <span class="n">number</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">number</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number</span>
</pre></div>
</div>
<ul class="simple">
<li>Overriding <code class="docutils literal notranslate"><span class="pre">number</span></code> is possible. <em>Type checkers disagree about the specific rules</em>. <a class="footnote-reference brackets" href="#overriding-property" id="id2">[1]</a></li>
<li>Read-only at runtime. <a class="footnote-reference brackets" href="#runtime" id="id3">[2]</a></li>
<li>Requires extra boilerplate.</li>
<li>Supported by <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html#module-dataclasses" title="(in Python v3.14)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dataclasses</span></code></a>, but does not compose well - the synthesized
<code class="docutils literal notranslate"><span class="pre">__init__</span></code> and <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> will use <code class="docutils literal notranslate"><span class="pre">_number</span></code> as the parameter/attribute name.</li>
</ul>
</li>
<li>using a “freezing” mechanism, such as <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html#dataclasses.dataclass" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">dataclasses.dataclass()</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.NamedTuple" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.NamedTuple</span></code></a>:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="p">:</span>
    <span class="n">number</span><span class="p">:</span> <span class="nb">int</span>  <span class="c1"># implicitly read-only</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Bar</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
    <span class="n">number</span><span class="p">:</span> <span class="nb">int</span>  <span class="c1"># implicitly read-only</span>
</pre></div>
</div>
<ul class="simple">
<li>Overriding <code class="docutils literal notranslate"><span class="pre">number</span></code> is possible in the <code class="docutils literal notranslate"><span class="pre">&#64;dataclass</span></code> case.</li>
<li>Read-only at runtime. <a class="footnote-reference brackets" href="#runtime" id="id4">[2]</a></li>
<li>No per-attribute control - these mechanisms apply to the whole class.</li>
<li>Frozen dataclasses incur some runtime overhead.</li>
<li><code class="docutils literal notranslate"><span class="pre">NamedTuple</span></code> is still a <code class="docutils literal notranslate"><span class="pre">tuple</span></code>. Most classes do not need to inherit
indexing, iteration, or concatenation.</li>
</ul>
</li>
</ul>
</section>
<section id="protocols">
<span id="id5"></span><h3><a class="toc-backref" href="#protocols" role="doc-backlink">Protocols</a></h3>
<p>Suppose a <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Protocol" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Protocol</span></code></a> member <code class="docutils literal notranslate"><span class="pre">name:</span> <span class="pre">T</span></code> defining two requirements:</p>
<ol class="arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">hasattr(obj,</span> <span class="pre">&quot;name&quot;)</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">isinstance(obj.name,</span> <span class="pre">T)</span></code></li>
</ol>
<p>Those requirements are satisfiable at runtime by all of the following:</p>
<ul class="simple">
<li>an object with an attribute <code class="docutils literal notranslate"><span class="pre">name:</span> <span class="pre">T</span></code>,</li>
<li>a class with a class variable <code class="docutils literal notranslate"><span class="pre">name:</span> <span class="pre">ClassVar[T]</span></code>,</li>
<li>an instance of the class above,</li>
<li>an object with a <code class="docutils literal notranslate"><span class="pre">&#64;property</span></code> <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">name(self)</span> <span class="pre">-&gt;</span> <span class="pre">T</span></code>,</li>
<li>an object with a custom descriptor, such as <a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.cached_property" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.cached_property()</span></code></a>.</li>
</ul>
<p>The current <a class="reference external" href="https://typing.python.org/en/latest/spec/protocol.html#protocol-members">typing spec</a>
allows creation of such protocol members using (abstract) properties:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">HasName</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span> <span class="o">...</span>
</pre></div>
</div>
<p>This syntax has several drawbacks:</p>
<ul class="simple">
<li>It is somewhat verbose.</li>
<li>It is not obvious that the quality conveyed here is the read-only character of a property.</li>
<li>It is not composable with <a class="reference external" href="https://typing.python.org/en/latest/spec/glossary.html#term-type-qualifier" title="(in typing)"><span class="xref std std-term">type qualifiers</span></a>.</li>
<li>Not all type checkers agree <a class="footnote-reference brackets" href="#property-in-protocol" id="id6">[3]</a> that all of the above five
objects are assignable to this structural type.</li>
</ul>
</section>
</section>
<section id="rationale">
<h2><a class="toc-backref" href="#rationale" role="doc-backlink">Rationale</a></h2>
<p>These problems can be resolved by an attribute-level type qualifier.
<code class="docutils literal notranslate"><span class="pre">ReadOnly</span></code> has been chosen for this role, as its name conveys the intent well,
and the newly proposed changes complement its semantics defined in <a class="pep reference internal" href="../pep-0705/" title="PEP 705 – TypedDict: Read-only items">PEP 705</a>.</p>
<p>A class with a read-only instance attribute can now be defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">ReadOnly</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Member</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="nb">id</span>
</pre></div>
</div>
<p>…and the protocol described in <a class="reference internal" href="#protocols"><span class="std std-ref">Protocols</span></a> is now just:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Protocol</span><span class="p">,</span> <span class="n">ReadOnly</span>


<span class="k">class</span><span class="w"> </span><span class="nc">HasName</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>


<span class="k">def</span><span class="w"> </span><span class="nf">greet</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">HasName</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Hello, </span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">!&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li>A subclass of <code class="docutils literal notranslate"><span class="pre">Member</span></code> can redefine <code class="docutils literal notranslate"><span class="pre">.id</span></code> as a writable attribute or a
<a class="reference external" href="https://docs.python.org/3/glossary.html#term-descriptor" title="(in Python v3.14)"><span class="xref std std-term">descriptor</span></a>. It can also <a class="reference external" href="https://typing.python.org/en/latest/spec/glossary.html#term-narrow" title="(in typing)"><span class="xref std std-term">narrow</span></a> the type.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">HasName</span></code> protocol has a more succinct definition, and is agnostic
to the writability of the attribute.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">greet</span></code> function can now accept a wide variety of compatible objects,
while being explicit about no modifications being done to the input.</li>
</ul>
</section>
<section id="specification">
<h2><a class="toc-backref" href="#specification" role="doc-backlink">Specification</a></h2>
<p>The <a class="reference external" href="https://docs.python.org/3.13/library/typing.html#typing.ReadOnly" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.ReadOnly</span></code></a> <a class="reference external" href="https://typing.python.org/en/latest/spec/glossary.html#term-type-qualifier" title="(in typing)"><span class="xref std std-term">type qualifier</span></a>
becomes a valid annotation for <a class="reference external" href="https://docs.python.org/3/glossary.html#term-attribute" title="(in Python v3.14)"><span class="xref std std-term">attributes</span></a> of classes and protocols.
It can be used at class-level or within <code class="docutils literal notranslate"><span class="pre">__init__</span></code> to mark individual attributes read-only:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Book</span><span class="p">:</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
</pre></div>
</div>
<p>Type checkers should error on any attempt to reassign or <code class="docutils literal notranslate"><span class="pre">del</span></code>ete an attribute
annotated with <code class="docutils literal notranslate"><span class="pre">ReadOnly</span></code>.
Type checkers should also error on any attempt to delete an attribute annotated as <code class="docutils literal notranslate"><span class="pre">Final</span></code>.
(This is not currently specified.)</p>
<p>Use of <code class="docutils literal notranslate"><span class="pre">ReadOnly</span></code> in annotations at other sites where it currently has no meaning
(such as local/global variables or function parameters) is considered out of scope
for this PEP.</p>
<p>Akin to <code class="docutils literal notranslate"><span class="pre">Final</span></code> <a class="footnote-reference brackets" href="#final-mutability" id="id7">[4]</a>, <code class="docutils literal notranslate"><span class="pre">ReadOnly</span></code> does not influence how
type checkers perceive the mutability of the assigned object. Immutable <a class="reference external" href="https://docs.python.org/3/glossary.html#term-abstract-base-class" title="(in Python v3.14)"><span class="xref std std-term">ABCs</span></a>
and <a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#module-collections.abc" title="(in Python v3.14)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">containers</span></code></a> may be used in combination with <code class="docutils literal notranslate"><span class="pre">ReadOnly</span></code>
to forbid mutation of such values at a type checker level:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">abc</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Protocol</span><span class="p">,</span> <span class="n">ReadOnly</span>


<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Game</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span><span class="w"> </span><span class="nc">HasGames</span><span class="p">[</span><span class="n">T</span><span class="p">:</span> <span class="n">abc</span><span class="o">.</span><span class="n">Collection</span><span class="p">[</span><span class="n">Game</span><span class="p">]](</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="n">games</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="n">T</span><span class="p">]</span>


<span class="k">def</span><span class="w"> </span><span class="nf">add_games</span><span class="p">(</span><span class="n">shelf</span><span class="p">:</span> <span class="n">HasGames</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Game</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">shelf</span><span class="o">.</span><span class="n">games</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Game</span><span class="p">(</span><span class="s2">&quot;Half-Life&quot;</span><span class="p">))</span>  <span class="c1"># ok: list is mutable</span>
    <span class="n">shelf</span><span class="o">.</span><span class="n">games</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Black Mesa&quot;</span>    <span class="c1"># ok: &quot;name&quot; is not read-only</span>
    <span class="n">shelf</span><span class="o">.</span><span class="n">games</span> <span class="o">=</span> <span class="p">[]</span>                       <span class="c1"># error: &quot;games&quot; is read-only</span>
    <span class="k">del</span> <span class="n">shelf</span><span class="o">.</span><span class="n">games</span>                        <span class="c1"># error: &quot;games&quot; is read-only and cannot be deleted</span>


<span class="k">def</span><span class="w"> </span><span class="nf">read_games</span><span class="p">(</span><span class="n">shelf</span><span class="p">:</span> <span class="n">HasGames</span><span class="p">[</span><span class="n">abc</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="n">Game</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">shelf</span><span class="o">.</span><span class="n">games</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>             <span class="c1"># error: &quot;Sequence&quot; has no attribute &quot;append&quot;</span>
    <span class="n">shelf</span><span class="o">.</span><span class="n">games</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Blue Shift&quot;</span>  <span class="c1"># ok: &quot;name&quot; is not read-only</span>
    <span class="n">shelf</span><span class="o">.</span><span class="n">games</span> <span class="o">=</span> <span class="p">[]</span>                    <span class="c1"># error: &quot;games&quot; is read-only</span>
</pre></div>
</div>
<p>All instance attributes of frozen dataclasses and <code class="docutils literal notranslate"><span class="pre">NamedTuple</span></code> should be
implied to be read-only. Type checkers may inform that annotating such attributes
with <code class="docutils literal notranslate"><span class="pre">ReadOnly</span></code> is redundant, but it should not be seen as an error:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">NewType</span><span class="p">,</span> <span class="n">ReadOnly</span>


<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Point</span><span class="p">:</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span>            <span class="c1"># implicit read-only</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>  <span class="c1"># ok, redundant</span>


<span class="n">uint</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;uint&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>


<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">UnsignedPoint</span><span class="p">(</span><span class="n">Point</span><span class="p">):</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="n">uint</span><span class="p">]</span>  <span class="c1"># ok, redundant; narrower type</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">Final</span><span class="p">[</span><span class="n">uint</span><span class="p">]</span>     <span class="c1"># not redundant, Final imposes extra restrictions; narrower type</span>
</pre></div>
</div>
<section id="initialization">
<span id="init"></span><h3><a class="toc-backref" href="#initialization" role="doc-backlink">Initialization</a></h3>
<p>Assignment to a read-only attribute can only occur in the class declaring the attribute.
There is no restriction to how many times the attribute can be assigned to.
Depending on the kind of the attribute, they can be assigned to at different sites:</p>
<section id="instance-attributes">
<h4><a class="toc-backref" href="#instance-attributes" role="doc-backlink">Instance Attributes</a></h4>
<p>Assignment to an instance attribute must be allowed in the following contexts:</p>
<ul class="simple">
<li>In <code class="docutils literal notranslate"><span class="pre">__init__</span></code>, on the instance received as the first parameter (likely, <code class="docutils literal notranslate"><span class="pre">self</span></code>).</li>
<li>In <code class="docutils literal notranslate"><span class="pre">__new__</span></code>, on instances of the declaring class created via a call
to a super-class’ <code class="docutils literal notranslate"><span class="pre">__new__</span></code> method.</li>
<li>At declaration in the body of the class.</li>
</ul>
<p>Additionally, a type checker may choose to allow the assignment:</p>
<ul class="simple">
<li>In <code class="docutils literal notranslate"><span class="pre">__new__</span></code>, on instances of the declaring class, without regard
to the origin of the instance.
(This choice trades soundness, as the instance may already be initialized,
for the simplicity of implementation.)</li>
<li>In <code class="docutils literal notranslate"><span class="pre">&#64;classmethod</span></code>s, on instances of the declaring class created via
a call to the class’ or super-class’ <code class="docutils literal notranslate"><span class="pre">__new__</span></code> method.</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">abc</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">ReadOnly</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Band</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">songs</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">songs</span><span class="p">:</span> <span class="n">abc</span><span class="o">.</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">songs</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">songs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">songs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">songs</span><span class="p">)</span>  <span class="c1"># multiple assignments are fine</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># error: assignment to read-only &quot;songs&quot; outside initialization</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">songs</span> <span class="o">=</span> <span class="p">[]</span>


<span class="n">band</span> <span class="o">=</span> <span class="n">Band</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Bôa&quot;</span><span class="p">,</span> <span class="n">songs</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Duvet&quot;</span><span class="p">])</span>
<span class="n">band</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Python&quot;</span>           <span class="c1"># ok: &quot;name&quot; is not read-only</span>
<span class="n">band</span><span class="o">.</span><span class="n">songs</span> <span class="o">=</span> <span class="p">[]</span>                <span class="c1"># error: &quot;songs&quot; is read-only</span>
<span class="n">band</span><span class="o">.</span><span class="n">songs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Twilight&quot;</span><span class="p">)</span>  <span class="c1"># ok: list is mutable</span>


<span class="k">class</span><span class="w"> </span><span class="nc">SubBand</span><span class="p">(</span><span class="n">Band</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">songs</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># error: cannot assign to a read-only attribute of a base class</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># a simplified immutable Fraction class</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Fraction</span><span class="p">:</span>
    <span class="n">numerator</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
    <span class="n">denominator</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__new__</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">numerator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="n">Decimal</span> <span class="o">|</span> <span class="n">Rational</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">denominator</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">Rational</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
        <span class="bp">self</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">denominator</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">numerator</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">numerator</span> <span class="o">=</span> <span class="n">numerator</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">denominator</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">return</span> <span class="bp">self</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">numerator</span><span class="p">,</span> <span class="n">Rational</span><span class="p">):</span> <span class="o">...</span>

        <span class="k">else</span><span class="p">:</span> <span class="o">...</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_float</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
        <span class="bp">self</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numerator</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">denominator</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">as_integer_ratio</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>
</pre></div>
</div>
</section>
<section id="class-attributes">
<h4><a class="toc-backref" href="#class-attributes" role="doc-backlink">Class Attributes</a></h4>
<p>Read-only class attributes are attributes annotated as both <code class="docutils literal notranslate"><span class="pre">ReadOnly</span></code> and <code class="docutils literal notranslate"><span class="pre">ClassVar</span></code>.
Assignment to such attributes must be allowed in the following contexts:</p>
<ul class="simple">
<li>At declaration in the body of the class.</li>
<li>In <code class="docutils literal notranslate"><span class="pre">__init_subclass__</span></code>, on the class object received as the first parameter (likely, <code class="docutils literal notranslate"><span class="pre">cls</span></code>).</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">URI</span><span class="p">:</span>
    <span class="n">protocol</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="n">ClassVar</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__init_subclass__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">protocol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">protocol</span> <span class="o">=</span> <span class="n">protocol</span>

<span class="k">class</span><span class="w"> </span><span class="nc">File</span><span class="p">(</span><span class="n">URI</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="s2">&quot;file&quot;</span><span class="p">):</span> <span class="o">...</span>
</pre></div>
</div>
<p>When a class-level declaration has an initializing value, it can serve as a <a class="reference external" href="https://en.wikipedia.org/wiki/Flyweight_pattern">flyweight</a>
default for instances:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Patient</span><span class="p">:</span>
    <span class="n">number</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">number</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">number</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This feature conflicts with <a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#object.__slots__" title="(in Python v3.14)"><code class="xref py py-data docutils literal notranslate"><span class="pre">__slots__</span></code></a>. An attribute with
a class-level value cannot be included in slots, effectively making it a class variable.</p>
</div>
<p>Type checkers may choose to warn on read-only attributes which could be left uninitialized
after an instance is created (except in <a class="reference external" href="https://typing.python.org/en/latest/spec/glossary.html#term-stub" title="(in typing)"><span class="xref std std-term">stubs</span></a>,
protocols or ABCs):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Patient</span><span class="p">:</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>    <span class="c1"># error: &quot;id&quot; is not initialized on all code paths</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>  <span class="c1"># error: &quot;name&quot; is never initialized</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">123</span>


<span class="k">class</span><span class="w"> </span><span class="nc">HasName</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>  <span class="c1"># ok</span>
</pre></div>
</div>
</section>
</section>
<section id="subtyping">
<h3><a class="toc-backref" href="#subtyping" role="doc-backlink">Subtyping</a></h3>
<p>The inability to reassign read-only attributes makes them covariant.
This has a few subtyping implications. Borrowing from <a class="pep reference internal" href="../pep-0705/#inheritance" title="PEP 705 – TypedDict: Read-only items § Inheritance">PEP 705</a>:</p>
<ul>
<li>Read-only attributes can be redeclared as writable attributes, descriptors
or class variables:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">HasTitle</span><span class="p">:</span>
    <span class="n">title</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>


<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Game</span><span class="p">(</span><span class="n">HasTitle</span><span class="p">):</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">year</span><span class="p">:</span> <span class="nb">int</span>


<span class="n">game</span> <span class="o">=</span> <span class="n">Game</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;DOOM&quot;</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">1993</span><span class="p">)</span>
<span class="n">game</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="mi">1994</span>
<span class="n">game</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;DOOM II&quot;</span>  <span class="c1"># ok: attribute is not read-only</span>


<span class="k">class</span><span class="w"> </span><span class="nc">TitleProxy</span><span class="p">(</span><span class="n">HasTitle</span><span class="p">):</span>
    <span class="nd">@functools</span><span class="o">.</span><span class="n">cached_property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span> <span class="o">...</span>


<span class="k">class</span><span class="w"> </span><span class="nc">SharedTitle</span><span class="p">(</span><span class="n">HasTitle</span><span class="p">):</span>
    <span class="n">title</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Still Grey&quot;</span>
</pre></div>
</div>
</li>
<li>If a read-only attribute is not redeclared, it remains read-only:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Game</span><span class="p">(</span><span class="n">HasTitle</span><span class="p">):</span>
    <span class="n">year</span><span class="p">:</span> <span class="nb">int</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">year</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>  <span class="c1"># error: cannot assign to a read-only attribute of base class</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="n">year</span>


<span class="n">game</span> <span class="o">=</span> <span class="n">Game</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Robot Wants Kitty&quot;</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">2010</span><span class="p">)</span>
<span class="n">game</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Robot Wants Puppy&quot;</span>  <span class="c1"># error: &quot;title&quot; is read-only</span>
</pre></div>
</div>
</li>
<li>Subtypes can <a class="reference external" href="https://typing.python.org/en/latest/spec/glossary.html#term-narrow" title="(in typing)"><span class="xref std std-term">narrow</span></a> the type of read-only attributes:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">GameCollection</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="n">games</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="n">abc</span><span class="o">.</span><span class="n">Collection</span><span class="p">[</span><span class="n">Game</span><span class="p">]]</span>


<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">GameSeries</span><span class="p">(</span><span class="n">GameCollection</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">games</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Game</span><span class="p">]]</span>  <span class="c1"># ok: list[Game] is assignable to Collection[Game]</span>
</pre></div>
</div>
</li>
<li>Nominal subclasses of protocols and ABCs should redeclare read-only attributes
in order to implement them, unless the base class initializes them in some way:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyBase</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
    <span class="n">bar</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;abc&quot;</span>
    <span class="n">baz</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">baz</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">baz</span> <span class="o">=</span> <span class="n">baz</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">pprint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span> <span class="o">...</span>


<span class="nd">@final</span>
<span class="k">class</span><span class="w"> </span><span class="nc">MySubclass</span><span class="p">(</span><span class="n">MyBase</span><span class="p">):</span>
    <span class="c1"># error: MySubclass does not override &quot;foo&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">pprint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">foo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bar</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">baz</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li>In a protocol attribute declaration, <code class="docutils literal notranslate"><span class="pre">name:</span> <span class="pre">ReadOnly[T]</span></code> indicates that a structural
subtype must support <code class="docutils literal notranslate"><span class="pre">.name</span></code> access, and the returned value is assignable to <code class="docutils literal notranslate"><span class="pre">T</span></code>:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">HasName</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>


<span class="k">class</span><span class="w"> </span><span class="nc">NamedAttr</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>

<span class="k">class</span><span class="w"> </span><span class="nc">NamedProp</span><span class="p">:</span>
    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span> <span class="o">...</span>

<span class="k">class</span><span class="w"> </span><span class="nc">NamedClassVar</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>

<span class="k">class</span><span class="w"> </span><span class="nc">NamedDescriptor</span><span class="p">:</span>
    <span class="nd">@cached_property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span> <span class="o">...</span>

<span class="c1"># all of the following are ok</span>
<span class="n">has_name</span><span class="p">:</span> <span class="n">HasName</span>
<span class="n">has_name</span> <span class="o">=</span> <span class="n">NamedAttr</span><span class="p">()</span>
<span class="n">has_name</span> <span class="o">=</span> <span class="n">NamedProp</span><span class="p">()</span>
<span class="n">has_name</span> <span class="o">=</span> <span class="n">NamedClassVar</span>
<span class="n">has_name</span> <span class="o">=</span> <span class="n">NamedClassVar</span><span class="p">()</span>
<span class="n">has_name</span> <span class="o">=</span> <span class="n">NamedDescriptor</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="interaction-with-other-type-qualifiers">
<h3><a class="toc-backref" href="#interaction-with-other-type-qualifiers" role="doc-backlink">Interaction with Other Type Qualifiers</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">ReadOnly</span></code> can be used with <code class="docutils literal notranslate"><span class="pre">ClassVar</span></code> and <code class="docutils literal notranslate"><span class="pre">Annotated</span></code> in any nesting order:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="p">:</span>
    <span class="n">foo</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">ReadOnly</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;foo&quot;</span>
    <span class="n">bar</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">ReadOnly</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">Gt</span><span class="p">(</span><span class="mi">0</span><span class="p">)]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="p">:</span>
    <span class="n">foo</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="n">ClassVar</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;foo&quot;</span>
    <span class="n">bar</span><span class="p">:</span> <span class="n">ReadOnly</span><span class="p">[</span><span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Gt</span><span class="p">(</span><span class="mi">0</span><span class="p">)]]</span>
</pre></div>
</div>
<p>This is consistent with the interaction of <code class="docutils literal notranslate"><span class="pre">ReadOnly</span></code> and <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.TypedDict" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.TypedDict</span></code></a>
defined in <a class="pep reference internal" href="../pep-0705/" title="PEP 705 – TypedDict: Read-only items">PEP 705</a>.</p>
<p>An attribute cannot be annotated as both <code class="docutils literal notranslate"><span class="pre">ReadOnly</span></code> and <code class="docutils literal notranslate"><span class="pre">Final</span></code>, as the two
qualifiers differ in semantics, and <code class="docutils literal notranslate"><span class="pre">Final</span></code> is generally more restrictive.
<code class="docutils literal notranslate"><span class="pre">Final</span></code> remains allowed as an annotation of attributes that are only implied
to be read-only. It can be also used to redeclare a <code class="docutils literal notranslate"><span class="pre">ReadOnly</span></code> attribute of a base class.</p>
</section>
</section>
<section id="backwards-compatibility">
<h2><a class="toc-backref" href="#backwards-compatibility" role="doc-backlink">Backwards Compatibility</a></h2>
<p>This PEP introduces new contexts where <code class="docutils literal notranslate"><span class="pre">ReadOnly</span></code> is valid. Programs inspecting
those places will have to change to support it. This is expected to mainly affect type checkers.</p>
<p>However, caution is advised while using the backported <code class="docutils literal notranslate"><span class="pre">typing_extensions.ReadOnly</span></code>
in older versions of Python. Mechanisms inspecting annotations may behave incorrectly
when encountering <code class="docutils literal notranslate"><span class="pre">ReadOnly</span></code>; in particular, the <code class="docutils literal notranslate"><span class="pre">&#64;dataclass</span></code> decorator
which <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html#class-variables">looks for</a>
<code class="docutils literal notranslate"><span class="pre">ClassVar</span></code> may mistakenly treat <code class="docutils literal notranslate"><span class="pre">ReadOnly[ClassVar[...]]</span></code> as an instance attribute.</p>
<p>To avoid issues with introspection, use <code class="docutils literal notranslate"><span class="pre">ClassVar[ReadOnly[...]]</span></code> instead of <code class="docutils literal notranslate"><span class="pre">ReadOnly[ClassVar[...]]</span></code>.</p>
</section>
<section id="security-implications">
<h2><a class="toc-backref" href="#security-implications" role="doc-backlink">Security Implications</a></h2>
<p>There are no known security consequences arising from this PEP.</p>
</section>
<section id="how-to-teach-this">
<h2><a class="toc-backref" href="#how-to-teach-this" role="doc-backlink">How to Teach This</a></h2>
<p>Suggested changes to the <a class="reference external" href="https://docs.python.org/3/library/typing.html#module-typing" title="(in Python v3.14)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">typing</span></code></a> module documentation,
following the footsteps of <a class="pep reference internal" href="../pep-0705/#how-to-teach-this" title="PEP 705 – TypedDict: Read-only items § How to teach this">PEP 705</a>:</p>
<ul>
<li>Add this PEP to the others listed.</li>
<li>Link <a class="reference external" href="https://docs.python.org/3.13/library/typing.html#typing.ReadOnly" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.ReadOnly</span></code></a> to this PEP.</li>
<li>Update the description of <code class="docutils literal notranslate"><span class="pre">typing.ReadOnly</span></code>:<blockquote>
<div>A special typing construct to mark an attribute of a class or an item of
a <code class="docutils literal notranslate"><span class="pre">TypedDict</span></code> as read-only.</div></blockquote>
</li>
<li>Add a standalone entry for <code class="docutils literal notranslate"><span class="pre">ReadOnly</span></code> under the
<a class="reference external" href="https://typing.python.org/en/latest/spec/qualifiers.html">type qualifiers</a> section:<blockquote>
<div>The <code class="docutils literal notranslate"><span class="pre">ReadOnly</span></code> type qualifier in class attribute annotations indicates
that the attribute of the class may be read, but not reassigned or <code class="docutils literal notranslate"><span class="pre">del</span></code>eted.
For usage in <code class="docutils literal notranslate"><span class="pre">TypedDict</span></code>, see <a class="reference external" href="https://typing.python.org/en/latest/spec/typeddict.html#typing-readonly-type-qualifier">ReadOnly</a>.</div></blockquote>
</li>
</ul>
</section>
<section id="rejected-ideas">
<h2><a class="toc-backref" href="#rejected-ideas" role="doc-backlink">Rejected Ideas</a></h2>
<section id="clarifying-interaction-of-property-and-protocols">
<h3><a class="toc-backref" href="#clarifying-interaction-of-property-and-protocols" role="doc-backlink">Clarifying Interaction of <code class="docutils literal notranslate"><span class="pre">&#64;property</span></code> and Protocols</a></h3>
<p>The <a class="reference internal" href="#protocols"><span class="std std-ref">Protocols</span></a> section mentions an inconsistency between type checkers in
the interpretation of properties in protocols. The problem could be fixed
by amending the typing specification, clarifying what implements the read-only
quality of such properties.</p>
<p>This PEP makes <code class="docutils literal notranslate"><span class="pre">ReadOnly</span></code> a better alternative for defining read-only attributes
in protocols, superseding the use of properties for this purpose.</p>
</section>
<section id="assignment-only-in-init-and-class-body">
<h3><a class="toc-backref" href="#assignment-only-in-init-and-class-body" role="doc-backlink">Assignment Only in <code class="docutils literal notranslate"><span class="pre">__init__</span></code> and Class Body</a></h3>
<p>An earlier version of this PEP proposed that read-only attributes could only be
assigned to in <code class="docutils literal notranslate"><span class="pre">__init__</span></code> and the class’ body. A later discussion revealed that
this restriction would severely limit the usability of <code class="docutils literal notranslate"><span class="pre">ReadOnly</span></code> within
immutable classes, which typically do not define <code class="docutils literal notranslate"><span class="pre">__init__</span></code>.</p>
<p><a class="reference external" href="https://docs.python.org/3/library/fractions.html#fractions.Fraction" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">fractions.Fraction</span></code></a> is one example of an immutable class, where the
initialization of its attributes happens within <code class="docutils literal notranslate"><span class="pre">__new__</span></code> and classmethods.
However, unlike in <code class="docutils literal notranslate"><span class="pre">__init__</span></code>, the assignment in <code class="docutils literal notranslate"><span class="pre">__new__</span></code> and classmethods
is potentially unsound, as the instance they work on can be sourced from
an arbitrary place, including an already finalized instance.</p>
<p>We find it imperative that this type checking feature is useful to the foremost
use site of read-only attributes - immutable classes. Thus, the PEP has changed
since to allow assignment in <code class="docutils literal notranslate"><span class="pre">__new__</span></code> and classmethods under a set of rules
described in the <a class="reference internal" href="#init"><span class="std std-ref">Initialization</span></a> section.</p>
</section>
</section>
<section id="open-issues">
<h2><a class="toc-backref" href="#open-issues" role="doc-backlink">Open Issues</a></h2>
<section id="extending-initialization">
<h3><a class="toc-backref" href="#extending-initialization" role="doc-backlink">Extending Initialization</a></h3>
<p>Mechanisms such as <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html#dataclasses.__post_init__" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">dataclasses.__post_init__()</span></code></a> or attrs’ <a class="reference external" href="https://www.attrs.org/en/stable/init.html#hooking-yourself-into-initialization">initialization hooks</a>
augment object creation by providing a set of special hooks which are called
during initialization.</p>
<p>The current initialization rules defined in this PEP disallow assignment to
read-only attributes in such methods. It is unclear whether the rules could be
satisfyingly shaped in a way that is inclusive of those 3rd party hooks, while
upkeeping the invariants associated with the read-only-ness of those attributes.</p>
<p>The Python type system has a long and detailed <a class="reference external" href="https://typing.python.org/en/latest/spec/constructors.html">specification</a>
regarding the behavior of <code class="docutils literal notranslate"><span class="pre">__new__</span></code> and <code class="docutils literal notranslate"><span class="pre">__init__</span></code>. It is rather unfeasible
to expect the same level of detail from 3rd party hooks.</p>
<p>A potential solution would involve type checkers providing configuration in this
regard, requiring end users to manually specify a set of methods they wish
to allow initialization in. This however could easily result in users mistakenly
or purposefully breaking the aforementioned invariants. It is also a fairly
big ask for a relatively niche feature.</p>
</section>
</section>
<section id="footnotes">
<h2><a class="toc-backref" href="#footnotes" role="doc-backlink">Footnotes</a></h2>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="overriding-property" role="doc-footnote">
<dt class="label" id="overriding-property">[<a href="#id2">1</a>]</dt>
<dd>Pyright in strict mode disallows non-property overrides.
Mypy does not impose this restriction and allows an override with a plain attribute.
<a class="reference external" href="https://pyright-play.net/?strict=true&amp;code=MYGwhgzhAEBiD28BcBYAUNT0D6A7ArgLYBGApgE5LQCWuALuultACakBmO2t1d22ACgikQ7ADTQCJClVp0AlNAC0APmgA5eLlKoMzLMNEA6PETLloAXklmKjPZgACAB3LxnFOgE8mWNpylzIRF2RVUael19LHJSOnxyXGhDdhNAuzR7UEgYACEwcgEEeHkorHTKCIY0IA">[Pyright playground]</a>
<a class="reference external" href="https://mypy-play.net/?mypy=latest&amp;python=3.12&amp;flags=strict&amp;gist=6f860a865c5d13cce07d6cbb08b9fb85">[mypy playground]</a></aside>
<aside class="footnote brackets" id="runtime" role="doc-footnote">
<dt class="label" id="runtime">[2]<em> (<a href='#id3'>1</a>, <a href='#id4'>2</a>) </em></dt>
<dd>This PEP focuses solely on the type-checking behavior. Nevertheless, it should
be desirable the name is read-only at runtime.</aside>
<aside class="footnote brackets" id="property-in-protocol" role="doc-footnote">
<dt class="label" id="property-in-protocol">[<a href="#id6">3</a>]</dt>
<dd>Pyright disallows class variable and non-property descriptor overrides.
<a class="reference external" href="https://pyright-play.net/?pyrightVersion=1.1.389&amp;pythonVersion=3.13&amp;strict=true&amp;code=GYJw9gtgBAhgRgYygSwgBzCALrOBnLEGBLCAUywAswATAKFEimAFcA7EsMAGzxXUw4ExSmRoB9NODRlsATwbhoWOWmRsA5vwzYoAYW4w8eAGowQAGigAFcFjAIeV4Opjc6HhIeNQAEkYAxLgAKWzB7R24ASgAuOigEqAABKTAZeXjEpPgCIhJyKlpMhJoyYGYQvDJuYCioAFoAPhQ2LBioADoujzoAYlhjZA02eGRuZBUeryM%2BILAAQSxCZDgWLDI4xIqwdvUsT29ZrjD0lU2s1NOFLdLy4Erq2obmvfaQChYQNigABgOZqBzAwzMwgc4Je47fSHUEAbT2AF0oABeX7-HxzAAiZDwCBAyDQ9jBxWSwgQogkl1kkxuZW2wSqNTqTRabSg7ywn2%2Bfzo0wxx2k1LkejAADdzMgYK1wckqRlaXcHkznlA4FxuG8Pl9AW4quijmAAJJscXjGgyyHtXL6qAAOTAcxlcHMVsIPTAcAAVu1-Hg5nQPZ6UYCuItlqt1sE6lB%2BmAANYBr3BuYnIVRxKxhOB5NcYHGUFbGNQeOJoOooEw8zphKZ0s5sDY3H4wmYdO17PlgVpIUi8X4qVYNvFrNJztGk1uZA0as1qCyEB11H2uYzwtF%2BeLu1gNhkNdr-objwHgAeaHGCAm2ncNrmYfxEbIhvQ3GCvrmsRJltZN67VyfZ9fQIuA-LYUkFeVEluelGSeFlXnZLVuR-MA81Mcx-xfN9gItLh2lQuFEWDHk%2BQNRs8QJIkMMAv1sJJJIyQpSRwJpSC6UhBlHmZF5pQQzltWIw4QzAVN5F7CUByorCwBAi5mOuVjFTADjlRZNUeE1PjvgCXUyGQ41TSnSSgOknCoWtOgkhcEZ3BIrc5iMmiTJJZ0wSga0gA">[Pyright]</a>
<a class="reference external" href="https://mypy-play.net/?mypy=1.13.0&amp;python=3.12&amp;flags=strict&amp;gist=12d556bb6ef4a9a49ff4ed4776604750">[mypy]</a>
<a class="reference external" href="https://pyre-check.org/play/?input=%23%20pyre-strict%0Afrom%20abc%20import%20abstractmethod%0Afrom%20functools%20import%20cached_property%0Afrom%20typing%20import%20ClassVar%2C%20Protocol%2C%20final%0A%0A%0Aclass%20HasFoo(Protocol)%3A%0A%20%20%20%20%40property%0A%20%20%20%20%40abstractmethod%0A%20%20%20%20def%20foo(self)%20-%3E%20int%3A%20...%0A%0A%0A%23%20assignability%0A%0A%0Aclass%20FooAttribute%3A%0A%20%20%20%20foo%3A%20int%0A%0Aclass%20FooProperty%3A%0A%20%20%20%20%40property%0A%20%20%20%20def%20foo(self)%20-%3E%20int%3A%20return%200%0A%0Aclass%20FooClassVar%3A%0A%20%20%20%20foo%3A%20ClassVar%5Bint%5D%20%3D%200%0A%0Aclass%20FooDescriptor%3A%0A%20%20%20%20%40cached_property%0A%20%20%20%20def%20foo(self)%20-%3E%20int%3A%20return%200%0A%0Aclass%20FooPropertyCovariant%3A%0A%20%20%20%20%40property%0A%20%20%20%20def%20foo(self)%20-%3E%20bool%3A%20return%20False%0A%0Aclass%20FooInvalid%3A%0A%20%20%20%20foo%3A%20str%0A%0Aclass%20NoFoo%3A%0A%20%20%20%20bar%3A%20str%0A%0A%0Aobj%3A%20HasFoo%0Aobj%20%3D%20FooAttribute()%20%20%23%20ok%0Aobj%20%3D%20FooProperty()%20%20%20%23%20ok%0Aobj%20%3D%20FooClassVar%20%20%20%20%20%23%20ok%0Aobj%20%3D%20FooClassVar()%20%20%20%23%20ok%0Aobj%20%3D%20FooDescriptor()%20%23%20ok%0Aobj%20%3D%20FooPropertyCovariant()%20%23%20ok%0Aobj%20%3D%20FooInvalid()%20%20%20%20%23%20err%0Aobj%20%3D%20NoFoo()%20%20%20%20%20%20%20%20%20%23%20err%0Aobj%20%3D%20None%20%20%20%20%20%20%20%20%20%20%20%20%23%20err%0A%0A%0A%23%20explicit%20impl%0A%0A%0Aclass%20FooAttributeImpl(HasFoo)%3A%0A%20%20%20%20foo%3A%20int%0A%0Aclass%20FooPropertyImpl(HasFoo)%3A%0A%20%20%20%20%40property%0A%20%20%20%20def%20foo(self)%20-%3E%20int%3A%20return%200%0A%0Aclass%20FooClassVarImpl(HasFoo)%3A%0A%20%20%20%20foo%3A%20ClassVar%5Bint%5D%20%3D%200%0A%0Aclass%20FooDescriptorImpl(HasFoo)%3A%0A%20%20%20%20%40cached_property%0A%20%20%20%20def%20foo(self)%20-%3E%20int%3A%20return%200%0A%0Aclass%20FooPropertyCovariantImpl(HasFoo)%3A%0A%20%20%20%20%40property%0A%20%20%20%20def%20foo(self)%20-%3E%20bool%3A%20return%20False%0A%0Aclass%20FooInvalidImpl(HasFoo)%3A%0A%20%20%20%20foo%3A%20str%0A%0A%40final%0Aclass%20NoFooImpl(HasFoo)%3A%0A%20%20%20%20bar%3A%20str%0A">[Pyre]</a></aside>
<aside class="footnote brackets" id="final-mutability" role="doc-footnote">
<dt class="label" id="final-mutability">[<a href="#id7">4</a>]</dt>
<dd>As noted above the second-to-last code example of <a class="reference external" href="https://typing.python.org/en/latest/spec/qualifiers.html#semantics-and-examples">https://typing.python.org/en/latest/spec/qualifiers.html#semantics-and-examples</a></aside>
</aside>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright" role="doc-backlink">Copyright</a></h2>
<p>This document is placed in the public domain or under the
CC0-1.0-Universal license, whichever is more permissive.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/peps/pep-0767.rst">https://github.com/python/peps/blob/main/peps/pep-0767.rst</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/peps/pep-0767.rst">2025-05-06 20:54:28 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <div id="search"></div>
            <h2>Contents</h2>
            <ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a><ul>
<li><a class="reference internal" href="#classes">Classes</a></li>
<li><a class="reference internal" href="#protocols">Protocols</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#initialization">Initialization</a><ul>
<li><a class="reference internal" href="#instance-attributes">Instance Attributes</a></li>
<li><a class="reference internal" href="#class-attributes">Class Attributes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#subtyping">Subtyping</a></li>
<li><a class="reference internal" href="#interaction-with-other-type-qualifiers">Interaction with Other Type Qualifiers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#security-implications">Security Implications</a></li>
<li><a class="reference internal" href="#how-to-teach-this">How to Teach This</a></li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#clarifying-interaction-of-property-and-protocols">Clarifying Interaction of <code class="docutils literal notranslate"><span class="pre">&#64;property</span></code> and Protocols</a></li>
<li><a class="reference internal" href="#assignment-only-in-init-and-class-body">Assignment Only in <code class="docutils literal notranslate"><span class="pre">__init__</span></code> and Class Body</a></li>
</ul>
</li>
<li><a class="reference internal" href="#open-issues">Open Issues</a><ul>
<li><a class="reference internal" href="#extending-initialization">Extending Initialization</a></li>
</ul>
</li>
<li><a class="reference internal" href="#footnotes">Footnotes</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br>
            <a id="source" href="https://github.com/python/peps/blob/main/peps/pep-0767.rst?plain=1">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
    <script src="../_static/sticky_banner.js"></script>
    <script src="https://analytics.python.org/js/script.outbound-links.js"
            data-domain="peps.python.org" defer></script>
    <script src="/pagefind/pagefind-ui.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            // Ranking configuration to boost exact title matches
            const searchOptions = {
                ranking: {
                    termSimilarity: 9.0, // Higher values favor exact matches
                    termFrequency: 0.5, // Lower values reduce penalty for low term frequency
                    pageLength: 0.2, // Lower values reduce the impact of page length
                }
            };

            // Initialize pagefind for either mobile or desktop, not both
            if (window.innerWidth <= 640) {
                new PagefindUI({ element: "#mobile-search", ...searchOptions, showSubResults: false });
            } else {
                new PagefindUI({ element: "#search", ...searchOptions, showSubResults: true });
            }
        });
    </script>
</body>
</html>