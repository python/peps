
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>PEP 754 – IEEE 754 Floating Point Special Values | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png">
    <link rel="canonical" href="https://peps.python.org/pep-0754/">
    <link rel="stylesheet" href="../_static/style.css" type="text/css">
    <link rel="stylesheet" href="../_static/mq.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg-light">
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark">
    <link rel="alternate" type="application/rss+xml" title="Latest PEPs" href="https://peps.python.org/peps.rss">
    <meta property="og:title" content='PEP 754 – IEEE 754 Floating Point Special Values | peps.python.org'>
    <meta property="og:description" content="This PEP proposes an API and a provides a reference module that generates and tests for IEEE 754 double-precision special values: positive infinity, negative infinity, and not-a-number (NaN).">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://peps.python.org/pep-0754/">
    <meta property="og:site_name" content="Python Enhancement Proposals (PEPs)">
    <meta property="og:image" content="https://peps.python.org/_static/og-image.png">
    <meta property="og:image:alt" content="Python PEPs">
    <meta property="og:image:width" content="200">
    <meta property="og:image:height" content="200">
    <meta name="description" content="This PEP proposes an API and a provides a reference module that generates and tests for IEEE 754 double-precision special values: positive infinity, negative infinity, and not-a-number (NaN).">
    <meta name="theme-color" content="#3776ab">
</head>
<body>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-sun-half" viewBox="0 0 24 24" pointer-events="all">
    <title>Following system colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9"></circle>
      <path d="M12 3v18m0-12l4.65-4.65M12 14.3l7.37-7.37M12 19.6l8.85-8.85"></path>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected dark colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected light colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
</svg>
    <script>

        document.documentElement.dataset.colour_scheme = localStorage.getItem("colour_scheme") || "auto"
    </script>
    <section id="pep-page-section">
        <header>
            <h1>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 754</li>
            </ul>
            <button id="colour-scheme-cycler" onClick="setColourScheme(nextColourScheme())">
                <svg aria-hidden="true" class="colour-scheme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-dark"><use href="#svg-moon"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-light"><use href="#svg-sun"></use></svg>
                <span class="visually-hidden">Toggle light / dark / auto colour theme</span>
            </button>
        </header>
        <article>
            <section id="pep-content">
<h1 class="page-title">PEP 754 – IEEE 754 Floating Point Special Values</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd">Gregory R. Warnes &lt;gregory_r_warnes&#32;&#97;t&#32;groton.pfizer.com&gt;</dd>
<dt class="field-even">Status<span class="colon">:</span></dt>
<dd class="field-even"><abbr title="Formally declined and will not be accepted">Rejected</abbr></dd>
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><abbr title="Normative PEP with a new feature for Python, implementation change for CPython or interoperability standard for the ecosystem">Standards Track</abbr></dd>
<dt class="field-even">Created<span class="colon">:</span></dt>
<dd class="field-even">28-Mar-2003</dd>
<dt class="field-odd">Python-Version<span class="colon">:</span></dt>
<dd class="field-odd">2.3</dd>
<dt class="field-even">Post-History<span class="colon">:</span></dt>
<dd class="field-even"><p></p></dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Table of Contents</summary><ul class="simple">
<li><a class="reference internal" href="#rejection-notice">Rejection Notice</a></li>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#api-definition">API Definition</a><ul>
<li><a class="reference internal" href="#constants">Constants</a></li>
<li><a class="reference internal" href="#functions">Functions</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<section id="rejection-notice">
<h2><a class="toc-backref" href="#rejection-notice" role="doc-backlink">Rejection Notice</a></h2>
<p>This PEP has been rejected. After sitting open for four years, it has
failed to generate sufficient community interest.</p>
<p>Several ideas of this PEP were implemented for Python 2.6. <code class="docutils literal notranslate"><span class="pre">float('inf')</span></code>
and <code class="docutils literal notranslate"><span class="pre">repr(float('inf'))</span></code> are now guaranteed to work on every supported
platform with IEEE 754 semantics. However the <code class="docutils literal notranslate"><span class="pre">eval(repr(float('inf')))</span></code>
roundtrip is still not supported unless you define inf and nan yourself:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">inf</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inf</span><span class="p">,</span> <span class="mf">1E400</span>
<span class="go">(inf, inf)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">neginf</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;-inf&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">neginf</span><span class="p">,</span> <span class="o">-</span><span class="mf">1E400</span>
<span class="go">(-inf, -inf)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nan</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;nan&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nan</span><span class="p">,</span> <span class="n">inf</span> <span class="o">*</span> <span class="mf">0.</span>
<span class="go">(nan, nan)</span>
</pre></div>
</div>
<p>The math and the sys module also have gained additional features,
<code class="docutils literal notranslate"><span class="pre">sys.float_info</span></code>, <code class="docutils literal notranslate"><span class="pre">math.isinf</span></code>, <code class="docutils literal notranslate"><span class="pre">math.isnan</span></code>, <code class="docutils literal notranslate"><span class="pre">math.copysign</span></code>.</p>
</section>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract" role="doc-backlink">Abstract</a></h2>
<p>This PEP proposes an API and a provides a reference module that
generates and tests for IEEE 754 double-precision special values:
positive infinity, negative infinity, and not-a-number (NaN).</p>
</section>
<section id="rationale">
<h2><a class="toc-backref" href="#rationale" role="doc-backlink">Rationale</a></h2>
<p>The IEEE 754 standard defines a set of binary representations and
algorithmic rules for floating point arithmetic.  Included in the
standard is a set of constants for representing special values,
including positive infinity, negative infinity, and indeterminate or
non-numeric results (NaN).  Most modern CPUs implement the
IEEE 754 standard, including the (Ultra)SPARC, PowerPC, and x86
processor series.</p>
<p>Currently, the handling of IEEE 754 special values in Python depends
on the underlying C library.  Unfortunately, there is little
consistency between C libraries in how or whether these values are
handled.  For instance, on some systems “float(‘Inf’)” will properly
return the IEEE 754 constant for positive infinity.  On many systems,
however, this expression will instead generate an error message.</p>
<p>The output string representation for an IEEE 754 special value also
varies by platform.  For example, the expression “float(1e3000)”,
which is large enough to generate an overflow, should return a string
representation corresponding to IEEE 754 positive infinity.  Python
2.1.3 on x86 Debian Linux returns “inf”.  On Sparc Solaris 8 with
Python 2.2.1, this same expression returns “Infinity”, and on
MS-Windows 2000 with Active Python 2.2.1, it returns “1.#INF”.</p>
<p>Adding to the confusion, some platforms generate one string on
conversion from floating point and accept a different string for
conversion to floating point.  On these systems</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">float</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
<p>will generate an error when “x” is an IEEE special value.</p>
<p>In the past, some have recommended that programmers use expressions
like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PosInf</span> <span class="o">=</span> <span class="mf">1e300</span><span class="o">**</span><span class="mi">2</span>
<span class="n">NaN</span> <span class="o">=</span> <span class="n">PosInf</span><span class="o">/</span><span class="n">PosInf</span>
</pre></div>
</div>
<p>to obtain positive infinity and not-a-number constants.  However, the
first expression generates an error on current Python interpreters.  A
possible alternative is to use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PosInf</span> <span class="o">=</span> <span class="mf">1e300000</span>
<span class="n">NaN</span> <span class="o">=</span> <span class="n">PosInf</span><span class="o">/</span><span class="n">PosInf</span>
</pre></div>
</div>
<p>While this does not generate an error with current Python
interpreters, it is still an ugly and potentially non-portable hack.
In addition, defining NaN in this way does solve the problem of
detecting such values.  First, the IEEE 754 standard provides for an
entire set of constant values for Not-a-Number.  Second, the standard
requires that</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">NaN</span> <span class="o">!=</span> <span class="n">X</span>
</pre></div>
</div>
<p>for all possible values of X, including NaN.  As a consequence</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">NaN</span> <span class="o">==</span> <span class="n">NaN</span>
</pre></div>
</div>
<p>should always evaluate to false.  However, this behavior also is not
consistently implemented.  [e.g. Cygwin Python 2.2.2]</p>
<p>Due to the many platform and library inconsistencies in handling IEEE
special values, it is impossible to consistently set or detect IEEE
754 floating point values in normal Python code without resorting to
directly manipulating bit-patterns.</p>
<p>This PEP proposes a standard Python API and provides a reference
module implementation which allows for consistent handling of IEEE 754
special values on all supported platforms.</p>
</section>
<section id="api-definition">
<h2><a class="toc-backref" href="#api-definition" role="doc-backlink">API Definition</a></h2>
<section id="constants">
<h3><a class="toc-backref" href="#constants" role="doc-backlink">Constants</a></h3>
<dl class="simple">
<dt>NaN</dt><dd>Non-signalling IEEE 754 “Not a Number” value</dd>
<dt>PosInf</dt><dd>IEEE 754 Positive Infinity value</dd>
<dt>NegInf</dt><dd>IEEE 754 Negative Infinity value</dd>
</dl>
</section>
<section id="functions">
<h3><a class="toc-backref" href="#functions" role="doc-backlink">Functions</a></h3>
<dl class="simple">
<dt>isNaN(value)</dt><dd>Determine if the argument is an IEEE 754 NaN (Not a Number) value.</dd>
<dt>isPosInf(value)</dt><dd>Determine if the argument is an IEEE 754 positive infinity value.</dd>
<dt>isNegInf(value)</dt><dd>Determine if the argument is an IEEE 754 negative infinity value.</dd>
<dt>isFinite(value)</dt><dd>Determine if the argument is a finite IEEE 754 value (i.e., is
not NaN, positive, or negative infinity).</dd>
<dt>isInf(value)</dt><dd>Determine if the argument is an infinite IEEE 754 value (positive
or negative infinity)</dd>
</dl>
</section>
<section id="example">
<h3><a class="toc-backref" href="#example" role="doc-backlink">Example</a></h3>
<p>(Run under Python 2.2.1 on Solaris 8.)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">fpconst</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">val</span> <span class="o">=</span> <span class="mf">1e30000</span> <span class="c1"># should be cause overflow and result in &quot;Inf&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">val</span>
<span class="go">Infinity</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fpconst</span><span class="o">.</span><span class="n">isInf</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fpconst</span><span class="o">.</span><span class="n">PosInf</span>
<span class="go">Infinity</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nval</span> <span class="o">=</span> <span class="n">val</span><span class="o">/</span><span class="n">val</span> <span class="c1"># should result in NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nval</span>
<span class="go">NaN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fpconst</span><span class="o">.</span><span class="n">isNaN</span><span class="p">(</span><span class="n">nval</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fpconst</span><span class="o">.</span><span class="n">isNaN</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
</section>
<section id="implementation">
<h3><a class="toc-backref" href="#implementation" role="doc-backlink">Implementation</a></h3>
<p>The reference implementation is provided in the module “fpconst” <a class="footnote-reference brackets" href="#id3" id="id1">[1]</a>,
which is written in pure Python by taking advantage of the “struct”
standard module to directly set or test for the bit patterns that
define IEEE 754 special values.  Care has been taken to generate
proper results on both big-endian and little-endian machines.  The
current implementation is pure Python, but some efficiency could be
gained by translating the core routines into C.</p>
<p>Patch 1151323 “New fpconst module” <a class="footnote-reference brackets" href="#id4" id="id2">[2]</a> on SourceForge adds the
fpconst module to the Python standard library.</p>
</section>
</section>
<section id="references">
<h2><a class="toc-backref" href="#references" role="doc-backlink">References</a></h2>
<p>See <a class="reference external" href="http://babbage.cs.qc.edu/courses/cs341/IEEE-754references.html">http://babbage.cs.qc.edu/courses/cs341/IEEE-754references.html</a> for
reference material on the IEEE 754 floating point standard.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id3" role="doc-footnote">
<dt class="label" id="id3">[<a href="#id1">1</a>]</dt>
<dd>Further information on the reference package is available at
<a class="reference external" href="http://research.warnes.net/projects/rzope/fpconst/">http://research.warnes.net/projects/rzope/fpconst/</a></aside>
<aside class="footnote brackets" id="id4" role="doc-footnote">
<dt class="label" id="id4">[<a href="#id2">2</a>]</dt>
<dd><a class="reference external" href="http://sourceforge.net/tracker/?func=detail&amp;aid=1151323&amp;group_id=5470&amp;atid=305470">http://sourceforge.net/tracker/?func=detail&amp;aid=1151323&amp;group_id=5470&amp;atid=305470</a></aside>
</aside>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright" role="doc-backlink">Copyright</a></h2>
<p>This document has been placed in the public domain.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/peps/pep-0754.rst">https://github.com/python/peps/blob/main/peps/pep-0754.rst</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/peps/pep-0754.rst">2025-02-01 08:59:27 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <h2>Contents</h2>
            <ul>
<li><a class="reference internal" href="#rejection-notice">Rejection Notice</a></li>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#api-definition">API Definition</a><ul>
<li><a class="reference internal" href="#constants">Constants</a></li>
<li><a class="reference internal" href="#functions">Functions</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br>
            <a id="source" href="https://github.com/python/peps/blob/main/peps/pep-0754.rst?plain=1">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
    <script src="../_static/sticky_banner.js"></script>
    <script src="https://analytics.python.org/js/script.outbound-links.js"
            data-domain="peps.python.org" defer></script>
</body>
</html>