
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>PEP 700 – Additional Fields for the Simple API for Package Indexes | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png">
    <link rel="canonical" href="https://peps.python.org/pep-0700/">
    <link rel="stylesheet" href="../_static/style.css" type="text/css">
    <link rel="stylesheet" href="../_static/mq.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg-light">
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark">
    <link rel="alternate" type="application/rss+xml" title="Latest PEPs" href="https://peps.python.org/peps.rss">
    <meta property="og:title" content='PEP 700 – Additional Fields for the Simple API for Package Indexes | peps.python.org'>
    <meta property="og:description" content="PEP 691 defined a JSON form for the “Simple Repository API”. This allowed clients to more easily query the data that was previously only available in HTML, as defined in PEP 503.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://peps.python.org/pep-0700/">
    <meta property="og:site_name" content="Python Enhancement Proposals (PEPs)">
    <meta property="og:image" content="https://peps.python.org/_static/og-image.png">
    <meta property="og:image:alt" content="Python PEPs">
    <meta property="og:image:width" content="200">
    <meta property="og:image:height" content="200">
    <meta name="description" content="PEP 691 defined a JSON form for the “Simple Repository API”. This allowed clients to more easily query the data that was previously only available in HTML, as defined in PEP 503.">
    <meta name="theme-color" content="#3776ab">
</head>
<body>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-sun-half" viewBox="0 0 24 24" pointer-events="all">
    <title>Following system colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9"></circle>
      <path d="M12 3v18m0-12l4.65-4.65M12 14.3l7.37-7.37M12 19.6l8.85-8.85"></path>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected dark colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected light colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
</svg>
    <script>

        document.documentElement.dataset.colour_scheme = localStorage.getItem("colour_scheme") || "auto"
    </script>
    <section id="pep-page-section">
        <header>
            <h1>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 700</li>
            </ul>
            <button id="colour-scheme-cycler" onClick="setColourScheme(nextColourScheme())">
                <svg aria-hidden="true" class="colour-scheme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-dark"><use href="#svg-moon"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-light"><use href="#svg-sun"></use></svg>
                <span class="visually-hidden">Toggle light / dark / auto colour theme</span>
            </button>
        </header>
        <article>
            <section id="pep-content">
<h1 class="page-title">PEP 700 – Additional Fields for the Simple API for Package Indexes</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd">Paul Moore &lt;p.f.moore&#32;&#97;t&#32;gmail.com&gt;</dd>
<dt class="field-even">PEP-Delegate<span class="colon">:</span></dt>
<dd class="field-even">Donald Stufft &lt;donald&#32;&#97;t&#32;stufft.io&gt;</dd>
<dt class="field-odd">Discussions-To<span class="colon">:</span></dt>
<dd class="field-odd"><a class="reference external" href="https://discuss.python.org/t/pep-700-additional-fields-for-the-simple-api-for-package-indexes/20177">Discourse thread</a></dd>
<dt class="field-even">Status<span class="colon">:</span></dt>
<dd class="field-even"><abbr title="Accepted and implementation complete, or no longer active">Final</abbr></dd>
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><abbr title="Normative PEP with a new feature for Python, implementation change for CPython or interoperability standard for the ecosystem">Standards Track</abbr></dd>
<dt class="field-even">Topic<span class="colon">:</span></dt>
<dd class="field-even"><a class="reference external" href="../topic/packaging/">Packaging</a></dd>
<dt class="field-odd">Created<span class="colon">:</span></dt>
<dd class="field-odd">21-Oct-2022</dd>
<dt class="field-even">Post-History<span class="colon">:</span></dt>
<dd class="field-even"><a class="reference external" href="https://discuss.python.org/t/pep-700-additional-fields-for-the-simple-api-for-package-indexes/20177" title="Discourse thread">21-Oct-2022</a></dd>
<dt class="field-odd">Resolution<span class="colon">:</span></dt>
<dd class="field-odd"><a class="reference external" href="https://discuss.python.org/t/pep-700-additional-fields-for-the-simple-api-for-package-indexes/20177/42">19-Dec-2022</a></dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Table of Contents</summary><ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#versions">Versions</a></li>
<li><a class="reference internal" href="#additional-file-information">Additional file information</a></li>
</ul>
</li>
<li><a class="reference internal" href="#faq">FAQ</a><ul>
<li><a class="reference internal" href="#why-not-add-this-data-to-the-html-api-as-well">Why not add this data to the HTML API as well?</a></li>
<li><a class="reference internal" href="#does-this-imply-that-the-html-api-is-obsolete">Does this imply that the HTML API is obsolete?</a></li>
<li><a class="reference internal" href="#is-the-simple-api-replacing-the-warehouse-json-and-xml-rpc-apis">Is the simple API replacing the Warehouse JSON and XML-RPC APIs?</a></li>
<li><a class="reference internal" href="#why-not-allow-other-date-formats">Why not allow other date formats?</a></li>
<li><a class="reference internal" href="#what-if-file-sizes-are-too-big-for-a-json-number">What if file sizes are too big for a JSON number?</a></li>
<li><a class="reference internal" href="#why-not-require-pep-440-versions">Why not require PEP 440 versions?</a></li>
<li><a class="reference internal" href="#why-not-provide-a-latest-version-value">Why not provide a “latest version” value?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<div class="pep-banner canonical-pypa-spec sticky-banner admonition important">
<p class="admonition-title">Important</p>
<p>This PEP is a historical document. The up-to-date, canonical spec, <a class="reference external" href="https://packaging.python.org/en/latest/specifications/simple-repository-api/#simple-repository-api" title="(in Python Packaging User Guide)"><span>Simple repository API</span></a>, is maintained on the <a class="reference external" href="https://packaging.python.org/en/latest/specifications/">PyPA specs page</a>.</p>
<p class="close-button">×</p>
<p>See the <a class="reference external" href="https://www.pypa.io/en/latest/specifications/#handling-fixes-and-other-minor-updates">PyPA specification update process</a> for how to propose changes.</p>
</div>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract" role="doc-backlink">Abstract</a></h2>
<p><a class="pep reference internal" href="../pep-0691/" title="PEP 691 – JSON-based Simple API for Python Package Indexes">PEP 691</a> defined a JSON form for the “Simple Repository API”. This allowed
clients to more easily query the data that was previously only available in
HTML, as defined in <a class="pep reference internal" href="../pep-0503/" title="PEP 503 – Simple Repository API">PEP 503</a>.</p>
<p>This proposal adds three fields to the JSON form, which allow it to be used in
place of PyPI’s <a class="reference external" href="https://warehouse.pypa.io/api-reference/json.html">JSON API</a>
in a number of situations.</p>
<ul class="simple">
<li>A field to allow retrieval of a list of all the published versions of a project.</li>
<li>Fields containing the size and upload time for a project file.</li>
</ul>
<p>The new fields are all part of the data returned from the “project details” URL.</p>
</section>
<section id="rationale">
<h2><a class="toc-backref" href="#rationale" role="doc-backlink">Rationale</a></h2>
<p>With the introduction of the JSON form of the simple API in <a class="pep reference internal" href="../pep-0691/" title="PEP 691 – JSON-based Simple API for Python Package Indexes">PEP 691</a>, the
simple API offers functionality that is almost as complete as the PyPI JSON API.
This PEP adds a number of fields which were previously only available through
the JSON API, in order to allow more clients which were previously Warehouse
specific to support arbitrary standards-compliant indexes.</p>
</section>
<section id="specification">
<h2><a class="toc-backref" href="#specification" role="doc-backlink">Specification</a></h2>
<p>This specification defines version 1.1 of the simple repository API. For the
HTML version of the API, there is no change from version 1.0. For the JSON
version of the API, the following changes are made:</p>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">api-version</span></code> must specify version 1.1 or later.</li>
<li>A new <code class="docutils literal notranslate"><span class="pre">versions</span></code> key is added at the top level.</li>
<li>Two new “file information” keys, <code class="docutils literal notranslate"><span class="pre">size</span></code> and <code class="docutils literal notranslate"><span class="pre">upload-time</span></code>, are added to
the <code class="docutils literal notranslate"><span class="pre">files</span></code> data.</li>
<li>Keys (at any level) with a leading underscore are reserved as private for
index server use. No future standard will assign a meaning to any such key.</li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">versions</span></code> and <code class="docutils literal notranslate"><span class="pre">size</span></code> keys are mandatory. The <code class="docutils literal notranslate"><span class="pre">upload-time</span></code> key is
optional.</p>
<section id="versions">
<h3><a class="toc-backref" href="#versions" role="doc-backlink">Versions</a></h3>
<p>An additional key, <code class="docutils literal notranslate"><span class="pre">versions</span></code> MUST be present at the top level, in addition to
the keys <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">files</span></code> and <code class="docutils literal notranslate"><span class="pre">meta</span></code> defined in <a class="pep reference internal" href="../pep-0691/" title="PEP 691 – JSON-based Simple API for Python Package Indexes">PEP 691</a>. This key MUST
contain a list of version strings specifying all of the project versions uploaded
for this project. The value is logically a set, and as such may not contain
duplicates, and the order of the values is not significant.</p>
<p>All of the files listed in the <code class="docutils literal notranslate"><span class="pre">files</span></code> key MUST be associated with one of the
versions in the <code class="docutils literal notranslate"><span class="pre">versions</span></code> key. The <code class="docutils literal notranslate"><span class="pre">versions</span></code> key MAY contain versions with
no associated files (to represent versions with no files uploaded, if the server
has such a concept).</p>
<p>Note that because servers may hold “legacy” data from before the adoption of
<a class="pep reference internal" href="../pep-0440/" title="PEP 440 – Version Identification and Dependency Specification">PEP 440</a>, version strings currently cannot be required to be valid <a class="pep reference internal" href="../pep-0440/" title="PEP 440 – Version Identification and Dependency Specification">PEP 440</a>
versions, and therefore cannot be assumed to be orderable using the <a class="pep reference internal" href="../pep-0440/" title="PEP 440 – Version Identification and Dependency Specification">PEP 440</a>
rules. However, servers SHOULD use normalised <a class="pep reference internal" href="../pep-0440/" title="PEP 440 – Version Identification and Dependency Specification">PEP 440</a> versions where
possible.</p>
</section>
<section id="additional-file-information">
<h3><a class="toc-backref" href="#additional-file-information" role="doc-backlink">Additional file information</a></h3>
<p>Two new keys are added to the <code class="docutils literal notranslate"><span class="pre">files</span></code> key.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">size</span></code>: This field is mandatory. It MUST contain an integer which is the
file size in bytes.</li>
<li><code class="docutils literal notranslate"><span class="pre">upload-time</span></code>: This field is optional. If present, it MUST contain a valid
ISO 8601 date/time string, in the format <code class="docutils literal notranslate"><span class="pre">yyyy-mm-ddThh:mm:ss.ffffffZ</span></code>,
which represents the time the file was uploaded to the index. As indicated by
the <code class="docutils literal notranslate"><span class="pre">Z</span></code> suffix, the upload time MUST use the UTC timezone. The fractional
seconds part of the timestamp (the <code class="docutils literal notranslate"><span class="pre">.ffffff</span></code> part) is optional, and if
present may contain up to 6 digits of precision. If a server does not record
upload time information for a file, it MAY omit the <code class="docutils literal notranslate"><span class="pre">upload-time</span></code> key.</li>
</ul>
</section>
</section>
<section id="faq">
<h2><a class="toc-backref" href="#faq" role="doc-backlink">FAQ</a></h2>
<section id="why-not-add-this-data-to-the-html-api-as-well">
<h3><a class="toc-backref" href="#why-not-add-this-data-to-the-html-api-as-well" role="doc-backlink">Why not add this data to the HTML API as well?</a></h3>
<p>It would be possible to add the data to the HTML API, but the vast majority of
consumers for this data are likely to be currently getting it from the PyPI JSON
API, and so will already be expecting to parse JSON. Traditional consumers of
the HTML API have never needed this data previously.</p>
</section>
<section id="does-this-imply-that-the-html-api-is-obsolete">
<h3><a class="toc-backref" href="#does-this-imply-that-the-html-api-is-obsolete" role="doc-backlink">Does this imply that the HTML API is obsolete?</a></h3>
<p>No. The FAQ of <a class="pep reference internal" href="../pep-0691/" title="PEP 691 – JSON-based Simple API for Python Package Indexes">PEP 691</a> was clear that the HTML API is not being deprecated,
and this PEP does not change that position. However, clients wishing to access
the new data introduced by this PEP will need to use the JSON API to get it. And
indexes wanting to provide it will need to serve the JSON format.</p>
</section>
<section id="is-the-simple-api-replacing-the-warehouse-json-and-xml-rpc-apis">
<h3><a class="toc-backref" href="#is-the-simple-api-replacing-the-warehouse-json-and-xml-rpc-apis" role="doc-backlink">Is the simple API replacing the Warehouse JSON and XML-RPC APIs?</a></h3>
<p>Where possible, clients should prefer the simple API over the JSON or XML-RPC
APIs, as the former is standardised and can be assumed to be available from any
index, whereas the latter are exclusive to the Warehouse project.</p>
<p>However, while this PEP brings the simple API closer to being able to replace
the JSON API, there is no formal policy that the simple API will replicate all
of the functionality covered by the existing Warehouse APIs. Proposed additions
to the simple API will still be considered on their individual merits, and the
requirement that the API should be simple and fast for the primary use case of
locating files for a project will remain the overriding consideration.</p>
</section>
<section id="why-not-allow-other-date-formats">
<h3><a class="toc-backref" href="#why-not-allow-other-date-formats" role="doc-backlink">Why not allow other date formats?</a></h3>
<p>The ISO 8601 standard is complex, and there seems little value in requiring
clients to deal with that. The standard library <code class="docutils literal notranslate"><span class="pre">datetime</span></code> module provides
methods to parse ISO 8601 strings, but it is possible that users may want to
access index data <em>without</em> using Python (for example, piping the output of
<code class="docutils literal notranslate"><span class="pre">curl</span></code> into <code class="docutils literal notranslate"><span class="pre">jq</span></code>). Having a single, well-defined format makes this easier,
and doesn’t have any significant disadvantages.</p>
</section>
<section id="what-if-file-sizes-are-too-big-for-a-json-number">
<h3><a class="toc-backref" href="#what-if-file-sizes-are-too-big-for-a-json-number" role="doc-backlink">What if file sizes are too big for a JSON number?</a></h3>
<p>The JSON standard does not specify how numbers are to be interpreted. Python can
read and write arbitrary-length integers in a JSON file, so this should not be
an issue for code written in Python. Non-Python implementations may need to take
care to handle large integers correctly, but this is not expected to be a
significant problem.</p>
</section>
<section id="why-not-require-pep-440-versions">
<h3><a class="toc-backref" href="#why-not-require-pep-440-versions" role="doc-backlink">Why not require PEP 440 versions?</a></h3>
<p>At the time this PEP was written, PyPI still contains (and serves) projects and
files with “legacy” versions. Requiring <a class="pep reference internal" href="../pep-0440/" title="PEP 440 – Version Identification and Dependency Specification">PEP 440</a> versions would make it
impossible for PyPI to follow this specification while still serving the
existing content.</p>
<p>Ideally, at some future time, the simple index API will be updated to require
<a class="pep reference internal" href="../pep-0440/" title="PEP 440 – Version Identification and Dependency Specification">PEP 440</a> versions, at which time this specification should be updated to
reflect that. However, that change will need to be co-ordinated with existing
index providers including PyPI, to desupport and remove non-conforming projects
and/or files.</p>
</section>
<section id="why-not-provide-a-latest-version-value">
<h3><a class="toc-backref" href="#why-not-provide-a-latest-version-value" role="doc-backlink">Why not provide a “latest version” value?</a></h3>
<p>For <a class="pep reference internal" href="../pep-0440/" title="PEP 440 – Version Identification and Dependency Specification">PEP 440</a> versions, this is easy enough for the client to do (using the
<code class="docutils literal notranslate"><span class="pre">packaging</span></code> library, <code class="docutils literal notranslate"><span class="pre">latest</span> <span class="pre">=</span> <span class="pre">max(Version(s)</span> <span class="pre">for</span> <span class="pre">s</span> <span class="pre">in</span> <span class="pre">proj[&quot;versions&quot;])</span></code>).
For non-standard versions, there is no well-defined ordering, and clients will
need to decide on what rule is appropriate for their needs. Requiring the server
to supply a latest version value takes the choice away from the client.</p>
<p>Servers with an explicit concept of which version is the “latest”, which cannot
be calculated from data available to the client, can provide a non-standard,
underscore-prefixed key to convey that information to the client if they wish.</p>
</section>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright" role="doc-backlink">Copyright</a></h2>
<p>This document is placed in the public domain or under the
CC0-1.0-Universal license, whichever is more permissive.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/peps/pep-0700.rst">https://github.com/python/peps/blob/main/peps/pep-0700.rst</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/peps/pep-0700.rst">2024-10-17 12:49:39 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <h2>Contents</h2>
            <ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#versions">Versions</a></li>
<li><a class="reference internal" href="#additional-file-information">Additional file information</a></li>
</ul>
</li>
<li><a class="reference internal" href="#faq">FAQ</a><ul>
<li><a class="reference internal" href="#why-not-add-this-data-to-the-html-api-as-well">Why not add this data to the HTML API as well?</a></li>
<li><a class="reference internal" href="#does-this-imply-that-the-html-api-is-obsolete">Does this imply that the HTML API is obsolete?</a></li>
<li><a class="reference internal" href="#is-the-simple-api-replacing-the-warehouse-json-and-xml-rpc-apis">Is the simple API replacing the Warehouse JSON and XML-RPC APIs?</a></li>
<li><a class="reference internal" href="#why-not-allow-other-date-formats">Why not allow other date formats?</a></li>
<li><a class="reference internal" href="#what-if-file-sizes-are-too-big-for-a-json-number">What if file sizes are too big for a JSON number?</a></li>
<li><a class="reference internal" href="#why-not-require-pep-440-versions">Why not require PEP 440 versions?</a></li>
<li><a class="reference internal" href="#why-not-provide-a-latest-version-value">Why not provide a “latest version” value?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br>
            <a id="source" href="https://github.com/python/peps/blob/main/peps/pep-0700.rst?plain=1">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
    <script src="../_static/sticky_banner.js"></script>
    <script src="https://analytics.python.org/js/script.outbound-links.js"
            data-domain="peps.python.org" defer></script>
</body>
</html>