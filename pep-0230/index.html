
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>PEP 230 – Warning Framework | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png">
    <link rel="canonical" href="https://peps.python.org/pep-0230/">
    <link rel="stylesheet" href="../_static/style.css" type="text/css">
    <link rel="stylesheet" href="../_static/mq.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg-light">
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark">
    <link rel="alternate" type="application/rss+xml" title="Latest PEPs" href="https://peps.python.org/peps.rss">
    <meta property="og:title" content='PEP 230 – Warning Framework | peps.python.org'>
    <meta property="og:description" content="This PEP proposes a C and Python level API, as well as command line flags, to issue warning messages and control what happens to them.  This is mostly based on GvR’s proposal posted to python-dev on 05-Nov-2000, with some ideas (such as using classes to...">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://peps.python.org/pep-0230/">
    <meta property="og:site_name" content="Python Enhancement Proposals (PEPs)">
    <meta property="og:image" content="https://peps.python.org/_static/og-image.png">
    <meta property="og:image:alt" content="Python PEPs">
    <meta property="og:image:width" content="200">
    <meta property="og:image:height" content="200">
    <meta name="description" content="This PEP proposes a C and Python level API, as well as command line flags, to issue warning messages and control what happens to them.  This is mostly based on GvR’s proposal posted to python-dev on 05-Nov-2000, with some ideas (such as using classes to...">
    <meta name="theme-color" content="#3776ab">
</head>
<body>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-sun-half" viewBox="0 0 24 24" pointer-events="all">
    <title>Following system colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9"></circle>
      <path d="M12 3v18m0-12l4.65-4.65M12 14.3l7.37-7.37M12 19.6l8.85-8.85"></path>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected dark colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected light colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
</svg>
    <script>

        document.documentElement.dataset.colour_scheme = localStorage.getItem("colour_scheme") || "auto"
    </script>
    <section id="pep-page-section">
        <header>
            <h1 data-pagefind-ignore>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 230</li>
            </ul>
            <button id="colour-scheme-cycler" onClick="setColourScheme(nextColourScheme())">
                <svg aria-hidden="true" class="colour-scheme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-dark"><use href="#svg-moon"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-light"><use href="#svg-sun"></use></svg>
                <span class="visually-hidden">Toggle light / dark / auto colour theme</span>
            </button>
        </header>
        
        <div id="mobile-search" class="mobile-search-container"></div>
        
        <article data-pagefind-body>
            
            <span data-pagefind-meta="title:PEP 230 – Warning Framework" data-pagefind-weight="10" class="visually-hidden">PEP 230 – Warning Framework</span>
            <section id="pep-content">
<h1 class="page-title">PEP 230 – Warning Framework</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd">Guido van Rossum &lt;guido&#32;&#97;t&#32;python.org&gt;</dd>
<dt class="field-even">Status<span class="colon">:</span></dt>
<dd class="field-even"><abbr title="Accepted and implementation complete, or no longer active">Final</abbr></dd>
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><abbr title="Normative PEP with a new feature for Python, implementation change for CPython or interoperability standard for the ecosystem">Standards Track</abbr></dd>
<dt class="field-even">Created<span class="colon">:</span></dt>
<dd class="field-even">28-Nov-2000</dd>
<dt class="field-odd">Python-Version<span class="colon">:</span></dt>
<dd class="field-odd">2.1</dd>
<dt class="field-even">Post-History<span class="colon">:</span></dt>
<dd class="field-even">05-Nov-2000</dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Table of Contents</summary><ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#apis-for-issuing-warnings">APIs For Issuing Warnings</a></li>
<li><a class="reference internal" href="#warnings-categories">Warnings Categories</a></li>
<li><a class="reference internal" href="#the-warnings-filter">The Warnings Filter</a></li>
<li><a class="reference internal" href="#warnings-output-and-formatting-hooks">Warnings Output And Formatting Hooks</a></li>
<li><a class="reference internal" href="#api-for-manipulating-warning-filters">API For Manipulating Warning Filters</a></li>
<li><a class="reference internal" href="#command-line-syntax">Command Line Syntax</a></li>
<li><a class="reference internal" href="#open-issues">Open Issues</a></li>
<li><a class="reference internal" href="#rejected-concerns">Rejected Concerns</a></li>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
</ul>
</details></section>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract" role="doc-backlink">Abstract</a></h2>
<p>This PEP proposes a C and Python level API, as well as command
line flags, to issue warning messages and control what happens to
them.  This is mostly based on GvR’s proposal posted to python-dev
on 05-Nov-2000, with some ideas (such as using classes to
categorize warnings) merged in from Paul Prescod’s
counter-proposal posted on the same date.  Also, an attempt to
implement the proposal caused several small tweaks.</p>
</section>
<section id="motivation">
<h2><a class="toc-backref" href="#motivation" role="doc-backlink">Motivation</a></h2>
<p>With Python 3000 looming, it is necessary to start issuing
warnings about the use of obsolete or deprecated features, in
addition to errors.  There are also lots of other reasons to be
able to issue warnings, both from C and from Python code, both at
compile time and at run time.</p>
<p>Warnings aren’t fatal, and thus it’s possible that a program
triggers the same warning many times during a single execution.
It would be annoying if a program emitted an endless stream of
identical warnings.  Therefore, a mechanism is needed that
suppresses multiple identical warnings.</p>
<p>It is also desirable to have user control over which warnings are
printed.  While in general it is useful to see all warnings all
the time, there may be times where it is impractical to fix the
code right away in a production program.  In this case, there
should be a way to suppress warnings.</p>
<p>It is also useful to be able to suppress specific warnings during
program development, e.g. when a warning is generated by a piece
of 3rd party code that cannot be fixed right away, or when there
is no way to fix the code (possibly a warning message is generated
for a perfectly fine piece of code).  It would be unwise to offer
to suppress all warnings in such cases: the developer would miss
warnings about the rest of the code.</p>
<p>On the other hand, there are also situations conceivable where
some or all warnings are better treated as errors.  For example,
it may be a local coding standard that a particular deprecated
feature should not be used.  In order to enforce this, it is
useful to be able to turn the warning about this particular
feature into an error, raising an exception (without necessarily
turning all warnings into errors).</p>
<p>Therefore, I propose to introduce a flexible “warning filter”
which can filter out warnings or change them into exceptions,
based on:</p>
<ul class="simple">
<li>Where in the code they are generated (per package, module, or
function)</li>
<li>The warning category (warning categories are discussed below)</li>
<li>A specific warning message</li>
</ul>
<p>The warning filter must be controllable both from the command line
and from Python code.</p>
</section>
<section id="apis-for-issuing-warnings">
<h2><a class="toc-backref" href="#apis-for-issuing-warnings" role="doc-backlink">APIs For Issuing Warnings</a></h2>
<ul>
<li>To issue a warning from Python:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">message</span><span class="p">[,</span> <span class="n">category</span><span class="p">[,</span> <span class="n">stacklevel</span><span class="p">]])</span>
</pre></div>
</div>
<p>The category argument, if given, must be a warning category
class (see below); it defaults to warnings.UserWarning.  This
may raise an exception if the particular warning issued is
changed into an error by the warnings filter.  The stacklevel
can be used by wrapper functions written in Python, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">deprecation</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="n">warn</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>This makes the warning refer to the deprecation()’s caller,
rather than to the source of deprecation() itself (since the
latter would defeat the purpose of the warning message).</p>
</li>
<li>To issue a warning from C:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span> <span class="n">PyErr_Warn</span><span class="p">(</span><span class="n">PyObject</span> <span class="o">*</span><span class="n">category</span><span class="p">,</span> <span class="n">char</span> <span class="o">*</span><span class="n">message</span><span class="p">);</span>
</pre></div>
</div>
<p>Return 0 normally, 1 if an exception is raised (either because
the warning was transformed into an exception, or because of a
malfunction in the implementation, such as running out of
memory).  The category argument must be a warning category class
(see below) or <code class="docutils literal notranslate"><span class="pre">NULL</span></code>, in which case it defaults to
<code class="docutils literal notranslate"><span class="pre">PyExc_RuntimeWarning</span></code>.  When <code class="docutils literal notranslate"><span class="pre">PyErr_Warn()</span></code> function returns 1, the
caller should do normal exception handling.</p>
<p>The current C implementation of <code class="docutils literal notranslate"><span class="pre">PyErr_Warn()</span></code> imports the
warnings module (implemented in Python) and calls its <code class="docutils literal notranslate"><span class="pre">warn()</span></code>
function.  This minimizes the amount of C code that needs to be
added to implement the warning feature.</p>
<p>[XXX Open Issue: what about issuing warnings during lexing or
parsing, which don’t have the exception machinery available?]</p>
</li>
</ul>
</section>
<section id="warnings-categories">
<h2><a class="toc-backref" href="#warnings-categories" role="doc-backlink">Warnings Categories</a></h2>
<p>There are a number of built-in exceptions that represent warning
categories.  This categorization is useful to be able to filter
out groups of warnings.  The following warnings category classes
are currently defined:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">Warning</span></code> – this is the base class of all warning category
classes and it itself a subclass of Exception</li>
<li><code class="docutils literal notranslate"><span class="pre">UserWarning</span></code> – the default category for <code class="docutils literal notranslate"><span class="pre">warnings.warn()</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> – base category for warnings about deprecated
features</li>
<li><code class="docutils literal notranslate"><span class="pre">SyntaxWarning</span></code> – base category for warnings about dubious
syntactic features</li>
<li><code class="docutils literal notranslate"><span class="pre">RuntimeWarning</span></code> – base category for warnings about dubious
runtime features</li>
</ul>
<p>[XXX: Other warning categories may be proposed during the review
period for this PEP.]</p>
<p>These standard warning categories are available from C as
<code class="docutils literal notranslate"><span class="pre">PyExc_Warning</span></code>, <code class="docutils literal notranslate"><span class="pre">PyExc_UserWarning</span></code>, etc.  From Python, they are
available in the <code class="docutils literal notranslate"><span class="pre">__builtin__</span></code> module, so no import is necessary.</p>
<p>User code can define additional warning categories by subclassing
one of the standard warning categories.  A warning category must
always be a subclass of the Warning class.</p>
</section>
<section id="the-warnings-filter">
<h2><a class="toc-backref" href="#the-warnings-filter" role="doc-backlink">The Warnings Filter</a></h2>
<p>The warnings filter control whether warnings are ignored,
displayed, or turned into errors (raising an exception).</p>
<p>There are three sides to the warnings filter:</p>
<ul class="simple">
<li>The data structures used to efficiently determine the
disposition of a particular <code class="docutils literal notranslate"><span class="pre">warnings.warn()</span></code> or <code class="docutils literal notranslate"><span class="pre">PyErr_Warn()</span></code>
call.</li>
<li>The API to control the filter from Python source code.</li>
<li>The command line switches to control the filter.</li>
</ul>
<p>The warnings filter works in several stages.  It is optimized for
the (expected to be common) case where the same warning is issued
from the same place in the code over and over.</p>
<p>First, the warning filter collects the module and line number
where the warning is issued; this information is readily available
through <code class="docutils literal notranslate"><span class="pre">sys._getframe()</span></code>.</p>
<p>Conceptually, the warnings filter maintains an ordered list of
filter specifications; any specific warning is matched against
each filter specification in the list in turn until a match is
found; the match determines the disposition of the match.  Each
entry is a tuple as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">module</span><span class="p">,</span> <span class="n">lineno</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>category is a class (a subclass of <code class="docutils literal notranslate"><span class="pre">warnings.Warning</span></code>) of which
the warning category must be a subclass in order to match</li>
<li>message is a compiled regular expression that the warning
message must match (the match is case-insensitive)</li>
<li>module is a compiled regular expression that the module name
must match</li>
<li>lineno is an integer that the line number where the warning
occurred must match, or 0 to match all line numbers</li>
<li>action is one of the following strings:<ul>
<li>“error” – turn matching warnings into exceptions</li>
<li>“ignore” – never print matching warnings</li>
<li>“always” – always print matching warnings</li>
<li>“default” – print the first occurrence of matching warnings
for each location where the warning is issued</li>
<li>“module” – print the first occurrence of matching warnings
for each module where the warning is issued</li>
<li>“once” – print only the first occurrence of matching
warnings</li>
</ul>
</li>
</ul>
<p>Since the <code class="docutils literal notranslate"><span class="pre">Warning</span></code> class is derived from the built-in <code class="docutils literal notranslate"><span class="pre">Exception</span></code>
class, to turn a warning into an error we simply raise
<code class="docutils literal notranslate"><span class="pre">category(message)</span></code>.</p>
</section>
<section id="warnings-output-and-formatting-hooks">
<h2><a class="toc-backref" href="#warnings-output-and-formatting-hooks" role="doc-backlink">Warnings Output And Formatting Hooks</a></h2>
<p>When the warnings filter decides to issue a warning (but not when
it decides to raise an exception), it passes the information about
the function <code class="docutils literal notranslate"><span class="pre">warnings.showwarning(message,</span> <span class="pre">category,</span> <span class="pre">filename,</span> <span class="pre">lineno)</span></code>.
The default implementation of this function writes the warning text
to <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code>, and shows the source line of the filename.  It has
an optional 5th argument which can be used to specify a different
file than <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code>.</p>
<p>The formatting of warnings is done by a separate function,
<code class="docutils literal notranslate"><span class="pre">warnings.formatwarning(message,</span> <span class="pre">category,</span> <span class="pre">filename,</span> <span class="pre">lineno)</span></code>.  This
returns a string (that may contain newlines and ends in a newline)
that can be printed to get the identical effect of the
<code class="docutils literal notranslate"><span class="pre">showwarning()</span></code> function.</p>
</section>
<section id="api-for-manipulating-warning-filters">
<h2><a class="toc-backref" href="#api-for-manipulating-warning-filters" role="doc-backlink">API For Manipulating Warning Filters</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">module</span><span class="p">,</span> <span class="n">lineno</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span>
</pre></div>
</div>
<p>This checks the types of the arguments, compiles the message and
module regular expressions, and inserts them as a tuple in front
of the warnings filter.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">warnings</span><span class="o">.</span><span class="n">resetwarnings</span><span class="p">()</span>
</pre></div>
</div>
<p>Reset the warnings filter to empty.</p>
</section>
<section id="command-line-syntax">
<h2><a class="toc-backref" href="#command-line-syntax" role="doc-backlink">Command Line Syntax</a></h2>
<p>There should be command line options to specify the most common
filtering actions, which I expect to include at least:</p>
<ul class="simple">
<li>suppress all warnings</li>
<li>suppress a particular warning message everywhere</li>
<li>suppress all warnings in a particular module</li>
<li>turn all warnings into exceptions</li>
</ul>
<p>I propose the following command line option syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">Waction</span><span class="p">[:</span><span class="n">message</span><span class="p">[:</span><span class="n">category</span><span class="p">[:</span><span class="n">module</span><span class="p">[:</span><span class="n">lineno</span><span class="p">]]]]</span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li>‘action’ is an abbreviation of one of the allowed actions
(“error”, “default”, “ignore”, “always”, “once”, or “module”)</li>
<li>‘message’ is a message string; matches warnings whose message
text is an initial substring of ‘message’ (matching is
case-insensitive)</li>
<li>‘category’ is an abbreviation of a standard warning category
class name <strong>or</strong> a fully-qualified name for a user-defined
warning category class of the form [package.]module.classname</li>
<li>‘module’ is a module name (possibly package.module)</li>
<li>‘lineno’ is an integral line number</li>
</ul>
<p>All parts except ‘action’ may be omitted, where an empty value
after stripping whitespace is the same as an omitted value.</p>
<p>The C code that parses the Python command line saves the body of
all -W options in a list of strings, which is made available to
the warnings module as sys.warnoptions.  The warnings module
parses these when it is first imported.  Errors detected during
the parsing of sys.warnoptions are not fatal; a message is written
to sys.stderr and processing continues with the option.</p>
<p>Examples:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-Werror</span></code></dt><dd>Turn all warnings into errors</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-Wall</span></code></dt><dd>Show all warnings</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-Wignore</span></code></dt><dd>Ignore all warnings</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-Wi:hello</span></code></dt><dd>Ignore warnings whose message text starts with “hello”</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-We::Deprecation</span></code></dt><dd>Turn deprecation warnings into errors</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-Wi:::spam:10</span></code></dt><dd>Ignore all warnings on line 10 of module spam</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-Wi:::spam</span> <span class="pre">-Wd:::spam:10</span></code></dt><dd>Ignore all warnings in module spam except on line 10</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-We::Deprecation</span> <span class="pre">-Wd::Deprecation:spam</span></code></dt><dd>Turn deprecation warnings into errors except in module spam</dd>
</dl>
</section>
<section id="open-issues">
<h2><a class="toc-backref" href="#open-issues" role="doc-backlink">Open Issues</a></h2>
<p>Some open issues off the top of my head:</p>
<ul class="simple">
<li>What about issuing warnings during lexing or parsing, which
don’t have the exception machinery available?</li>
<li>The proposed command line syntax is a bit ugly (although the
simple cases aren’t so bad: <code class="docutils literal notranslate"><span class="pre">-Werror</span></code>, <code class="docutils literal notranslate"><span class="pre">-Wignore</span></code>, etc.).  Anybody
got a better idea?</li>
<li>I’m a bit worried that the filter specifications are too
complex.  Perhaps filtering only on category and module (not on
message text and line number) would be enough?</li>
<li>There’s a bit of confusion between module names and file names.
The reporting uses file names, but the filter specification uses
module names.  Maybe it should allow filenames as well?</li>
<li>I’m not at all convinced that packages are handled right.</li>
<li>Do we need more standard warning categories?  Fewer?</li>
<li>In order to minimize the start-up overhead, the warnings module
is imported by the first call to <code class="docutils literal notranslate"><span class="pre">PyErr_Warn()</span></code>.  It does the
command line parsing for <code class="docutils literal notranslate"><span class="pre">-W</span></code> options upon import.  Therefore, it
is possible that warning-free programs will not complain about
invalid <code class="docutils literal notranslate"><span class="pre">-W</span></code> options.</li>
</ul>
</section>
<section id="rejected-concerns">
<h2><a class="toc-backref" href="#rejected-concerns" role="doc-backlink">Rejected Concerns</a></h2>
<p>Paul Prescod, Barry Warsaw and Fred Drake have brought up several
additional concerns that I feel aren’t critical.  I address them
here (the concerns are paraphrased, not exactly their words):</p>
<ul>
<li>Paul: <code class="docutils literal notranslate"><span class="pre">warn()</span></code> should be a built-in or a statement to make it easily
available.<p>Response: “from warnings import warn” is easy enough.</p>
</li>
<li>Paul: What if I have a speed-critical module that triggers
warnings in an inner loop.  It should be possible to disable the
overhead for detecting the warning (not just suppress the
warning).<p>Response: rewrite the inner loop to avoid triggering the
warning.</p>
</li>
<li>Paul: What if I want to see the full context of a warning?<p>Response: use <code class="docutils literal notranslate"><span class="pre">-Werror</span></code> to turn it into an exception.</p>
</li>
<li>Paul: I prefer “:*:*:” to “:::” for leaving parts of the warning
spec out.<p>Response: I don’t.</p>
</li>
<li>Barry: It would be nice if lineno can be a range specification.<p>Response: Too much complexity already.</p>
</li>
<li>Barry: I’d like to add my own warning action.  Maybe if ‘action’
could be a callable as well as a string.  Then in my IDE, I
could set that to “mygui.popupWarningsDialog”.<p>Response: For that purpose you would override
<code class="docutils literal notranslate"><span class="pre">warnings.showwarning()</span></code>.</p>
</li>
<li>Fred: why do the Warning category classes have to be in
<code class="docutils literal notranslate"><span class="pre">__builtin__</span></code>?<p>Response: that’s the simplest implementation, given that the
warning categories must be available in C before the first
<code class="docutils literal notranslate"><span class="pre">PyErr_Warn()</span></code> call, which imports the warnings module.  I see no
problem with making them available as built-ins.</p>
</li>
</ul>
</section>
<section id="implementation">
<h2><a class="toc-backref" href="#implementation" role="doc-backlink">Implementation</a></h2>
<p>Here’s a prototype implementation:
<a class="reference external" href="http://sourceforge.net/patch/?func=detailpatch&amp;patch_id=102715&amp;group_id=5470">http://sourceforge.net/patch/?func=detailpatch&amp;patch_id=102715&amp;group_id=5470</a></p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/peps/pep-0230.rst">https://github.com/python/peps/blob/main/peps/pep-0230.rst</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/peps/pep-0230.rst">2025-02-01 08:55:40 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <div id="search"></div>
            <h2>Contents</h2>
            <ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#apis-for-issuing-warnings">APIs For Issuing Warnings</a></li>
<li><a class="reference internal" href="#warnings-categories">Warnings Categories</a></li>
<li><a class="reference internal" href="#the-warnings-filter">The Warnings Filter</a></li>
<li><a class="reference internal" href="#warnings-output-and-formatting-hooks">Warnings Output And Formatting Hooks</a></li>
<li><a class="reference internal" href="#api-for-manipulating-warning-filters">API For Manipulating Warning Filters</a></li>
<li><a class="reference internal" href="#command-line-syntax">Command Line Syntax</a></li>
<li><a class="reference internal" href="#open-issues">Open Issues</a></li>
<li><a class="reference internal" href="#rejected-concerns">Rejected Concerns</a></li>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
</ul>

            <br>
            <a id="source" href="https://github.com/python/peps/blob/main/peps/pep-0230.rst?plain=1">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
    <script src="../_static/sticky_banner.js"></script>
    <script src="https://analytics.python.org/js/script.outbound-links.js"
            data-domain="peps.python.org" defer></script>
    <script src="/pagefind/pagefind-ui.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            // Ranking configuration to boost exact title matches
            const searchOptions = {
                ranking: {
                    termSimilarity: 9.0, // Higher values favor exact matches
                    termFrequency: 0.5, // Lower values reduce penalty for low term frequency
                    pageLength: 0.2, // Lower values reduce the impact of page length
                }
            };

            // Initialize pagefind for either mobile or desktop, not both
            if (window.innerWidth <= 640) {
                new PagefindUI({ element: "#mobile-search", ...searchOptions, showSubResults: false });
            } else {
                new PagefindUI({ element: "#search", ...searchOptions, showSubResults: true });
            }
        });
    </script>
</body>
</html>