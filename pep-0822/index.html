
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>PEP 822 – Dedented Multiline String (d-string) | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png">
    <link rel="canonical" href="https://peps.python.org/pep-0822/">
    <link rel="stylesheet" href="../_static/style.css" type="text/css">
    <link rel="stylesheet" href="../_static/mq.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg-light">
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark">
    <link rel="alternate" type="application/rss+xml" title="Latest PEPs" href="https://peps.python.org/peps.rss">
    <meta property="og:title" content='PEP 822 – Dedented Multiline String (d-string) | peps.python.org'>
    <meta property="og:description" content="This PEP proposes to add a feature that automatically removes indentation from multiline string literals.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://peps.python.org/pep-0822/">
    <meta property="og:site_name" content="Python Enhancement Proposals (PEPs)">
    <meta property="og:image" content="https://peps.python.org/_static/og-image.png">
    <meta property="og:image:alt" content="Python PEPs">
    <meta property="og:image:width" content="200">
    <meta property="og:image:height" content="200">
    <meta name="description" content="This PEP proposes to add a feature that automatically removes indentation from multiline string literals.">
    <meta name="theme-color" content="#3776ab">
</head>
<body>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-sun-half" viewBox="0 0 24 24" pointer-events="all">
    <title>Following system colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9"></circle>
      <path d="M12 3v18m0-12l4.65-4.65M12 14.3l7.37-7.37M12 19.6l8.85-8.85"></path>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected dark colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected light colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
</svg>
    <script>

        document.documentElement.dataset.colour_scheme = localStorage.getItem("colour_scheme") || "auto"
    </script>
    <section id="pep-page-section">
        <header>
            <h1 data-pagefind-ignore>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 822</li>
            </ul>
            <button id="colour-scheme-cycler" onClick="setColourScheme(nextColourScheme())">
                <svg aria-hidden="true" class="colour-scheme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-dark"><use href="#svg-moon"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-light"><use href="#svg-sun"></use></svg>
                <span class="visually-hidden">Toggle light / dark / auto colour theme</span>
            </button>
        </header>
        
        <div id="mobile-search" class="mobile-search-container"></div>
        
        <article data-pagefind-body>
            
            <span data-pagefind-meta="title:PEP 822 – Dedented Multiline String (d-string)" data-pagefind-weight="10" class="visually-hidden">PEP 822 – Dedented Multiline String (d-string)</span>
            <section id="pep-content">
<h1 class="page-title">PEP 822 – Dedented Multiline String (d-string)</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd">Inada Naoki &lt;songofacandy&#32;&#97;t&#32;gmail.com&gt;</dd>
<dt class="field-even">Discussions-To<span class="colon">:</span></dt>
<dd class="field-even"><a class="reference external" href="https://discuss.python.org/t/105519">Discourse thread</a></dd>
<dt class="field-odd">Status<span class="colon">:</span></dt>
<dd class="field-odd"><abbr title="Proposal under active discussion and revision">Draft</abbr></dd>
<dt class="field-even">Type<span class="colon">:</span></dt>
<dd class="field-even"><abbr title="Normative PEP with a new feature for Python, implementation change for CPython or interoperability standard for the ecosystem">Standards Track</abbr></dd>
<dt class="field-odd">Created<span class="colon">:</span></dt>
<dd class="field-odd">05-Jan-2026</dd>
<dt class="field-even">Python-Version<span class="colon">:</span></dt>
<dd class="field-even">3.15</dd>
<dt class="field-odd">Post-History<span class="colon">:</span></dt>
<dd class="field-odd"><a class="reference external" href="https://discuss.python.org/t/105519" title="Discourse thread">05-Jan-2026</a></dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Table of Contents</summary><ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#specification">Specification</a></li>
<li><a class="reference internal" href="#how-to-teach-this">How to Teach This</a></li>
<li><a class="reference internal" href="#other-languages-having-similar-features">Other Languages having Similar Features</a></li>
<li><a class="reference internal" href="#reference-implementation">Reference Implementation</a></li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#str-dedent-method"><code class="docutils literal notranslate"><span class="pre">str.dedent()</span></code> method</a></li>
<li><a class="reference internal" href="#triple-backtick">Triple-backtick</a></li>
<li><a class="reference internal" href="#future-import"><code class="docutils literal notranslate"><span class="pre">__future__</span></code> import</a></li>
<li><a class="reference internal" href="#removing-newline-in-the-last-line">Removing newline in the last line</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract" role="doc-backlink">Abstract</a></h2>
<p>This PEP proposes to add a feature that automatically removes indentation from
multiline string literals.</p>
<p>Dedented multiline strings use a new prefix “d” (shorthand for “dedent”) before
the opening quote of a multiline string literal.</p>
<p>Example (spaces are visualized as <code class="docutils literal notranslate"><span class="pre">.</span></code>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">hello_paragraph</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="o">....</span><span class="k">return</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">........&lt;p&gt;</span>
<span class="s2">..........Hello, World!</span>
<span class="s2">........&lt;/p&gt;</span>
<span class="s2">....&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>Unlike <code class="docutils literal notranslate"><span class="pre">textwrap.dedent()</span></code>, indentation before closing quotes is also
considered when determining the amount of indentation to be removed.
Therefore, the string returned in the example above consists of the following
three lines.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&quot;....&lt;p&gt;\n&quot;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;......Hello,</span> <span class="pre">World!\n&quot;</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;....&lt;/p&gt;\n&quot;</span></code></li>
</ul>
</section>
<section id="motivation">
<h2><a class="toc-backref" href="#motivation" role="doc-backlink">Motivation</a></h2>
<p>When writing multiline string literals within deeply indented Python code,
users are faced with the following choices:</p>
<ul class="simple">
<li>Write the contents of the string without indentation.</li>
<li>Use multiple single-line string literals concatenated together instead of
a multiline string literal.</li>
<li>Use <code class="docutils literal notranslate"><span class="pre">textwrap.dedent()</span></code> to remove indentation.</li>
</ul>
<p>All of these options have drawbacks in terms of code readability and
maintainability.</p>
<ul class="simple">
<li>Writing multiline strings without indentation in deeply indented code
looks awkward and tends to be avoided.
In practice, many places including Python’s own test code choose other
methods.</li>
<li>Concatenated single-line string literals are more verbose and harder to
maintain. Writing <code class="docutils literal notranslate"><span class="pre">&quot;\n&quot;</span></code> at the end of each line is tedious.
It’s easy to miss the semicolons between many string concatenations.</li>
<li><code class="docutils literal notranslate"><span class="pre">textwrap.dedent()</span></code> is implemented in Python so it requires some runtime
overhead. Moreover, it cannot be used to dedent t-strings.</li>
</ul>
<p>This PEP aims to provide a built-in syntax for dedented multiline strings that
is both easy to read and write, while also being efficient at runtime.</p>
</section>
<section id="rationale">
<h2><a class="toc-backref" href="#rationale" role="doc-backlink">Rationale</a></h2>
<p>The main alternative to this idea is to implement <code class="docutils literal notranslate"><span class="pre">textwrap.dedent()</span></code> in C
and provide it as a <code class="docutils literal notranslate"><span class="pre">str.dedent()</span></code> method.
This idea reduces the runtime overhead of <code class="docutils literal notranslate"><span class="pre">textwrap.dedent()</span></code>.
By making it a built-in method, it also allows for compile-time dedentation
when called directly on string literals.</p>
<p>However, this approach has several drawbacks:</p>
<ul class="simple">
<li>To support cases where users want to include some indentation in the string,
the <code class="docutils literal notranslate"><span class="pre">dedent()</span></code> method would need to accept an argument specifying
the amount of indentation to remove.
This would be cumbersome and error-prone for users.</li>
<li>When continuation lines (lines after line ends with a backslash) are used,
they cannot be dedented.</li>
<li>f-strings may interpolate expressions as multiline string without indent.
In such case, f-string + <code class="docutils literal notranslate"><span class="pre">str.dedent()</span></code> cannot dedent the whole string.</li>
<li>t-strings do not create <code class="docutils literal notranslate"><span class="pre">str</span></code> objects, so they cannot use the
<code class="docutils literal notranslate"><span class="pre">str.dedent()</span></code> method.
While adding a <code class="docutils literal notranslate"><span class="pre">dedent()</span></code> method to <code class="docutils literal notranslate"><span class="pre">string.templatelib.Template</span></code> is an
option, it would lead to inconsistency since t-strings and f-strings are very
similar but would have different behaviors regarding dedentation.</li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">str.dedent()</span></code> method can still be useful for non-literal strings,
so this PEP does not preclude that idea.
However, for ease of use with multiline string literals, providing dedicated
syntax is superior.</p>
</section>
<section id="specification">
<h2><a class="toc-backref" href="#specification" role="doc-backlink">Specification</a></h2>
<p>Add a new string literal prefix “d” for dedented multiline strings.
This prefix can be combined with “f”, “t”, “r”, and “b” prefixes.</p>
<p>This prefix is only for multiline string literals.
So it can only be used with triple quotes (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">'''</span></code>).</p>
<p>Opening triple quotes needs to be followed by a newline character.
This newline is not included in the resulting string.
The content of the d-string starts from the next line.</p>
<p>Indentation is leading whitespace characters (spaces and tabs) of each line.</p>
<p>The amount of indentation to be removed is determined by the longest common
indentation of lines in the string.
Lines consisting entirely of whitespace characters are ignored when
determining the common indentation, except for the line containing the closing
triple quotes.</p>
<p>Spaces and tabs are treated as different characters.
For example, <code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">hello&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;\thello&quot;</span></code> have no common indentation.</p>
<p>The dedentation process removes the determined indentation from every line in
the string.</p>
<ul class="simple">
<li>Lines that are longer than or equal in length to the determined indentation
must start with the determined indentation.
Othrerwise, Python raises an <code class="docutils literal notranslate"><span class="pre">IndentationError</span></code>.
The determined indentation is removed from these lines.</li>
<li>Lines that are shorter than the determined indentation (including
empty lines) must be a prefix of the determined indentation.
Otherwise, Python raises an <code class="docutils literal notranslate"><span class="pre">IndentationError</span></code>.
These lines become empty lines.</li>
</ul>
<p>Unless combined with the “r” prefix, backslash escapes are processed after
the dedentation process.
So you cannot use <code class="docutils literal notranslate"><span class="pre">\\t</span></code> in indentations.
And you can use line continuation (backslash at the end of line) and remove
indentation from the continued line.</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># d-string must starts with a newline.</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;</span>           <span class="c1"># SyntaxError: d-string must be triple-quoted</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;&quot;&quot;&quot;</span>       <span class="c1"># SyntaxError: d-string must start with a newline</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;Hello&quot;&quot;&quot;</span>  <span class="c1"># SyntaxError: d-string must start with a newline</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;Hello</span>
<span class="s2">..World!</span>
<span class="s2">&quot;&quot;&quot;</span>  <span class="c1"># SyntaxError: d-string must start with a newline</span>

<span class="c1"># d-string removes the longest common indentation from each line.</span>
<span class="c1"># Empty lines are ignored, but closing quotes line is always considered.</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">..Hello</span>
<span class="s2">..World!</span>
<span class="s2">..&quot;&quot;&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>  <span class="c1"># &#39;Hello\nWorld!\n&#39;</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">..Hello</span>
<span class="s2">..World!</span>
<span class="s2">.&quot;&quot;&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>  <span class="c1"># &#39;.Hello\n.World!\n&#39;</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">..Hello</span>
<span class="s2">..World!</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>  <span class="c1"># &#39;..Hello\n..World!\n&#39;</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">..Hello</span>
<span class="s2">.</span>

<span class="s2">..World!</span>
<span class="s2">...&quot;&quot;&quot;</span>  <span class="c1"># Longest common indentation is &#39;..&#39;.</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>  <span class="c1"># &#39;Hello\n\n\nWorld!\n.&#39;</span>

<span class="c1"># Closing qutotes can be on the same line as the last content line.</span>
<span class="c1"># In this case, the string does not end with a newline.</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">..Hello</span>
<span class="s2">..World!&quot;&quot;&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>  <span class="c1"># &#39;Hello\nWorld!&#39;</span>

<span class="c1"># Tabs are allowed as indentation.</span>
<span class="c1"># But tabs and spaces are treated as different characters.</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">---&gt;..Hello</span>
<span class="s2">---&gt;..World!</span>
<span class="s2">---&gt;&quot;&quot;&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>  <span class="c1"># &#39;..Hello\n..World!\n&#39;</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">---&gt;Hello</span>
<span class="s2">..World!</span>
<span class="s2">..&quot;&quot;&quot;</span>  <span class="c1"># There is no common indentation.</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>  <span class="c1"># &#39;\tHello\n..World!\n..&#39;</span>

<span class="c1"># Line continuation with backslash works as usual.</span>
<span class="c1"># But you cannot put a backslash right after the opening quotes.</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">..Hello </span><span class="se">\</span>
<span class="s2">..World!</span><span class="se">\</span>
<span class="s2">..&quot;&quot;&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>  <span class="c1"># &#39;Hello World!&#39;</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="s2">..Hello</span>
<span class="s2">..World</span>
<span class="s2">..&quot;&quot;&quot;</span>  <span class="c1"># SyntaxError: d-string must starts with a newline.</span>

<span class="c1"># d-string can be combined with r-string, b-string, f-string, and t-string.</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">dr</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">..Hello</span><span class="se">\</span>
<span class="s2">..World!</span><span class="se">\</span>
<span class="s2">..&quot;&quot;&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>  <span class="c1"># &#39;Hello\\\nWorld!\\\n&#39;</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">db</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">..Hello</span>
<span class="s2">..World!</span>
<span class="s2">..&quot;&quot;&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>  <span class="c1"># b&#39;Hello\nWorld!\n&#39;</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">df</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">....Hello, {&quot;world&quot;.title()}!</span>
<span class="s2">....&quot;&quot;&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>  <span class="c1"># &#39;Hello,.World!\n&#39;</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">dt</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">....Hello, {&quot;world&quot;.title()}!</span>
<span class="s2">....&quot;&quot;&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>   <span class="c1"># &lt;class &#39;string.templatelib.Template&#39;&gt;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">strings</span><span class="p">)</span> <span class="c1"># (&#39;Hello, &#39;, &#39;!\n&#39;)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>  <span class="c1"># (&#39;World&#39;,)</span>
</pre></div>
</div>
</section>
<section id="how-to-teach-this">
<h2><a class="toc-backref" href="#how-to-teach-this" role="doc-backlink">How to Teach This</a></h2>
<p>The main difference between <code class="docutils literal notranslate"><span class="pre">textwrap.dedent(&quot;&quot;&quot;...&quot;&quot;&quot;)</span></code> and d-string can be
explained as follows:</p>
<ul>
<li><code class="docutils literal notranslate"><span class="pre">textwrap.dedent()</span></code> is a regular function, but d-string is part of the
language syntax. d-string has no runtime overhead, and it can remove
indentation from t-strings.</li>
<li>When using <code class="docutils literal notranslate"><span class="pre">textwrap.dedent()</span></code>, you need to start with <code class="docutils literal notranslate"><span class="pre">&quot;&quot;&quot;\</span></code> to avoid
including the first newline character, but with d-string, the string content
starts from the line after <code class="docutils literal notranslate"><span class="pre">d&quot;&quot;&quot;</span></code>, so no backslash is needed.<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">textwrap</span>

<span class="n">s1</span> <span class="o">=</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="s2">    Hello</span>
<span class="s2">    World!</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">s2</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Hello</span>
<span class="s2">    World!</span>
<span class="s2">    &quot;&quot;&quot;</span>
<span class="k">assert</span> <span class="n">s1</span> <span class="o">==</span> <span class="n">s2</span>
</pre></div>
</div>
</li>
<li><code class="docutils literal notranslate"><span class="pre">textwrap.dedent()</span></code> ignores all blank lines when determining the common
indentation, but d-string also considers the indentation of the closing
quotes.
This allows d-string to preserve some indentation in the result when needed.<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">textwrap</span>

<span class="n">s1</span> <span class="o">=</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="s2">      Hello</span>
<span class="s2">      World!</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">s2</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">      Hello</span>
<span class="s2">      World!</span>
<span class="s2">    &quot;&quot;&quot;</span>
<span class="k">assert</span> <span class="n">s1</span> <span class="o">!=</span> <span class="n">s2</span>
<span class="k">assert</span> <span class="n">s1</span> <span class="o">==</span> <span class="s1">&#39;Hello</span><span class="se">\n</span><span class="s1">World!</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="k">assert</span> <span class="n">s2</span> <span class="o">==</span> <span class="s1">&#39;  Hello</span><span class="se">\n</span><span class="s1">  World!</span><span class="se">\n</span><span class="s1">&#39;</span>
</pre></div>
</div>
</li>
<li>Since d-string removes indentation before processing escape sequences,
when using line continuation (backslash at the end of a line), the next line
can also be dedented.<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">textwrap</span>

<span class="n">s1</span> <span class="o">=</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">dedent</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="s2">    Lorem ipsum dolor sit amet, consectetur adipiscing elit, </span><span class="se">\</span>
<span class="s2">sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span>
<span class="s2">    Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris </span><span class="se">\</span>
<span class="s2">nisi ut aliquip ex ea commodo consequat.</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">s2</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Lorem ipsum dolor sit amet, consectetur adipiscing elit, </span><span class="se">\</span>
<span class="s2">    sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span>
<span class="s2">    Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris </span><span class="se">\</span>
<span class="s2">    nisi ut aliquip ex ea commodo consequat.</span>
<span class="s2">    &quot;&quot;&quot;</span>
<span class="k">assert</span> <span class="n">s1</span> <span class="o">==</span> <span class="n">s2</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="other-languages-having-similar-features">
<h2><a class="toc-backref" href="#other-languages-having-similar-features" role="doc-backlink">Other Languages having Similar Features</a></h2>
<p>Java 15 introduced a feature called <a class="reference external" href="https://openjdk.org/jeps/378">text blocks</a>.
Since Java had not used triple qutes before, they introduced triple quotes for
multiline string literals with automatic indent removal.</p>
<p>C# 11 also introduced a similar feature called
<a class="reference external" href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/proposals/csharp-11.0/raw-string-literal">raw string literals</a>.</p>
<p><a class="reference external" href="https://docs.julialang.org/en/v1/manual/strings/#Triple-Quoted-String-Literals">Julia</a> and
<a class="reference external" href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/stringsandcharacters/#Multiline-String-Literals">Swift</a>
also support triple-quoted string literals that automatically remove indentation.</p>
<p>PHP 7.3 introduced <a class="reference external" href="https://wiki.php.net/rfc/flexible_heredoc_nowdoc_syntaxes">Flexible Heredoc and Nowdoc Syntaxes</a>
Although it uses closing marker (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;&lt;&lt;END</span> <span class="pre">...</span> <span class="pre">END</span></code>) instead of
triple quote, it removes indent from text too.</p>
<p>Ruby also has <a class="reference external" href="https://ruby-doc.org/core-2.5.0/doc/syntax/literals_rdoc.html#label-Here+Documents">“squiggly” heredoc</a>
that removes indent from lines in heredoc.</p>
<p>Java, Julia, and Ruby uses the least-indented line to determine the amount of
indentation to be removed.
Swift, C#, and PHP uses the indentation of the closing triple quotes or
closing marker.</p>
</section>
<section id="reference-implementation">
<h2><a class="toc-backref" href="#reference-implementation" role="doc-backlink">Reference Implementation</a></h2>
<p>A CPython implementation of PEP 822 is available at
<a class="reference external" href="https://github.com/methane/cpython/pull/108">methane/cpython#108</a>.</p>
</section>
<section id="rejected-ideas">
<h2><a class="toc-backref" href="#rejected-ideas" role="doc-backlink">Rejected Ideas</a></h2>
<section id="str-dedent-method">
<h3><a class="toc-backref" href="#str-dedent-method" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">str.dedent()</span></code> method</a></h3>
<p>As mentioned in the Rationale section, this PEP doesn’t reject the idea of a
<code class="docutils literal notranslate"><span class="pre">str.dedent()</span></code> method.
A faster version of <code class="docutils literal notranslate"><span class="pre">textwrap.dedent()</span></code> implemented in C would be useful for
runtime dedentation.</p>
<p>However, d-string is more suitable for multiline string literals because:</p>
<ul class="simple">
<li>It works well with f/t-strings.</li>
<li>It allows specifying the amount of indentation to be removed more easily.</li>
<li>It can dedent continuation lines.</li>
</ul>
</section>
<section id="triple-backtick">
<h3><a class="toc-backref" href="#triple-backtick" role="doc-backlink">Triple-backtick</a></h3>
<p>It is considered that
<a class="reference external" href="https://discuss.python.org/t/40679">using triple backticks</a>
for dedented multiline strings could be an alternative syntax.
This notation is familiar to us from Markdown. While there were past concerns
about certain keyboard layouts,
nowadays many people are accustomed to typing this notation.</p>
<p>However, this notation conflicts when embedding Python code within Markdown or
vice versa.
Therefore, considering these drawbacks, increasing the variety of quote
characters is not seen as a superior idea compared to adding a prefix to
string literals.</p>
</section>
<section id="future-import">
<h3><a class="toc-backref" href="#future-import" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">__future__</span></code> import</a></h3>
<p>Instead of adding a prefix to string literals, the idea of using a
<code class="docutils literal notranslate"><span class="pre">__future__</span></code> import to change the default behavior of multiline
string literals was also considered.
This could help simplify Python’s grammar in the future.</p>
<p>But rewriting all existing complex codebases to the new notation may not be
straightforward.
Until all multiline strings in that source code are rewritten to
the new notation, automatic dedentation cannot be utilized.</p>
<p>Until all users can rewrite existing codebases to the new notation,
two types of Python syntax will coexist indefinitely.
Therefore, <a class="reference external" href="https://discuss.python.org/t/90988/54">many people preferred the new string prefix</a>
over the <code class="docutils literal notranslate"><span class="pre">__future__</span></code> import.</p>
</section>
<section id="removing-newline-in-the-last-line">
<h3><a class="toc-backref" href="#removing-newline-in-the-last-line" role="doc-backlink">Removing newline in the last line</a></h3>
<p>Another idea considered was to remove the newline character from the last line.
This idea is same to Swift’s multiline string literals.</p>
<p>With this idea, user can write multiline string having indent without trailing
newline like below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Hello</span>
<span class="s2">    World!</span>
<span class="s2">  &quot;&quot;&quot;</span>  <span class="c1"># &quot;  Hello\n  World!&quot; (no trailing newline)</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Hello</span>
<span class="s2">    World!</span>

<span class="s2">  &quot;&quot;&quot;</span>  <span class="c1"># &quot;  Hello\n  World!\n&quot; (has a trailing newline)</span>
</pre></div>
</div>
<p>However, including a newline at the end of the last line of a multiline string
literal is a very common case, and requiring an empty line at the end would
look quite unnatural compared to Python’s traditional multiline string literals.</p>
<p>When using <code class="docutils literal notranslate"><span class="pre">textwrap.dedent(&quot;&quot;&quot;...&quot;&quot;&quot;)</span></code>, in many cases users had to write a
backslash right after the opening quote, which was frustrating.
Therefore, not including the newline after the opening quote in d-strings is
a clear improvement for users.
On the other hand, removing the newline at the end of the line before the
closing quote would likely cause confusion when rewriting code that uses
<code class="docutils literal notranslate"><span class="pre">textwrap.dedent(&quot;&quot;&quot;...&quot;&quot;&quot;)</span></code>.</p>
<p>Without this idea, if you don’t need remaining indentation but want to avoid a
trailing newline, you can put the closing quotes on the same line as the last
content line.
And if you need to retain some indentation without a trailing newline,
you can use workarounds such as line continuation or <code class="docutils literal notranslate"><span class="pre">str.rstrip()</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Hello</span>
<span class="s2">    World!&quot;&quot;&quot;</span>
<span class="k">assert</span> <span class="n">s</span> <span class="o">==</span> <span class="s2">&quot;Hello</span><span class="se">\n</span><span class="s2">World!&quot;</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">d</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Hello</span>
<span class="s2">    World!</span><span class="se">\</span>
<span class="s2">  &quot;&quot;&quot;</span>
<span class="k">assert</span> <span class="n">s</span> <span class="o">==</span> <span class="s2">&quot;  Hello</span><span class="se">\n</span><span class="s2">  World!&quot;</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">dr</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Hello</span>
<span class="s2">    World!</span>
<span class="s2">  &quot;&quot;&quot;</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">s</span> <span class="o">==</span> <span class="s2">&quot;  Hello</span><span class="se">\n</span><span class="s2">  World!&quot;</span>
</pre></div>
</div>
<p>While these workarounds are not ideal, the drawbacks are considered smaller
than the confusion that would result from automatically removing the trailing
newline.</p>
<p>Since <code class="docutils literal notranslate"><span class="pre">textwrap.dedent()</span></code> does not consider the indentation of the closing
quotes, these workarounds are not necessary when rewriting <code class="docutils literal notranslate"><span class="pre">textwrap.dedent()</span></code>
to d-strings.</p>
</section>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright" role="doc-backlink">Copyright</a></h2>
<p>This document is placed in the public domain or under the
CC0-1.0-Universal license, whichever is more permissive.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/peps/pep-0822.rst">https://github.com/python/peps/blob/main/peps/pep-0822.rst</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/peps/pep-0822.rst">2026-01-21 14:56:13 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <div id="search"></div>
            <h2>Contents</h2>
            <ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#specification">Specification</a></li>
<li><a class="reference internal" href="#how-to-teach-this">How to Teach This</a></li>
<li><a class="reference internal" href="#other-languages-having-similar-features">Other Languages having Similar Features</a></li>
<li><a class="reference internal" href="#reference-implementation">Reference Implementation</a></li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#str-dedent-method"><code class="docutils literal notranslate"><span class="pre">str.dedent()</span></code> method</a></li>
<li><a class="reference internal" href="#triple-backtick">Triple-backtick</a></li>
<li><a class="reference internal" href="#future-import"><code class="docutils literal notranslate"><span class="pre">__future__</span></code> import</a></li>
<li><a class="reference internal" href="#removing-newline-in-the-last-line">Removing newline in the last line</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br>
            <a id="source" href="https://github.com/python/peps/blob/main/peps/pep-0822.rst?plain=1">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
    <script src="../_static/sticky_banner.js"></script>
    <script src="https://analytics.python.org/js/script.outbound-links.js"
            data-domain="peps.python.org" defer></script>
    <script src="/pagefind/pagefind-ui.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            // Ranking configuration to boost exact title matches
            const searchOptions = {
                ranking: {
                    termSimilarity: 9.0, // Higher values favor exact matches
                    termFrequency: 0.5, // Lower values reduce penalty for low term frequency
                    pageLength: 0.2, // Lower values reduce the impact of page length
                }
            };

            // Initialize pagefind for either mobile or desktop, not both
            if (window.innerWidth <= 640) {
                new PagefindUI({ element: "#mobile-search", ...searchOptions, showSubResults: false });
            } else {
                new PagefindUI({ element: "#search", ...searchOptions, showSubResults: true });
            }
        });
    </script>
</body>
</html>