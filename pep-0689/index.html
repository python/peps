
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>PEP 689 – Unstable C API tier | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png">
    <link rel="canonical" href="https://peps.python.org/pep-0689/">
    <link rel="stylesheet" href="../_static/style.css" type="text/css">
    <link rel="stylesheet" href="../_static/mq.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg-light">
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark">
    <link rel="alternate" type="application/rss+xml" title="Latest PEPs" href="https://peps.python.org/peps.rss">
    <meta property="og:title" content='PEP 689 – Unstable C API tier | peps.python.org'>
    <meta property="og:description" content="Some functions and types of the C-API are designated unstable, meaning that they will not change in patch (bugfix/security) releases, but may change between minor releases (e.g. between 3.11 and 3.12) without deprecation warnings.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://peps.python.org/pep-0689/">
    <meta property="og:site_name" content="Python Enhancement Proposals (PEPs)">
    <meta property="og:image" content="https://peps.python.org/_static/og-image.png">
    <meta property="og:image:alt" content="Python PEPs">
    <meta property="og:image:width" content="200">
    <meta property="og:image:height" content="200">
    <meta name="description" content="Some functions and types of the C-API are designated unstable, meaning that they will not change in patch (bugfix/security) releases, but may change between minor releases (e.g. between 3.11 and 3.12) without deprecation warnings.">
    <meta name="theme-color" content="#3776ab">
</head>
<body>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-sun-half" viewBox="0 0 24 24" pointer-events="all">
    <title>Following system colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9"></circle>
      <path d="M12 3v18m0-12l4.65-4.65M12 14.3l7.37-7.37M12 19.6l8.85-8.85"></path>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected dark colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected light colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
</svg>
    <script>

        document.documentElement.dataset.colour_scheme = localStorage.getItem("colour_scheme") || "auto"
    </script>
    <section id="pep-page-section">
        <header>
            <h1 data-pagefind-ignore>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 689</li>
            </ul>
            <button id="colour-scheme-cycler" onClick="setColourScheme(nextColourScheme())">
                <svg aria-hidden="true" class="colour-scheme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-dark"><use href="#svg-moon"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-light"><use href="#svg-sun"></use></svg>
                <span class="visually-hidden">Toggle light / dark / auto colour theme</span>
            </button>
        </header>
        
        <div id="mobile-search" class="mobile-search-container"></div>
        
        <article data-pagefind-body>
            
            <span data-pagefind-meta="title:PEP 689 – Unstable C API tier" data-pagefind-weight="10" class="visually-hidden">PEP 689 – Unstable C API tier</span>
            <section id="pep-content">
<h1 class="page-title">PEP 689 – Unstable C API tier</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd">Petr Viktorin &lt;encukou&#32;&#97;t&#32;gmail.com&gt;</dd>
<dt class="field-even">Discussions-To<span class="colon">:</span></dt>
<dd class="field-even"><a class="reference external" href="https://discuss.python.org/t/pep-689-unstable-c-api-tier/20452">Discourse thread</a></dd>
<dt class="field-odd">Status<span class="colon">:</span></dt>
<dd class="field-odd"><abbr title="Accepted and implementation complete, or no longer active">Final</abbr></dd>
<dt class="field-even">Type<span class="colon">:</span></dt>
<dd class="field-even"><abbr title="Normative PEP with a new feature for Python, implementation change for CPython or interoperability standard for the ecosystem">Standards Track</abbr></dd>
<dt class="field-odd">Requires<span class="colon">:</span></dt>
<dd class="field-odd"><a class="reference external" href="../pep-0523/">523</a></dd>
<dt class="field-even">Created<span class="colon">:</span></dt>
<dd class="field-even">22-Apr-2022</dd>
<dt class="field-odd">Python-Version<span class="colon">:</span></dt>
<dd class="field-odd">3.12</dd>
<dt class="field-even">Post-History<span class="colon">:</span></dt>
<dd class="field-even"><a class="reference external" href="https://mail.python.org/archives/list/python-dev&#64;python.org/thread/PQXSP7E2B6KNXTJ2AERWMKKX42YP5D6O/" title="Python-Dev thread">27-Apr-2022</a>,
<a class="reference external" href="https://discuss.python.org/t/c-api-what-should-the-leading-underscore-py-mean/18486" title="Discourse thread">25-Aug-2022</a>,
<a class="reference external" href="https://discuss.python.org/t/pep-689-unstable-c-api-tier/20452" title="Discourse thread">27-Oct-2022</a></dd>
<dt class="field-odd">Resolution<span class="colon">:</span></dt>
<dd class="field-odd"><a class="reference external" href="https://discuss.python.org/t/pep-689-unstable-c-api-tier/20452/13">Discourse message</a></dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Table of Contents</summary><ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation-rationale">Motivation &amp; Rationale</a><ul>
<li><a class="reference internal" href="#unstable-c-api-tier">Unstable C API tier</a></li>
<li><a class="reference internal" href="#reserving-leading-underscores-for-private-api">Reserving leading underscores for Private API</a></li>
<li><a class="reference internal" href="#not-breaking-code-unnecessarily">Not breaking code unnecessarily</a></li>
</ul>
</li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#leading-underscore">Leading underscore</a></li>
<li><a class="reference internal" href="#initial-unstable-api">Initial unstable API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#how-to-teach-this">How to Teach This</a></li>
<li><a class="reference internal" href="#reference-implementation">Reference Implementation</a></li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#no-special-prefix">No special prefix</a></li>
<li><a class="reference internal" href="#underscore-prefix">Underscore prefix</a></li>
<li><a class="reference internal" href="#new-header-directory">New header directory</a></li>
<li><a class="reference internal" href="#python-api">Python API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<div class="pep-banner canonical-doc sticky-banner admonition important">
<p class="admonition-title">Important</p>
<p>This PEP is a historical document. The up-to-date, canonical documentation can now be found at <a class="reference external" href="https://devguide.python.org/developer-workflow/c-api/#c-api" title="(in Python Developer's Guide)"><span>Changing Python’s C API</span></a>.</p>
<p class="close-button">×</p>
<p>User-facing documentation is at <a class="reference external" href="https://docs.python.org/3.12/c-api/stable.html#unstable-c-api" title="(in Python v3.12)"><span>Unstable C API</span></a>.</p>
<p>See <a class="pep reference internal" href="../pep-0001/" title="PEP 1 – PEP Purpose and Guidelines">PEP 1</a> for how to propose changes.</p>
</div>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract" role="doc-backlink">Abstract</a></h2>
<p>Some functions and types of the C-API are designated <em>unstable</em>,
meaning that they will not change in patch (bugfix/security) releases,
but may change between minor releases (e.g. between 3.11 and 3.12) without
deprecation warnings.</p>
<p>Any C API with a leading underscore is designated <em>internal</em>, meaning that it
may change or disappear without any notice.</p>
</section>
<section id="motivation-rationale">
<h2><a class="toc-backref" href="#motivation-rationale" role="doc-backlink">Motivation &amp; Rationale</a></h2>
<section id="unstable-c-api-tier">
<h3><a class="toc-backref" href="#unstable-c-api-tier" role="doc-backlink">Unstable C API tier</a></h3>
<p>The Python C-API is currently divided into <a class="reference external" href="https://devguide.python.org/developer-workflow/c-api/index.html">three stability tiers</a>:</p>
<ul class="simple">
<li>Limited API, with high compatibility expectations</li>
<li>Public API, which follows the <a class="pep reference internal" href="../pep-0387/" title="PEP 387 – Backwards Compatibility Policy">backwards compatibility policy</a>, and requires deprecation warnings before changes</li>
<li>Internal (private) API, which can change at any time.</li>
</ul>
<p>Tools requiring access to CPython internals (e.g. advanced
debuggers and JIT compilers) are often built for minor series releases
of CPython, and assume that the C-API internals used do not change
in patch releases. To support these tools, we need a tier between the
Public and Private C-API, with guarantees on stability throughout
the minor-series release: the proposed <em>Unstable tier</em>.</p>
<p>Some functions, like <code class="docutils literal notranslate"><span class="pre">PyCode_New()</span></code>, are documented as unstable
(“Calling [it] directly can bind you to a precise Python version”),
and also often change in practice.
The unstable tier should make their status obvious even to people who don’t
read the docs carefully enough, making them hard to use accidentally.</p>
</section>
<section id="reserving-leading-underscores-for-private-api">
<h3><a class="toc-backref" href="#reserving-leading-underscores-for-private-api" role="doc-backlink">Reserving leading underscores for Private API</a></h3>
<p>Currently, CPython developers don’t agree on the exact meaning of a leading
underscore in API names.
It is used to mean two different things:</p>
<ul class="simple">
<li>API that may change between minor releases, as in the Unstable tier proposed
here (e.g. functions introduced in <a class="pep reference internal" href="../pep-0523/" title="PEP 523 – Adding a frame evaluation API to CPython">PEP 523</a>).</li>
<li>API that is <em>private</em> and should not be used outside of CPython at all
(e.g. because it may change without notice, or it relies on undocumented
assumptions that non-CPython code cannot guarantee).</li>
</ul>
<p>The unclear meaning makes the underscore less useful than it could be.
If it only marked <em>private</em> API, CPython developers could change underscored
functions, or remove unused ones, without researching how they’re
documented or used outside CPython.</p>
<p>With the introduction of a dedicated unstable tier, we can clarify the meaning
of the leading underscore. It should mark private API only.</p>
</section>
<section id="not-breaking-code-unnecessarily">
<h3><a class="toc-backref" href="#not-breaking-code-unnecessarily" role="doc-backlink">Not breaking code unnecessarily</a></h3>
<p>This PEP specifies that API in the unstable tier should have a special name
prefix. This means functions (macros, etc.) will need to be renamed.
After a rename, the old name should continue to be available until
an incompatible change is made (i.e. until call sites need to be updated
anyway).
In other words, just changing the tier of a function shouldn’t break users’
code.</p>
</section>
</section>
<section id="specification">
<h2><a class="toc-backref" href="#specification" role="doc-backlink">Specification</a></h2>
<p>The C API is divided by stability expectations into <a class="reference external" href="https://devguide.python.org/developer-workflow/c-api/index.html">three “sections”</a>
(internal, public, and limited).
We’ll now call these <em>stability tiers</em>, or <em>tiers</em> for short.</p>
<p>An <em>Unstable tier</em> will be added.</p>
<p>APIs (functions, types, etc.) in this tier will named with the <code class="docutils literal notranslate"><span class="pre">PyUnstable_</span></code>
prefix, with no leading underscore.</p>
<p>They will be declared in headers used for public API (<code class="docutils literal notranslate"><span class="pre">Include/*.h</span></code>,
rather than in a subdirectory like <code class="docutils literal notranslate"><span class="pre">Include/unstable/</span></code>).</p>
<p>Several rules for dealing with the unstable tier will be introduced:</p>
<ul>
<li>Unstable API should have no backwards-incompatible
changes across patch releases, but may change or be removed in minor
releases (3.x.0, including Alpha and Beta releases of 3.x.0).
Such changes must be documented and mentioned in the What’s New document.</li>
<li>Backwards-incompatible changes to these APIs should be made so that
code that uses them will need to be updated to compile with
the new version (e.g. arguments should be added/removed, or a function should
be renamed, but the semantic meaning of an argument should not change).</li>
<li>Unstable API should be documented and tested.</li>
<li>To move an API from the public tier to the unstable tier, it should be
exposed under the new <code class="docutils literal notranslate"><span class="pre">PyUnstable_*</span></code> name.<p>The old name should be deprecated (e.g. with <code class="docutils literal notranslate"><span class="pre">Py_DEPRECATED</span></code>), but
continue to be available until an incompatible change is made to the API.
Per Python’s backwards compatibility policy (<a class="pep reference internal" href="../pep-0387/" title="PEP 387 – Backwards Compatibility Policy">PEP 387</a>), this deprecation
needs to last <em>at least</em> two releases (without an SC exceptions).
But it can also last indefinitely – for example, if <a class="pep reference internal" href="../pep-0590/" title="PEP 590 – Vectorcall: a fast calling protocol for CPython">PEP 590</a>’s
<a class="pep reference internal" href="../pep-0590/#finalizing-the-api" title="PEP 590 – Vectorcall: a fast calling protocol for CPython § Finalizing the API">“provisional”</a>
<code class="docutils literal notranslate"><span class="pre">_PyObject_Vectorcall</span></code> was added today, it would be initially named
<code class="docutils literal notranslate"><span class="pre">PyUnstable_Object_Vectorcall</span></code> and there would be no plan to remove
this name.</p>
<p>In the following cases, an incompatible change (and thus removing the
deprecated name) is allowed without an SC exception, as if the function was
already part of the Unstable tier:</p>
<ul class="simple">
<li>Any API introduced before Python 3.12 that is <em>documented</em> to be less
stable than default.</li>
<li>Any API introduced before Python 3.12 that was named with a leading
underscore.</li>
</ul>
<p>For examples, see the <a class="reference internal" href="#initial-unstable-api">initial unstable API</a>
specified in this PEP.</p>
</li>
<li>To move an <em>internal</em> API to the unstable tier, it should be
exposed under the new <code class="docutils literal notranslate"><span class="pre">PyUnstable_*</span></code> name.<p>If the old name is documented, or widely used externally,
it should continue to be available until an
incompatible change is made (and call sites need to be updated).
It should start raising deprecation warnings (e.g. using <code class="docutils literal notranslate"><span class="pre">Py_DEPRECATED</span></code>).</p>
</li>
<li>To move an API from the unstable tier to the public tier, it should be
exposed without the <code class="docutils literal notranslate"><span class="pre">PyUnstable_*</span></code> prefix.<p>The old name should remain available until the API is deprecated or removed.</p>
</li>
<li>Adding new unstable API <em>for existing features</em> is allowed even after
Beta feature freeze, up until the first Release Candidate.
Consensus on Core Development Discourse or is needed in the Beta period.</li>
</ul>
<p>These rules will be documented in the <a class="reference external" href="https://devguide.python.org/developer-workflow/c-api/index.html">devguide</a>,
and <a class="reference external" href="https://docs.python.org/3/c-api/stable.html">user documentation</a>
will be updated accordingly.</p>
<p>Reference docs for C API named <code class="docutils literal notranslate"><span class="pre">PyUnstable_*</span></code> will automatically show
notes with links to the unstable tier documentation.</p>
<section id="leading-underscore">
<h3><a class="toc-backref" href="#leading-underscore" role="doc-backlink">Leading underscore</a></h3>
<p>C API named with a leading underscore, as well as API only available with
<code class="docutils literal notranslate"><span class="pre">Py_BUILD_CORE</span></code>, will be considered <em>internal</em>.
This means:</p>
<ul>
<li>It may change or be removed <em>without notice</em> in minor
releases (3.x.0, including Alpha and Beta releases of 3.x.0).
API changes in patch releases or Release Candidates should only be done if
absolutely necessary.</li>
<li>It should be documented in source comments or Devguide only, not in the
public documentation.</li>
<li>API introduced before Python 3.12 that is documented or widely used
externally should be moved to the Unstable tier as explained above.<p>This might happen long after this PEP is accepted.
Consequently, for a few years core devs should do some research before
changing underscored API, especially if it doesn’t need <code class="docutils literal notranslate"><span class="pre">Py_BUILD_CORE</span></code>.</p>
</li>
</ul>
<p>Users of the C API are encouraged to search their codebase for <code class="docutils literal notranslate"><span class="pre">_Py</span></code> and
<code class="docutils literal notranslate"><span class="pre">_PY</span></code> identifier prefixes, and treat any hits as issues to be eventually
fixed – either by switching to an existing alternative, or by opening
a CPython issue to request exposing public API for their use case,
and eventually switching to that.</p>
</section>
<section id="initial-unstable-api">
<h3><a class="toc-backref" href="#initial-unstable-api" role="doc-backlink">Initial unstable API</a></h3>
<p>The following API will be moved to the Unstable tier in the initial
implementation as proof of the concept.</p>
<p>Code object constructors:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PyUnstable_Code_New()</span></code> (renamed from <code class="docutils literal notranslate"><span class="pre">PyCode_New</span></code>)</li>
<li><code class="docutils literal notranslate"><span class="pre">PyUnstable_Code_NewWithPosOnlyArgs()</span></code> (renamed from <code class="docutils literal notranslate"><span class="pre">PyCode_NewWithPosOnlyArgs</span></code>)</li>
</ul>
<p>Code extra information (<a class="pep reference internal" href="../pep-0523/" title="PEP 523 – Adding a frame evaluation API to CPython">PEP 523</a>):</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PyUnstable_Eval_RequestCodeExtraIndex()</span></code> (renamed from <code class="docutils literal notranslate"><span class="pre">_PyEval_RequestCodeExtraIndex</span></code>)</li>
<li><code class="docutils literal notranslate"><span class="pre">PyUnstable_Code_GetExtra()</span></code> (renamed from <code class="docutils literal notranslate"><span class="pre">_PyCode_GetExtra</span></code>)</li>
<li><code class="docutils literal notranslate"><span class="pre">PyUnstable_Code_SetExtra()</span></code> (renamed from <code class="docutils literal notranslate"><span class="pre">_PyCode_SetExtra</span></code>)</li>
</ul>
<p>More are expected in Python 3.12, without the need for another PEP.</p>
</section>
</section>
<section id="backwards-compatibility">
<h2><a class="toc-backref" href="#backwards-compatibility" role="doc-backlink">Backwards Compatibility</a></h2>
<p>The C API backwards compatibility expectations will be made clearer.</p>
<p>All renamed API will be available under old names for as long as feasible.</p>
</section>
<section id="how-to-teach-this">
<h2><a class="toc-backref" href="#how-to-teach-this" role="doc-backlink">How to Teach This</a></h2>
<p>The changes affect advanced C programmers, who should consult the
updated reference documentation, devguide and/or What’s New document.</p>
</section>
<section id="reference-implementation">
<h2><a class="toc-backref" href="#reference-implementation" role="doc-backlink">Reference Implementation</a></h2>
<p><a class="reference external" href="https://github.com/python/cpython/compare/main...encukou:unstable-tier">https://github.com/python/cpython/compare/main…encukou:unstable-tier</a></p>
</section>
<section id="rejected-ideas">
<h2><a class="toc-backref" href="#rejected-ideas" role="doc-backlink">Rejected Ideas</a></h2>
<section id="no-special-prefix">
<h3><a class="toc-backref" href="#no-special-prefix" role="doc-backlink">No special prefix</a></h3>
<p>In the initial version of this PEP, unstable API didn’t have the <code class="docutils literal notranslate"><span class="pre">PyUnstable</span></code>
prefix.
Instead, defining <code class="docutils literal notranslate"><span class="pre">Py_USING_UNSTABLE_API</span></code> made the API available in a given
source file, signifying acknowledgement that the file as a whole will
potentially need to be revisited for each Python release.</p>
<p>However, it was decided that unstable-ness needs to be exposed
in the individual names.</p>
</section>
<section id="underscore-prefix">
<h3><a class="toc-backref" href="#underscore-prefix" role="doc-backlink">Underscore prefix</a></h3>
<p>It would be possible to mark both private and unstable API with
leading underscores.
However, that would dilute the meaning of <code class="docutils literal notranslate"><span class="pre">_Py</span></code> prefix.
Reserving the prefix for internal API only makes it trivial to search for.</p>
</section>
<section id="new-header-directory">
<h3><a class="toc-backref" href="#new-header-directory" role="doc-backlink">New header directory</a></h3>
<p>Other API tiers have dedicated directories for headers
(<code class="docutils literal notranslate"><span class="pre">Include/cpython/</span></code>, <code class="docutils literal notranslate"><span class="pre">Include/internal/</span></code>).</p>
<p>Since the unstable tier uses a very obvious naming convention
and the names are always available,
a directory like <code class="docutils literal notranslate"><span class="pre">Include/unstable/</span></code> is unnecessary.</p>
</section>
<section id="python-api">
<h3><a class="toc-backref" href="#python-api" role="doc-backlink">Python API</a></h3>
<p>It might be good to add a similar tier in the Python (not C) API,
e.g. for <code class="docutils literal notranslate"><span class="pre">types.CodeType</span></code>.
However, the mechanism for that would need to be different.
This is outside the scope of the PEP.</p>
</section>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright" role="doc-backlink">Copyright</a></h2>
<p>This document is placed in the public domain or under the
CC0-1.0-Universal license, whichever is more permissive.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/peps/pep-0689.rst">https://github.com/python/peps/blob/main/peps/pep-0689.rst</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/peps/pep-0689.rst">2025-02-01 08:55:40 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <div id="search"></div>
            <h2>Contents</h2>
            <ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation-rationale">Motivation &amp; Rationale</a><ul>
<li><a class="reference internal" href="#unstable-c-api-tier">Unstable C API tier</a></li>
<li><a class="reference internal" href="#reserving-leading-underscores-for-private-api">Reserving leading underscores for Private API</a></li>
<li><a class="reference internal" href="#not-breaking-code-unnecessarily">Not breaking code unnecessarily</a></li>
</ul>
</li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#leading-underscore">Leading underscore</a></li>
<li><a class="reference internal" href="#initial-unstable-api">Initial unstable API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#how-to-teach-this">How to Teach This</a></li>
<li><a class="reference internal" href="#reference-implementation">Reference Implementation</a></li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#no-special-prefix">No special prefix</a></li>
<li><a class="reference internal" href="#underscore-prefix">Underscore prefix</a></li>
<li><a class="reference internal" href="#new-header-directory">New header directory</a></li>
<li><a class="reference internal" href="#python-api">Python API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br>
            <a id="source" href="https://github.com/python/peps/blob/main/peps/pep-0689.rst?plain=1">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
    <script src="../_static/sticky_banner.js"></script>
    <script src="https://analytics.python.org/js/script.outbound-links.js"
            data-domain="peps.python.org" defer></script>
    <script src="/pagefind/pagefind-ui.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            // Ranking configuration to boost exact title matches
            const searchOptions = {
                ranking: {
                    termSimilarity: 9.0, // Higher values favor exact matches
                    termFrequency: 0.5, // Lower values reduce penalty for low term frequency
                    pageLength: 0.2, // Lower values reduce the impact of page length
                }
            };

            // Initialize pagefind for either mobile or desktop, not both
            if (window.innerWidth <= 640) {
                new PagefindUI({ element: "#mobile-search", ...searchOptions, showSubResults: false });
            } else {
                new PagefindUI({ element: "#search", ...searchOptions, showSubResults: true });
            }
        });
    </script>
</body>
</html>