
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>PEP 808 – Including static values in dynamic project metadata | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png">
    <link rel="canonical" href="https://peps.python.org/pep-0808/">
    <link rel="stylesheet" href="../_static/style.css" type="text/css">
    <link rel="stylesheet" href="../_static/mq.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg-light">
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark">
    <link rel="alternate" type="application/rss+xml" title="Latest PEPs" href="https://peps.python.org/peps.rss">
    <meta property="og:title" content='PEP 808 – Including static values in dynamic project metadata | peps.python.org'>
    <meta property="og:description" content="This PEP relaxes the constraint on dynamic metadata listed in the [project] section in pyproject.toml. It is now permitted to define a static portion of a dynamic metadata field in the [project] table as long as the field is a table or array.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://peps.python.org/pep-0808/">
    <meta property="og:site_name" content="Python Enhancement Proposals (PEPs)">
    <meta property="og:image" content="https://peps.python.org/_static/og-image.png">
    <meta property="og:image:alt" content="Python PEPs">
    <meta property="og:image:width" content="200">
    <meta property="og:image:height" content="200">
    <meta name="description" content="This PEP relaxes the constraint on dynamic metadata listed in the [project] section in pyproject.toml. It is now permitted to define a static portion of a dynamic metadata field in the [project] table as long as the field is a table or array.">
    <meta name="theme-color" content="#3776ab">
</head>
<body>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-sun-half" viewBox="0 0 24 24" pointer-events="all">
    <title>Following system colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9"></circle>
      <path d="M12 3v18m0-12l4.65-4.65M12 14.3l7.37-7.37M12 19.6l8.85-8.85"></path>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected dark colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected light colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
</svg>
    <script>

        document.documentElement.dataset.colour_scheme = localStorage.getItem("colour_scheme") || "auto"
    </script>
    <section id="pep-page-section">
        <header>
            <h1 data-pagefind-ignore>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 808</li>
            </ul>
            <button id="colour-scheme-cycler" onClick="setColourScheme(nextColourScheme())">
                <svg aria-hidden="true" class="colour-scheme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-dark"><use href="#svg-moon"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-light"><use href="#svg-sun"></use></svg>
                <span class="visually-hidden">Toggle light / dark / auto colour theme</span>
            </button>
        </header>
        
        <div id="mobile-search" class="mobile-search-container"></div>
        
        <article data-pagefind-body>
            
            <span data-pagefind-meta="title:PEP 808 – Including static values in dynamic project metadata" data-pagefind-weight="10" class="visually-hidden">PEP 808 – Including static values in dynamic project metadata</span>
            <section id="pep-content">
<h1 class="page-title">PEP 808 – Including static values in dynamic project metadata</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd">Henry Schreiner &lt;henryschreineriii&#32;&#97;t&#32;gmail.com&gt;,
Cristian Le &lt;python&#32;&#97;t&#32;lecris.dev&gt;</dd>
<dt class="field-even">Sponsor<span class="colon">:</span></dt>
<dd class="field-even">Filipe Laíns &lt;lains&#32;&#97;t&#32;python.org&gt;</dd>
<dt class="field-odd">PEP-Delegate<span class="colon">:</span></dt>
<dd class="field-odd">Paul Moore &lt;p.f.moore&#32;&#97;t&#32;gmail.com&gt;</dd>
<dt class="field-even">Discussions-To<span class="colon">:</span></dt>
<dd class="field-even"><a class="reference external" href="https://discuss.python.org/t/104883">Discourse thread</a></dd>
<dt class="field-odd">Status<span class="colon">:</span></dt>
<dd class="field-odd"><abbr title="Proposal under active discussion and revision">Draft</abbr></dd>
<dt class="field-even">Type<span class="colon">:</span></dt>
<dd class="field-even"><abbr title="Normative PEP with a new feature for Python, implementation change for CPython or interoperability standard for the ecosystem">Standards Track</abbr></dd>
<dt class="field-odd">Topic<span class="colon">:</span></dt>
<dd class="field-odd"><a class="reference external" href="../topic/packaging/">Packaging</a></dd>
<dt class="field-even">Created<span class="colon">:</span></dt>
<dd class="field-even">19-Sep-2025</dd>
<dt class="field-odd">Post-History<span class="colon">:</span></dt>
<dd class="field-odd"><a class="reference external" href="https://discuss.python.org/t/88608" title="Discourse thread">17-Apr-2025</a>,
<a class="reference external" href="https://discuss.python.org/t/104883" title="Discourse thread">14-Nov-2025</a></dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Table of Contents</summary><ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a><ul>
<li><a class="reference internal" href="#use-cases">Use Cases</a></li>
<li><a class="reference internal" href="#example-pinning">Example: pinning</a></li>
<li><a class="reference internal" href="#future-updates">Future Updates</a></li>
</ul>
</li>
<li><a class="reference internal" href="#terminology">Terminology</a></li>
<li><a class="reference internal" href="#specification">Specification</a></li>
<li><a class="reference internal" href="#reference-implementation">Reference Implementation</a></li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#security-implications">Security Implications</a></li>
<li><a class="reference internal" href="#how-to-teach-this">How to Teach This</a></li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#special-case-some-fields-without-adding-dynamic">Special case some fields without adding dynamic</a></li>
<li><a class="reference internal" href="#include-string-fields">Include string fields</a></li>
<li><a class="reference internal" href="#fully-remove-restrictions-on-backends">Fully remove restrictions on backends</a></li>
<li><a class="reference internal" href="#allow-simplifications">Allow simplifications</a></li>
<li><a class="reference internal" href="#add-a-general-mechanism-to-specify-dynamic-metadata">Add a general mechanism to specify dynamic-metadata</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract" role="doc-backlink">Abstract</a></h2>
<p>This PEP relaxes the constraint on dynamic metadata listed in the <code class="docutils literal notranslate"><span class="pre">[project]</span></code>
section in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>. It is now permitted to define a static portion
of a dynamic metadata field in the <code class="docutils literal notranslate"><span class="pre">[project]</span></code> table as long as the field is
a table or array.</p>
<p>This allows users to opt into allowing a backend to extend metadata while still
keeping the static portions of the metadata defined in the standard location in
<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>, and allows inspection tools to still be able to process the
static portions of the metadata.</p>
</section>
<section id="motivation">
<h2><a class="toc-backref" href="#motivation" role="doc-backlink">Motivation</a></h2>
<p>In the core metadata specification originally set out in <a class="pep reference internal" href="../pep-0621/" title="PEP 621 – Storing project metadata in pyproject.toml">PEP 621</a>, metadata
can be specified in three ways. First, it can be listed in the <code class="docutils literal notranslate"><span class="pre">[project]</span></code>
table.  This makes it statically inferable, meaning any tool (not just the
build backend) can reliably compute the value. Second, a field can be listed in
the <code class="docutils literal notranslate"><span class="pre">project.dynamic</span></code> list, which allows the build backend to compute the
value.  Finally, a value could be missing from both the <code class="docutils literal notranslate"><span class="pre">project</span></code> table and
the <code class="docutils literal notranslate"><span class="pre">project.dynamic</span></code> list, in which case the matching metadata is guaranteed
to be empty.</p>
<p>This system provided two important benefits to Python packaging. A standard
specification that all major backends have now adopted makes teaching much
easier; a single tutorial is now sufficient to cover the metadata portion of
configuring any backend. Users can now switch from a general purpose backend to
a specialized backend without changing their static metadata. Tooling like
schema validation tools can verify and catch configuration mistakes.</p>
<p>The second benefit is improved support for static tools that read the source
files looking for metadata. This is useful for dependency chain analysis, such
as creating “used by” and “uses” graphs. It is used for code quality tooling to
detect the minimum supported version of Python. It is used by <a class="reference external" href="https://cibuildwheel.pypa.io">cibuildwheel</a> to
automatically avoid building wheels that are not supported. It is not used,
however, to avoid wheel builds when the SDist is available; that was addressed
by METADATA 2.2, which added a <code class="docutils literal notranslate"><span class="pre">Dynamic</span></code> field in the SDist metadata that
lets a tool know if the metadata can change when making a wheel - this is an
easy mistake to make due to the similarity of the names.</p>
<p>Due to the rapidly increasing popularity of the project table, support from all
major backends, and a rise of backends supporting complex compiled extensions,
an issue with the restrictions applied in <a class="pep reference internal" href="../pep-0621/" title="PEP 621 – Storing project metadata in pyproject.toml">PEP 621</a> is becoming more apparent.
In PEP 621, the metadata choice is all-or-nothing; metadata must be completely
static, or listed in the dynamic field and completely absent from the static
definition. For the most common use cases, this is fine; there is little
benefit to set the <code class="docutils literal notranslate"><span class="pre">version</span></code> statically if you are going to override it
dynamically. If you are using a custom README processor to filter or modify the
README for proper display, it’s not a big deal to have to specify the
configuration in a custom <code class="docutils literal notranslate"><span class="pre">[tool.*]</span></code> section. But there is a specific class
of cases where the all-or-nothing approach is problematic: lists of items where
the backend needs to add items are currently forced to be fully dynamically
specified (that is, in a backend-specific configuration location). This causes
both of the original benefits (standard location and static tooling support) to
be lost.</p>
</section>
<section id="rationale">
<h2><a class="toc-backref" href="#rationale" role="doc-backlink">Rationale</a></h2>
<p><a class="pep reference internal" href="../pep-0621/" title="PEP 621 – Storing project metadata in pyproject.toml">PEP 621</a> includes the following statement:</p>
<blockquote>
<div>In an earlier version of this PEP, tools were allowed to extend data for
fields. For instance, build back-ends could take the version number and add
a local version for when they built the wheel. Tools could also add more
trove classifiers for things like the license or supported Python versions.<p>In the end, though, it was thought better to start out stricter and
contemplate loosening how static the data could be considered based on
real-world usage.</p>
</div></blockquote>
<p>In this PEP, we are proposing a limited and explicit loosening of the
restrictions on the <code class="docutils literal notranslate"><span class="pre">[project]</span></code> table and <code class="docutils literal notranslate"><span class="pre">project.dynamic</span></code> list.</p>
<p>Every list and every table with arbitrary keys will now be allowed to be
specified both statically, in the <code class="docutils literal notranslate"><span class="pre">[project]</span></code> table, and in the
<code class="docutils literal notranslate"><span class="pre">project.dynamic</span></code> list. If it is present in both places, the build backend
can extend list items and add new keys, but not modify existing entries.</p>
<section id="use-cases">
<h3><a class="toc-backref" href="#use-cases" role="doc-backlink">Use Cases</a></h3>
<p>There is an entire class of metadata fields where advanced use cases
would really benefit from a relaxation of this rule. Here are some use
cases that have come up:</p>
<ul class="simple">
<li>Pinning dependency requirements when building the wheel. When building
<a class="reference external" href="https://pytorch.org/">PyTorch</a> extensions, for example, the version you build with adds a constraint
to the wheel you create that is not present with the SDist.</li>
<li>Generating extra scripts from a build system (this is currently proposed in
<a class="reference external" href="https://github.com/scikit-build/scikit-build-core">scikit-build-core</a>).</li>
<li>Adding entry points dynamically (<a class="reference external" href="https://pypi.org/project/validate-pyproject-schema-store/">validate-pyproject-schema-store</a> could have
used this to generate an entry point for each schema present in the package).</li>
<li>Adding dependencies or optional dependencies based on configuration (such as
making an all dependency, or reading dependencies from dependency-groups, for
example). Adding constraints can also be useful; <a class="reference external" href="https://github.com/pybind/pybind11">pybind11</a> uses a <code class="docutils literal notranslate"><span class="pre">global</span></code>
extra that pins <code class="docutils literal notranslate"><span class="pre">pybind11-global==&lt;version&gt;</span></code>, as both packages are in the
same repository and released in sync. <a class="reference external" href="https://github.com/beeware/toga">toga</a> is a collection of packages that
is currently unable to set any static dependencies due to the same sort of
pinning problem.</li>
<li>Adding classifiers; some backends can compute classifiers from other places
and inject them (<a class="reference external" href="https://python-poetry.org/">Poetry</a> being the best known example).</li>
<li>Adding license files to the wheel based on what libraries are linked in (this
is an active discussion in follow-up to <a class="pep reference internal" href="../pep-0639/" title="PEP 639 – Improving License Clarity with Better Package Metadata">PEP 639</a>).</li>
<li>Adding SBOMs when building - <a class="pep reference internal" href="../pep-0770/" title="PEP 770 – Improving measurability of Python packages with Software Bill-of-Materials">PEP 770</a> had to remove the <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>
field specifically because you <em>want</em> the build tool to add these, so the
<code class="docutils literal notranslate"><span class="pre">[project]</span></code> table setting would be useless, you would almost never be able
to use it.</li>
<li>Adding generated modules to <code class="docutils literal notranslate"><span class="pre">import-names</span></code> or <code class="docutils literal notranslate"><span class="pre">import-namespaces</span></code> is
another example.</li>
</ul>
<p>All of these use cases have a similar feature: they are adding something
dynamically to a fixed list (possibly a narrower pin for the dependency case).</p>
<p>You can implement these today, but it requires providing a completely separate
configuration location for the non-extended portion, and static analysis tools
lose the ability to detect anything. Since the current solution is to move all
the metadata out of the standard field, this proposal will increase the
availability of metadata for static tooling.</p>
</section>
<section id="example-pinning">
<h3><a class="toc-backref" href="#example-pinning" role="doc-backlink">Example: pinning</a></h3>
<p>For example, say you want to allow an imaginary build backend
(<code class="docutils literal notranslate"><span class="pre">my-build-backend</span></code>) to pin to the supported build of <a class="reference external" href="https://pytorch.org/">PyTorch</a>.  Before this
PEP, you could do this:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[project]</span>
<span class="n">dynamic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;dependencies&quot;</span><span class="p">]</span>

<span class="k">[tool.my-build-backend]</span>
<span class="n">original-dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;torch&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;packaging&quot;</span><span class="p">]</span>
<span class="n">pin-to-build-versions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;torch=={exact}&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Which would effectively expand to the following SDist metadata:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Dynamic: Requires-Dist
Requires-Dist: packaging
Requires-Dist: torch
</pre></div>
</div>
<p>Which could then make a wheel with this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Requires-Dist: packaging
Requires-Dist: torch
Requires-Dist: torch==2.8.0
</pre></div>
</div>
<p>Static tooling can no longer tell that <code class="docutils literal notranslate"><span class="pre">torch</span></code> and <code class="docutils literal notranslate"><span class="pre">packaging</span></code> are runtime
dependencies, and the build backend has to duplicate the dependency table,
making it harder for users to learn and read; the standardized place proposed
by <a class="pep reference internal" href="../pep-0621/" title="PEP 621 – Storing project metadata in pyproject.toml">PEP 621</a> and adopted by all major build backends is lost.</p>
<p>With this PEP, this could now be specified like this:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[project]</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;torch&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;packaging&quot;</span><span class="p">]</span>
<span class="n">dynamic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;dependencies&quot;</span><span class="p">]</span>

<span class="k">[tool.my-build-backend]</span>
<span class="n">pin-to-build-versions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;torch=={exact}&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Static tooling can now detect the static dependencies, and the build backend no
longer needs to create and document a new location for the standard
<code class="docutils literal notranslate"><span class="pre">project.dependencies</span></code> field (the <code class="docutils literal notranslate"><span class="pre">original-dependencies</span></code> field above, for
example).</p>
</section>
<section id="future-updates">
<h3><a class="toc-backref" href="#future-updates" role="doc-backlink">Future Updates</a></h3>
<p>Loosening this rule to allow purely additive metadata should address many of
the use cases that have been seen in practice. If further changes are needed,
this can be revisited in a future PEP; this PEP neither recommends nor
precludes future updates like this.</p>
</section>
</section>
<section id="terminology">
<h2><a class="toc-backref" href="#terminology" role="doc-backlink">Terminology</a></h2>
<p>The keywords “MUST”, “MUST NOT”, “REQUIRED”,
“SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
in this document are to be interpreted as described in <span class="target" id="index-0"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2119.html"><strong>RFC 2119</strong></a>.</p>
</section>
<section id="specification">
<h2><a class="toc-backref" href="#specification" role="doc-backlink">Specification</a></h2>
<p>Any field that is comprised of a list or a table with arbitrary entries will
now be allowed to be present in both the <code class="docutils literal notranslate"><span class="pre">[project]</span></code> table and the
<code class="docutils literal notranslate"><span class="pre">project.dynamic</span></code> list. If a field is present in both places, then the build
backend is allowed to insert entries into the list or table, but not remove
entries, reorder entries, or modify the entries. Tables of arrays allow adding
a new table entry or extending an existing array according to the rules above.</p>
<p>The fields that are arrays or tables with arbitrary entries are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">authors</span></code>, <code class="docutils literal notranslate"><span class="pre">maintainers</span></code>: New author tables can be added to the list.
Existing authors cannot be modified (list of tables with pre-defined keys).</li>
<li><code class="docutils literal notranslate"><span class="pre">classifiers</span></code>: Classifiers can be added to the list.</li>
<li><code class="docutils literal notranslate"><span class="pre">dependencies</span></code>: New dependencies can be added, including more tightly
constrained existing dependencies.</li>
<li><code class="docutils literal notranslate"><span class="pre">entry-points</span></code>: Entry points can be added, to either new or existing
groups. Existing entry points cannot be changed or removed.</li>
<li><code class="docutils literal notranslate"><span class="pre">scripts</span></code>, <code class="docutils literal notranslate"><span class="pre">gui-scripts</span></code>: New scripts can be added. Existing ones cannot
be changed or removed.</li>
<li><code class="docutils literal notranslate"><span class="pre">keywords</span></code>: Keywords can be added to the list.</li>
<li><code class="docutils literal notranslate"><span class="pre">license-files</span></code>: Files can be added to the list.</li>
<li><code class="docutils literal notranslate"><span class="pre">optional-dependencies</span></code>: A new extra or new items can be added to an
existing extra.</li>
<li><code class="docutils literal notranslate"><span class="pre">urls</span></code>: New urls can be added. Existing ones cannot be changed or removed.</li>
<li><code class="docutils literal notranslate"><span class="pre">import-names</span></code>, <code class="docutils literal notranslate"><span class="pre">import-namespaces</span></code>: New import names or namespaces can
be added. Existing ones cannot be modified or removed.</li>
</ul>
<p>To add items, users must opt in by listing the field in <code class="docutils literal notranslate"><span class="pre">dynamic</span></code>; without
that, the metadata continues to be entirely static.</p>
<p>A backend SHOULD error if a field is specified and it does not support
extending that field, to protect against possible user error. We recommend
being as strict as possible to avoid unnecessary entries in the <code class="docutils literal notranslate"><span class="pre">dynamic</span></code>
list.</p>
<p>Static analysis tools, when detecting a field is both specified and in the
<code class="docutils literal notranslate"><span class="pre">project.dynamic</span></code> array, SHOULD assume the field is incomplete, allowing for
new entries to be present when the package is built.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Dynamic</span></code> field, as specified in <a class="pep reference internal" href="../pep-0643/" title="PEP 643 – Metadata for Package Source Distributions">PEP 643</a>, is unaffected by this PEP,
and backends can continue to fill it as they choose. However, a backend MUST
ensure that both the SDist and the wheel metadata include the static metadata
portion of the project table.</p>
</section>
<section id="reference-implementation">
<h2><a class="toc-backref" href="#reference-implementation" role="doc-backlink">Reference Implementation</a></h2>
<p>The choice to support dynamic metadata for each field is already left up to
backends, and this PEP simply relaxes restrictions on what a backend is allowed
to do with dynamic metadata.</p>
<p>The <a class="reference external" href="https://github.com/pypa/pyproject-metadata">pyproject-metadata</a> project, which is used by
several build backends, will need to modify the correctness check to account
for the possible extensions; this is in <a class="reference external" href="pyprojectmetadatapr">a draft PR</a>.</p>
<p>The <a class="reference external" href="https://github.com/scikit-build/dynamic-metadata">dynamic-metadata</a> project, which provides a plugin
system that backends can use to share dynamic metadata plugins, was designed to
allow this possibility, and a similar PR to the one above will allow additive
metadata.</p>
</section>
<section id="backwards-compatibility">
<h2><a class="toc-backref" href="#backwards-compatibility" role="doc-backlink">Backwards Compatibility</a></h2>
<p>Using metadata from SDists or wheels is unaffected. The METADATA version does
not need to be incremented.</p>
<p>This does not affect any existing <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> files, since this was
strictly not allowed before this PEP.</p>
<p>When users adopt this in a <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>, the backend must support it; an
error will be correctly generated if it doesn’t, following the previous
standard.  Frontends were never required to throw an error, though some
frontends may need to be updated to benefit from the partially static metadata.
Some frontends and other tooling may need updating, such as schema
validators, just like other <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> PEPs.</p>
<p>Static analysis tools may require updating to handle this change. Tools should
check the dynamic table first, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">match</span> <span class="n">pyproject</span><span class="p">[</span><span class="s2">&quot;project&quot;</span><span class="p">]:</span>
    <span class="c1"># New in PEP 808</span>
    <span class="k">case</span> <span class="p">{</span><span class="n">my</span><span class="o">.</span><span class="n">key</span><span class="p">:</span> <span class="n">value</span><span class="p">,</span> <span class="s2">&quot;dynamic&quot;</span><span class="p">:</span> <span class="n">dyn</span><span class="p">}</span> <span class="k">if</span> <span class="n">my</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="n">dyn</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Partial </span><span class="si">{</span><span class="n">my</span><span class="o">.</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">case</span> <span class="p">{</span><span class="s2">&quot;dynamic&quot;</span><span class="p">:</span> <span class="n">dyn</span><span class="p">}</span> <span class="k">if</span> <span class="n">my</span><span class="o">.</span><span class="n">key</span> <span class="ow">in</span> <span class="n">dyn</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fully dynamic </span><span class="si">{</span><span class="n">my</span><span class="o">.</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">case</span> <span class="p">{</span><span class="n">my</span><span class="o">.</span><span class="n">key</span><span class="p">:</span> <span class="n">value</span><span class="p">}:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fully static </span><span class="si">{</span><span class="n">my</span><span class="o">.</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No metadata for </span><span class="si">{</span><span class="n">my</span><span class="o">.</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Before this PEP, tools could reverse the order of the dynamic and static
blocks, assuming that an entry in the project table meant it could not be
dynamic. If they do this, they will now incorrectly assume they have all the
metadata for a field, when they in fact only have part of it.</p>
</section>
<section id="security-implications">
<h2><a class="toc-backref" href="#security-implications" role="doc-backlink">Security Implications</a></h2>
<p>There are no security concerns that are not already present, as this just adds
a static component to existing dynamic metadata support.</p>
</section>
<section id="how-to-teach-this">
<h2><a class="toc-backref" href="#how-to-teach-this" role="doc-backlink">How to Teach This</a></h2>
<p>If you currently have dynamic metadata, but some list or table entries are
known statically, you can now make that explicit by adding the static entry in
the <code class="docutils literal notranslate"><span class="pre">[project]</span></code> table, while also keeping the entry in the
<code class="docutils literal notranslate"><span class="pre">project.dynamic</span></code> list to allow the dynamic portion to be added by your build
backend.</p>
<p>The current guides that state metadata must not be listed in both <code class="docutils literal notranslate"><span class="pre">[project]</span></code>
and <code class="docutils literal notranslate"><span class="pre">project.dynamic</span></code> can be updated to say that lists and tables marked with
<code class="docutils literal notranslate"><span class="pre">project.dynamic</span></code> can still have static entries. Since dynamic metadata is
already an advanced concept, this will likely not affect most existing tutorial
material aimed at introductory packaging.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> <a class="reference external" href="pyprojectspec">specification</a> will be updated to
include the behavior of fields when specified and also listed in the dynamic
field.</p>
<p>It should also be noted that specifying something in <code class="docutils literal notranslate"><span class="pre">dynamic</span></code> will require
any tool that needs the full metadata to invoke the backend even if it is
partially statically specified. So, it should not be used unless necessary,
just like any other dynamic metadata.</p>
</section>
<section id="rejected-ideas">
<h2><a class="toc-backref" href="#rejected-ideas" role="doc-backlink">Rejected Ideas</a></h2>
<section id="special-case-some-fields-without-adding-dynamic">
<h3><a class="toc-backref" href="#special-case-some-fields-without-adding-dynamic" role="doc-backlink">Special case some fields without adding dynamic</a></h3>
<p>This has come up specifically for the pinning build dependency use case, but
could also be applied to more of the use cases listed. This would not cover all
the use cases seen, though, and an explicit, opt-in approach is better for
static tooling.</p>
</section>
<section id="include-string-fields">
<h3><a class="toc-backref" href="#include-string-fields" role="doc-backlink">Include string fields</a></h3>
<p>Some string fields could also be extended. Most notably, the <code class="docutils literal notranslate"><span class="pre">license</span></code> field
would benefit from being extendable, and due to the semantics of SPDX
expressions, extension could be defined through <code class="docutils literal notranslate"><span class="pre">AND</span></code>. This was not added to
this PEP because that would require individual fields to have custom semantics.</p>
<p>The other string fields, namely <code class="docutils literal notranslate"><span class="pre">version</span></code> and <code class="docutils literal notranslate"><span class="pre">requires-python</span></code> (<code class="docutils literal notranslate"><span class="pre">name</span></code>
is not allowed to be specified dynamically), have less reason to be extended.
Fixed key tables, like the deprecated <code class="docutils literal notranslate"><span class="pre">license.text</span></code>/<code class="docutils literal notranslate"><span class="pre">license.file</span></code> or
<code class="docutils literal notranslate"><span class="pre">readme.text</span></code>/<code class="docutils literal notranslate"><span class="pre">readme.file</span></code> also have no clear benefit being partially
dynamic.</p>
</section>
<section id="fully-remove-restrictions-on-backends">
<h3><a class="toc-backref" href="#fully-remove-restrictions-on-backends" role="doc-backlink">Fully remove restrictions on backends</a></h3>
<p>Another option would be to simply allow backends to do whatever they wanted if
a field is statically defined and in the dynamic array. This would sacrifice
the ability for static tooling to infer anything about the field, and could
potentially confuse users by allowing the backend to ignore or change what they
entered. This is not worse than the status quo for static tooling and dynamic
metadata, but the current proposal improves the ability of static tooling to
infer some things about dynamic fields. Knowing some of the dependencies is
better for most applications than not knowing anything about the dependencies,
for example.</p>
</section>
<section id="allow-simplifications">
<h3><a class="toc-backref" href="#allow-simplifications" role="doc-backlink">Allow simplifications</a></h3>
<p>An earlier draft of this PEP had a clause allowing backends to simplify some
types of fields; most notably dependency specifiers would have allowed
“tightening”, such as <code class="docutils literal notranslate"><span class="pre">torch</span></code> being replaced by <code class="docutils literal notranslate"><span class="pre">torch&gt;=1.2</span></code>, for example.
This was removed due to it being impossible to ensure a variation will resolve
identically on all resolvers within the current specification, and to simplify
the contract with backends. Any other simplifications would be purely cosmetic,
and so were left out. The order in the current PEP is now required to match the
original static metadata, with the dynamic portion only allowing insertions.</p>
</section>
<section id="add-a-general-mechanism-to-specify-dynamic-metadata">
<h3><a class="toc-backref" href="#add-a-general-mechanism-to-specify-dynamic-metadata" role="doc-backlink">Add a general mechanism to specify dynamic-metadata</a></h3>
<p>This PEP does not cover methods to specify dynamic metadata; that continues to
be entirely up to the backend. An earlier draft proposal did this, but it was
deemed better to develop that as a library (<a class="reference external" href="https://github.com/scikit-build/dynamic-metadata">dynamic-metadata</a>, for the curious)
instead. This may be revisited in the future.</p>
</section>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright" role="doc-backlink">Copyright</a></h2>
<p>This document is placed in the public domain or under the
CC0-1.0-Universal license, whichever is more permissive.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/peps/pep-0808.rst">https://github.com/python/peps/blob/main/peps/pep-0808.rst</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/peps/pep-0808.rst">2025-11-30 05:19:44 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <div id="search"></div>
            <h2>Contents</h2>
            <ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a><ul>
<li><a class="reference internal" href="#use-cases">Use Cases</a></li>
<li><a class="reference internal" href="#example-pinning">Example: pinning</a></li>
<li><a class="reference internal" href="#future-updates">Future Updates</a></li>
</ul>
</li>
<li><a class="reference internal" href="#terminology">Terminology</a></li>
<li><a class="reference internal" href="#specification">Specification</a></li>
<li><a class="reference internal" href="#reference-implementation">Reference Implementation</a></li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#security-implications">Security Implications</a></li>
<li><a class="reference internal" href="#how-to-teach-this">How to Teach This</a></li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#special-case-some-fields-without-adding-dynamic">Special case some fields without adding dynamic</a></li>
<li><a class="reference internal" href="#include-string-fields">Include string fields</a></li>
<li><a class="reference internal" href="#fully-remove-restrictions-on-backends">Fully remove restrictions on backends</a></li>
<li><a class="reference internal" href="#allow-simplifications">Allow simplifications</a></li>
<li><a class="reference internal" href="#add-a-general-mechanism-to-specify-dynamic-metadata">Add a general mechanism to specify dynamic-metadata</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br>
            <a id="source" href="https://github.com/python/peps/blob/main/peps/pep-0808.rst?plain=1">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
    <script src="../_static/sticky_banner.js"></script>
    <script src="https://analytics.python.org/js/script.outbound-links.js"
            data-domain="peps.python.org" defer></script>
    <script src="/pagefind/pagefind-ui.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            // Ranking configuration to boost exact title matches
            const searchOptions = {
                ranking: {
                    termSimilarity: 9.0, // Higher values favor exact matches
                    termFrequency: 0.5, // Lower values reduce penalty for low term frequency
                    pageLength: 0.2, // Lower values reduce the impact of page length
                }
            };

            // Initialize pagefind for either mobile or desktop, not both
            if (window.innerWidth <= 640) {
                new PagefindUI({ element: "#mobile-search", ...searchOptions, showSubResults: false });
            } else {
                new PagefindUI({ element: "#search", ...searchOptions, showSubResults: true });
            }
        });
    </script>
</body>
</html>