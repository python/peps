
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>PEP 616 – String methods to remove prefixes and suffixes | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png">
    <link rel="canonical" href="https://peps.python.org/pep-0616/">
    <link rel="stylesheet" href="../_static/style.css" type="text/css">
    <link rel="stylesheet" href="../_static/mq.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg-light">
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark">
    <link rel="alternate" type="application/rss+xml" title="Latest PEPs" href="https://peps.python.org/peps.rss">
    <meta property="og:title" content='PEP 616 – String methods to remove prefixes and suffixes | peps.python.org'>
    <meta property="og:description" content="This is a proposal to add two new methods, removeprefix() and removesuffix(), to the APIs of Python’s various string objects.  These methods would remove a prefix or suffix (respectively) from a string, if present, and would be added to Unicode str obje...">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://peps.python.org/pep-0616/">
    <meta property="og:site_name" content="Python Enhancement Proposals (PEPs)">
    <meta property="og:image" content="https://peps.python.org/_static/og-image.png">
    <meta property="og:image:alt" content="Python PEPs">
    <meta property="og:image:width" content="200">
    <meta property="og:image:height" content="200">
    <meta name="description" content="This is a proposal to add two new methods, removeprefix() and removesuffix(), to the APIs of Python’s various string objects.  These methods would remove a prefix or suffix (respectively) from a string, if present, and would be added to Unicode str obje...">
    <meta name="theme-color" content="#3776ab">
</head>
<body>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-sun-half" viewBox="0 0 24 24" pointer-events="all">
    <title>Following system colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9"></circle>
      <path d="M12 3v18m0-12l4.65-4.65M12 14.3l7.37-7.37M12 19.6l8.85-8.85"></path>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected dark colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected light colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
</svg>
    <script>

        document.documentElement.dataset.colour_scheme = localStorage.getItem("colour_scheme") || "auto"
    </script>
    <section id="pep-page-section">
        <header>
            <h1 data-pagefind-ignore>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 616</li>
            </ul>
            <button id="colour-scheme-cycler" onClick="setColourScheme(nextColourScheme())">
                <svg aria-hidden="true" class="colour-scheme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-dark"><use href="#svg-moon"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-light"><use href="#svg-sun"></use></svg>
                <span class="visually-hidden">Toggle light / dark / auto colour theme</span>
            </button>
        </header>
        
        <div id="mobile-search" class="mobile-search-container"></div>
        
        <article data-pagefind-body>
            
            <span data-pagefind-meta="title:PEP 616 – String methods to remove prefixes and suffixes" data-pagefind-weight="10" class="visually-hidden">PEP 616 – String methods to remove prefixes and suffixes</span>
            <section id="pep-content">
<h1 class="page-title">PEP 616 – String methods to remove prefixes and suffixes</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd">Dennis Sweeney &lt;sweeney.dennis650&#32;&#97;t&#32;gmail.com&gt;</dd>
<dt class="field-even">Sponsor<span class="colon">:</span></dt>
<dd class="field-even">Eric V. Smith &lt;eric&#32;&#97;t&#32;trueblade.com&gt;</dd>
<dt class="field-odd">Status<span class="colon">:</span></dt>
<dd class="field-odd"><abbr title="Accepted and implementation complete, or no longer active">Final</abbr></dd>
<dt class="field-even">Type<span class="colon">:</span></dt>
<dd class="field-even"><abbr title="Normative PEP with a new feature for Python, implementation change for CPython or interoperability standard for the ecosystem">Standards Track</abbr></dd>
<dt class="field-odd">Created<span class="colon">:</span></dt>
<dd class="field-odd">19-Mar-2020</dd>
<dt class="field-even">Python-Version<span class="colon">:</span></dt>
<dd class="field-even">3.9</dd>
<dt class="field-odd">Post-History<span class="colon">:</span></dt>
<dd class="field-odd">20-Mar-2020</dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Table of Contents</summary><ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#specification">Specification</a></li>
<li><a class="reference internal" href="#motivating-examples-from-the-python-standard-library">Motivating examples from the Python standard library</a><ul>
<li><a class="reference internal" href="#find-recursionlimit-py">find_recursionlimit.py</a></li>
<li><a class="reference internal" href="#deccheck-py">deccheck.py</a></li>
<li><a class="reference internal" href="#cookiejar-py">cookiejar.py</a></li>
<li><a class="reference internal" href="#test-i18n-py">test_i18n.py</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#expand-the-lstrip-and-rstrip-apis">Expand the lstrip and rstrip APIs</a></li>
<li><a class="reference internal" href="#remove-multiple-copies-of-a-prefix">Remove multiple copies of a prefix</a></li>
<li><a class="reference internal" href="#raising-an-exception-when-not-found">Raising an exception when not found</a></li>
<li><a class="reference internal" href="#accepting-a-tuple-of-affixes">Accepting a tuple of affixes</a></li>
<li><a class="reference internal" href="#alternative-method-names">Alternative Method Names</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-teach-this">How to Teach This</a></li>
<li><a class="reference internal" href="#reference-implementation">Reference Implementation</a></li>
<li><a class="reference internal" href="#history-of-major-revisions">History of Major revisions</a></li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract" role="doc-backlink">Abstract</a></h2>
<p>This is a proposal to add two new methods, <code class="docutils literal notranslate"><span class="pre">removeprefix()</span></code> and
<code class="docutils literal notranslate"><span class="pre">removesuffix()</span></code>, to the APIs of Python’s various string objects.  These
methods would remove a prefix or suffix (respectively) from a string,
if present, and would be added to Unicode <code class="docutils literal notranslate"><span class="pre">str</span></code> objects, binary
<code class="docutils literal notranslate"><span class="pre">bytes</span></code> and <code class="docutils literal notranslate"><span class="pre">bytearray</span></code> objects, and <code class="docutils literal notranslate"><span class="pre">collections.UserString</span></code>.</p>
</section>
<section id="rationale">
<h2><a class="toc-backref" href="#rationale" role="doc-backlink">Rationale</a></h2>
<p>There have been repeated issues on Python-Ideas <a class="footnote-reference brackets" href="#pyid" id="id1">[2]</a> <a class="footnote-reference brackets" href="#id10" id="id2">[3]</a>,
Python-Dev <a class="footnote-reference brackets" href="#id11" id="id3">[4]</a> <a class="footnote-reference brackets" href="#id12" id="id4">[5]</a> <a class="footnote-reference brackets" href="#id13" id="id5">[6]</a> <a class="footnote-reference brackets" href="#id14" id="id6">[7]</a>, the Bug Tracker, and
StackOverflow <a class="footnote-reference brackets" href="#confusion" id="id7">[8]</a>, related to user confusion about the
existing <code class="docutils literal notranslate"><span class="pre">str.lstrip</span></code> and <code class="docutils literal notranslate"><span class="pre">str.rstrip</span></code> methods.  These users are
typically expecting the behavior of <code class="docutils literal notranslate"><span class="pre">removeprefix</span></code> and <code class="docutils literal notranslate"><span class="pre">removesuffix</span></code>,
but they are surprised that the parameter for <code class="docutils literal notranslate"><span class="pre">lstrip</span></code> is
interpreted as a set of characters, not a substring.  This repeated
issue is evidence that these methods are useful.  The new methods
allow a cleaner redirection of users to the desired behavior.</p>
<p>As another testimonial for the usefulness of these methods, several
users on Python-Ideas <a class="footnote-reference brackets" href="#pyid" id="id8">[2]</a> reported frequently including similar
functions in their code for productivity.  The implementation
often contained subtle mistakes regarding the handling of the empty
string, so a well-tested built-in method would be useful.</p>
<p>The existing solutions for creating the desired behavior are to either
implement the methods as in the <a class="reference internal" href="#specification">Specification</a> below, or to use
regular expressions as in the expression
<code class="docutils literal notranslate"><span class="pre">re.sub('^'</span> <span class="pre">+</span> <span class="pre">re.escape(prefix),</span> <span class="pre">'',</span> <span class="pre">s)</span></code>, which is less discoverable,
requires a module import, and results in less readable code.</p>
</section>
<section id="specification">
<h2><a class="toc-backref" href="#specification" role="doc-backlink">Specification</a></h2>
<p>The builtin <code class="docutils literal notranslate"><span class="pre">str</span></code> class will gain two new methods which will behave
as follows when <code class="docutils literal notranslate"><span class="pre">type(self)</span> <span class="pre">is</span> <span class="pre">type(prefix)</span> <span class="pre">is</span> <span class="pre">type(suffix)</span> <span class="pre">is</span> <span class="pre">str</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">removeprefix</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">):]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">[:]</span>

<span class="k">def</span><span class="w"> </span><span class="nf">removesuffix</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">suffix</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="c1"># suffix=&#39;&#39; should not call self[:-0].</span>
    <span class="k">if</span> <span class="n">suffix</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">[:]</span>
</pre></div>
</div>
<p>When the arguments are instances of <code class="docutils literal notranslate"><span class="pre">str</span></code> subclasses, the methods should
behave as though those arguments were first coerced to base <code class="docutils literal notranslate"><span class="pre">str</span></code>
objects, and the return value should always be a base <code class="docutils literal notranslate"><span class="pre">str</span></code>.</p>
<p>Methods with the corresponding semantics will be added to the builtin
<code class="docutils literal notranslate"><span class="pre">bytes</span></code> and <code class="docutils literal notranslate"><span class="pre">bytearray</span></code> objects.  If <code class="docutils literal notranslate"><span class="pre">b</span></code> is either a <code class="docutils literal notranslate"><span class="pre">bytes</span></code>
or <code class="docutils literal notranslate"><span class="pre">bytearray</span></code> object, then <code class="docutils literal notranslate"><span class="pre">b.removeprefix()</span></code> and <code class="docutils literal notranslate"><span class="pre">b.removesuffix()</span></code>
will accept any bytes-like object as an argument. The two methods will
also be added to <code class="docutils literal notranslate"><span class="pre">collections.UserString</span></code>, with similar behavior.</p>
</section>
<section id="motivating-examples-from-the-python-standard-library">
<h2><a class="toc-backref" href="#motivating-examples-from-the-python-standard-library" role="doc-backlink">Motivating examples from the Python standard library</a></h2>
<p>The examples below demonstrate how the proposed methods can make code
one or more of the following:</p>
<ol class="arabic">
<li>Less fragile:<p>The code will not depend on the user to count the length of a literal.</p>
</li>
<li>More performant:<p>The code does not require a call to the Python built-in <code class="docutils literal notranslate"><span class="pre">len</span></code>
function nor to the more expensive <code class="docutils literal notranslate"><span class="pre">str.replace()</span></code> method.</p>
</li>
<li>More descriptive:<p>The methods give a higher-level API for code readability as
opposed to the traditional method of string slicing.</p>
</li>
</ol>
<section id="find-recursionlimit-py">
<h3><a class="toc-backref" href="#find-recursionlimit-py" role="doc-backlink">find_recursionlimit.py</a></h3>
<ul>
<li>Current:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">test_func_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;test_&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">test_func_name</span><span class="p">[</span><span class="mi">5</span><span class="p">:])</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">test_func_name</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li>Improved:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">test_func_name</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">&quot;test_&quot;</span><span class="p">))</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="deccheck-py">
<h3><a class="toc-backref" href="#deccheck-py" role="doc-backlink">deccheck.py</a></h3>
<p>This is an interesting case because the author chose to use the
<code class="docutils literal notranslate"><span class="pre">str.replace</span></code> method in a situation where only a prefix was
intended to be removed.</p>
<ul>
<li>Current:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">funcname</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;context.&quot;</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">funcname</span> <span class="o">=</span> <span class="n">funcname</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;context.&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">contextfunc</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">else</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">funcname</span> <span class="o">=</span> <span class="n">funcname</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">contextfunc</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
</li>
<li>Improved:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">funcname</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;context.&quot;</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">funcname</span> <span class="o">=</span> <span class="n">funcname</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">&quot;context.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">contextfunc</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">else</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">funcname</span> <span class="o">=</span> <span class="n">funcname</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">contextfunc</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
</li>
<li>Arguably further improved:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">contextfunc</span> <span class="o">=</span> <span class="n">funcname</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;context.&quot;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">funcname</span> <span class="o">=</span> <span class="n">funcname</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">&quot;context.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="cookiejar-py">
<h3><a class="toc-backref" href="#cookiejar-py" role="doc-backlink">cookiejar.py</a></h3>
<ul>
<li>Current:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">strip_quotes</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">text</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="k">if</span> <span class="n">text</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">text</span>
</pre></div>
</div>
</li>
<li>Improved:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">strip_quotes</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="test-i18n-py">
<h3><a class="toc-backref" href="#test-i18n-py" role="doc-backlink">test_i18n.py</a></h3>
<ul>
<li>Current:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">creationDate</span> <span class="o">=</span> <span class="n">header</span><span class="p">[</span><span class="s1">&#39;POT-Creation-Date&#39;</span><span class="p">]</span>

<span class="c1"># peel off the escaped newline at the end of string</span>
<span class="k">if</span> <span class="n">creationDate</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">n&#39;</span><span class="p">):</span>
    <span class="n">creationDate</span> <span class="o">=</span> <span class="n">creationDate</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">n&#39;</span><span class="p">)]</span>
</pre></div>
</div>
</li>
<li>Improved:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">creationDate</span> <span class="o">=</span> <span class="n">header</span><span class="p">[</span><span class="s1">&#39;POT-Creation-Date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">n&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>There were many other such examples in the stdlib.</p>
</section>
</section>
<section id="rejected-ideas">
<h2><a class="toc-backref" href="#rejected-ideas" role="doc-backlink">Rejected Ideas</a></h2>
<section id="expand-the-lstrip-and-rstrip-apis">
<h3><a class="toc-backref" href="#expand-the-lstrip-and-rstrip-apis" role="doc-backlink">Expand the lstrip and rstrip APIs</a></h3>
<p>Because <code class="docutils literal notranslate"><span class="pre">lstrip</span></code> takes a string as its argument, it could be viewed
as taking an iterable of length-1 strings.  The API could, therefore, be
generalized to accept any iterable of strings, which would be
successively removed as prefixes.  While this behavior would be
consistent, it would not be obvious for users to have to call
<code class="docutils literal notranslate"><span class="pre">'foobar'.lstrip(('foo',))</span></code> for the common use case of a
single prefix.</p>
</section>
<section id="remove-multiple-copies-of-a-prefix">
<h3><a class="toc-backref" href="#remove-multiple-copies-of-a-prefix" role="doc-backlink">Remove multiple copies of a prefix</a></h3>
<p>This is the behavior that would be consistent with the aforementioned
expansion of the <code class="docutils literal notranslate"><span class="pre">lstrip</span></code>/<code class="docutils literal notranslate"><span class="pre">rstrip</span></code> API – repeatedly applying the
function until the argument is unchanged.  This behavior is attainable
from the proposed behavior via by the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;Foo&#39;</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">+</span> <span class="s1">&#39;Bar&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;Foo&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">while</span> <span class="n">s</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span> <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span>
<span class="go">&#39;Bar&#39;</span>
</pre></div>
</div>
</section>
<section id="raising-an-exception-when-not-found">
<h3><a class="toc-backref" href="#raising-an-exception-when-not-found" role="doc-backlink">Raising an exception when not found</a></h3>
<p>There was a suggestion that <code class="docutils literal notranslate"><span class="pre">s.removeprefix(pre)</span></code> should raise an
exception if <code class="docutils literal notranslate"><span class="pre">not</span> <span class="pre">s.startswith(pre)</span></code>.  However, this does not match
with the behavior and feel of other string methods.  There could be
<code class="docutils literal notranslate"><span class="pre">required=False</span></code> keyword added, but this violates the KISS
principle.</p>
</section>
<section id="accepting-a-tuple-of-affixes">
<h3><a class="toc-backref" href="#accepting-a-tuple-of-affixes" role="doc-backlink">Accepting a tuple of affixes</a></h3>
<p>It could be convenient to write the <code class="docutils literal notranslate"><span class="pre">test_concurrent_futures.py</span></code>
example above as <code class="docutils literal notranslate"><span class="pre">name.removesuffix(('Mixin',</span> <span class="pre">'Tests',</span> <span class="pre">'Test'))</span></code>, so
there was a suggestion that the new methods be able to take a tuple of
strings as an argument, similar to the <code class="docutils literal notranslate"><span class="pre">startswith()</span></code> API.  Within
the tuple, only the first matching affix would be removed.  This was
rejected on the following grounds:</p>
<ul class="simple">
<li>This behavior can be surprising or visually confusing, especially
when one prefix is empty or is a substring of another prefix, as in
<code class="docutils literal notranslate"><span class="pre">'FooBar'.removeprefix(('',</span> <span class="pre">'Foo'))</span> <span class="pre">==</span> <span class="pre">'FooBar'</span></code>
or <code class="docutils literal notranslate"><span class="pre">'FooBar</span> <span class="pre">text'.removeprefix(('Foo',</span> <span class="pre">'FooBar</span> <span class="pre">'))</span> <span class="pre">==</span> <span class="pre">'Bar</span> <span class="pre">text'</span></code>.</li>
<li>The API for <code class="docutils literal notranslate"><span class="pre">str.replace()</span></code> only accepts a single pair of
replacement strings, but has stood the test of time by refusing the
temptation to guess in the face of ambiguous multiple replacements.</li>
<li>There may be a compelling use case for such a feature in the future,
but generalization before the basic feature sees real-world use would
be easy to get permanently wrong.</li>
</ul>
</section>
<section id="alternative-method-names">
<h3><a class="toc-backref" href="#alternative-method-names" role="doc-backlink">Alternative Method Names</a></h3>
<p>Several alternatives method names have been proposed.  Some are listed
below, along with commentary for why they should be rejected in favor
of <code class="docutils literal notranslate"><span class="pre">removeprefix</span></code> (the same arguments hold for <code class="docutils literal notranslate"><span class="pre">removesuffix</span></code>).</p>
<ul>
<li><code class="docutils literal notranslate"><span class="pre">ltrim</span></code>, <code class="docutils literal notranslate"><span class="pre">trimprefix</span></code>, etc.:<p>“Trim” does in other languages (e.g. JavaScript, Java, Go, PHP)
what <code class="docutils literal notranslate"><span class="pre">strip</span></code> methods do in Python.</p>
</li>
<li><code class="docutils literal notranslate"><span class="pre">lstrip(string=...)</span></code><p>This would avoid adding a new method, but for different
behavior, it’s better to have two different methods than one
method with a keyword argument that selects the behavior.</p>
</li>
<li><code class="docutils literal notranslate"><span class="pre">remove_prefix</span></code>:<p>All of the other methods of the string API, e.g.
<code class="docutils literal notranslate"><span class="pre">str.startswith()</span></code>, use <code class="docutils literal notranslate"><span class="pre">lowercase</span></code> rather than
<code class="docutils literal notranslate"><span class="pre">lower_case_with_underscores</span></code>.</p>
</li>
<li><code class="docutils literal notranslate"><span class="pre">removeleft</span></code>, <code class="docutils literal notranslate"><span class="pre">leftremove</span></code>, or <code class="docutils literal notranslate"><span class="pre">lremove</span></code>:<p>The explicitness of “prefix” is preferred.</p>
</li>
<li><code class="docutils literal notranslate"><span class="pre">cutprefix</span></code>, <code class="docutils literal notranslate"><span class="pre">deleteprefix</span></code>, <code class="docutils literal notranslate"><span class="pre">withoutprefix</span></code>, <code class="docutils literal notranslate"><span class="pre">dropprefix</span></code>, etc.:<p>Many of these might have been acceptable, but “remove” is
unambiguous and matches how one would describe the “remove the prefix”
behavior in English.</p>
</li>
<li><code class="docutils literal notranslate"><span class="pre">stripprefix</span></code>:<p>Users may benefit from remembering that “strip” means working
with sets of characters, while other methods work with
substrings, so re-using “strip” here should be avoided.</p>
</li>
</ul>
</section>
</section>
<section id="how-to-teach-this">
<h2><a class="toc-backref" href="#how-to-teach-this" role="doc-backlink">How to Teach This</a></h2>
<p>Among the uses for the <code class="docutils literal notranslate"><span class="pre">partition()</span></code>, <code class="docutils literal notranslate"><span class="pre">startswith()</span></code>, and
<code class="docutils literal notranslate"><span class="pre">split()</span></code> string methods or the <code class="docutils literal notranslate"><span class="pre">enumerate()</span></code> or <code class="docutils literal notranslate"><span class="pre">zip()</span></code>
built-in functions, a common theme is that if a beginner finds
themselves manually indexing or slicing a string, then they should
consider whether there is a higher-level method that better
communicates <em>what</em> the code should do rather than merely <em>how</em> the
code should do it.  The proposed  <code class="docutils literal notranslate"><span class="pre">removeprefix()</span></code> and
<code class="docutils literal notranslate"><span class="pre">removesuffix()</span></code> methods expand the high-level string “toolbox” and
further allow for this sort of skepticism toward manual slicing.</p>
<p>The main opportunity for user confusion will be the conflation of
<code class="docutils literal notranslate"><span class="pre">lstrip</span></code>/<code class="docutils literal notranslate"><span class="pre">rstrip</span></code> with <code class="docutils literal notranslate"><span class="pre">removeprefix</span></code>/<code class="docutils literal notranslate"><span class="pre">removesuffix</span></code>.
It may therefore be helpful to emphasize (as the documentation will)
the following differences between the methods:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">(l/r)strip</span></code>:<ul>
<li>The argument is interpreted as a character set.</li>
<li>The characters are repeatedly removed from the appropriate end of
the string.</li>
</ul>
</li>
<li><code class="docutils literal notranslate"><span class="pre">remove(prefix/suffix)</span></code>:<ul>
<li>The argument is interpreted as an unbroken substring.</li>
<li>Only at most one copy of the prefix/suffix is removed.</li>
</ul>
</li>
</ul>
</section>
<section id="reference-implementation">
<h2><a class="toc-backref" href="#reference-implementation" role="doc-backlink">Reference Implementation</a></h2>
<p>See the pull request on GitHub <a class="footnote-reference brackets" href="#pr" id="id9">[1]</a>.</p>
</section>
<section id="history-of-major-revisions">
<h2><a class="toc-backref" href="#history-of-major-revisions" role="doc-backlink">History of Major revisions</a></h2>
<ul class="simple">
<li>Version 3: Remove tuple behavior.</li>
<li>Version 2: Changed name to <code class="docutils literal notranslate"><span class="pre">removeprefix</span></code>/<code class="docutils literal notranslate"><span class="pre">removesuffix</span></code>;
added support for tuples as arguments</li>
<li>Version 1: Initial draft with <code class="docutils literal notranslate"><span class="pre">cutprefix</span></code>/<code class="docutils literal notranslate"><span class="pre">cutsuffix</span></code></li>
</ul>
</section>
<section id="references">
<h2><a class="toc-backref" href="#references" role="doc-backlink">References</a></h2>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="pr" role="doc-footnote">
<dt class="label" id="pr">[<a href="#id9">1</a>]</dt>
<dd>GitHub pull request with implementation
(<a class="reference external" href="https://github.com/python/cpython/pull/18939">https://github.com/python/cpython/pull/18939</a>)</aside>
<aside class="footnote brackets" id="pyid" role="doc-footnote">
<dt class="label" id="pyid">[2]<em> (<a href='#id1'>1</a>, <a href='#id8'>2</a>) </em></dt>
<dd>[Python-Ideas] “New explicit methods to trim strings”
(<a class="reference external" href="https://mail.python.org/archives/list/python-ideas&#64;python.org/thread/RJARZSUKCXRJIP42Z2YBBAEN5XA7KEC3/">https://mail.python.org/archives/list/python-ideas&#64;python.org/thread/RJARZSUKCXRJIP42Z2YBBAEN5XA7KEC3/</a>)</aside>
<aside class="footnote brackets" id="id10" role="doc-footnote">
<dt class="label" id="id10">[<a href="#id2">3</a>]</dt>
<dd>“Re: [Python-ideas] adding a trim convenience function”
(<a class="reference external" href="https://mail.python.org/archives/list/python-ideas&#64;python.org/thread/SJ7CKPZSKB5RWT7H3YNXOJUQ7QLD2R3X/#C2W5T7RCFSHU5XI72HG53A6R3J3SN4MV">https://mail.python.org/archives/list/python-ideas&#64;python.org/thread/SJ7CKPZSKB5RWT7H3YNXOJUQ7QLD2R3X/#C2W5T7RCFSHU5XI72HG53A6R3J3SN4MV</a>)</aside>
<aside class="footnote brackets" id="id11" role="doc-footnote">
<dt class="label" id="id11">[<a href="#id3">4</a>]</dt>
<dd>“Re: [Python-Dev] strip behavior provides inconsistent results with certain strings”
(<a class="reference external" href="https://mail.python.org/archives/list/python-ideas&#64;python.org/thread/XYFQMFPUV6FR2N5BGYWPBVMZ5BE5PJ6C/#XYFQMFPUV6FR2N5BGYWPBVMZ5BE5PJ6C">https://mail.python.org/archives/list/python-ideas&#64;python.org/thread/XYFQMFPUV6FR2N5BGYWPBVMZ5BE5PJ6C/#XYFQMFPUV6FR2N5BGYWPBVMZ5BE5PJ6C</a>)</aside>
<aside class="footnote brackets" id="id12" role="doc-footnote">
<dt class="label" id="id12">[<a href="#id4">5</a>]</dt>
<dd>[Python-Dev] “correction of a bug”
(<a class="reference external" href="https://mail.python.org/archives/list/python-dev&#64;python.org/thread/AOZ7RFQTQLCZCTVNKESZI67PB3PSS72X/#AOZ7RFQTQLCZCTVNKESZI67PB3PSS72X">https://mail.python.org/archives/list/python-dev&#64;python.org/thread/AOZ7RFQTQLCZCTVNKESZI67PB3PSS72X/#AOZ7RFQTQLCZCTVNKESZI67PB3PSS72X</a>)</aside>
<aside class="footnote brackets" id="id13" role="doc-footnote">
<dt class="label" id="id13">[<a href="#id5">6</a>]</dt>
<dd>[Python-Dev] “str.lstrip bug?”
(<a class="reference external" href="https://mail.python.org/archives/list/python-dev&#64;python.org/thread/OJDKRIESKGTQFNLX6KZSGKU57UXNZYAN/#CYZUFFJ2Q5ZZKMJIQBZVZR4NSLK5ZPIH">https://mail.python.org/archives/list/python-dev&#64;python.org/thread/OJDKRIESKGTQFNLX6KZSGKU57UXNZYAN/#CYZUFFJ2Q5ZZKMJIQBZVZR4NSLK5ZPIH</a>)</aside>
<aside class="footnote brackets" id="id14" role="doc-footnote">
<dt class="label" id="id14">[<a href="#id6">7</a>]</dt>
<dd>[Python-Dev] “strip behavior provides inconsistent results with certain strings”
(<a class="reference external" href="https://mail.python.org/archives/list/python-dev&#64;python.org/thread/ZWRGCGANHGVDPP44VQKRIYOYX7LNVDVG/#ZWRGCGANHGVDPP44VQKRIYOYX7LNVDVG">https://mail.python.org/archives/list/python-dev&#64;python.org/thread/ZWRGCGANHGVDPP44VQKRIYOYX7LNVDVG/#ZWRGCGANHGVDPP44VQKRIYOYX7LNVDVG</a>)</aside>
<aside class="footnote brackets" id="confusion" role="doc-footnote">
<dt class="label" id="confusion">[<a href="#id7">8</a>]</dt>
<dd>Comment listing Bug Tracker and StackOverflow issues
(<a class="reference external" href="https://mail.python.org/archives/list/python-ideas&#64;python.org/message/GRGAFIII3AX22K3N3KT7RB4DPBY3LPVG/">https://mail.python.org/archives/list/python-ideas&#64;python.org/message/GRGAFIII3AX22K3N3KT7RB4DPBY3LPVG/</a>)</aside>
</aside>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright" role="doc-backlink">Copyright</a></h2>
<p>This document is placed in the public domain or under the
CC0-1.0-Universal license, whichever is more permissive.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/peps/pep-0616.rst">https://github.com/python/peps/blob/main/peps/pep-0616.rst</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/peps/pep-0616.rst">2025-02-01 08:55:40 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <div id="search"></div>
            <h2>Contents</h2>
            <ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#specification">Specification</a></li>
<li><a class="reference internal" href="#motivating-examples-from-the-python-standard-library">Motivating examples from the Python standard library</a><ul>
<li><a class="reference internal" href="#find-recursionlimit-py">find_recursionlimit.py</a></li>
<li><a class="reference internal" href="#deccheck-py">deccheck.py</a></li>
<li><a class="reference internal" href="#cookiejar-py">cookiejar.py</a></li>
<li><a class="reference internal" href="#test-i18n-py">test_i18n.py</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#expand-the-lstrip-and-rstrip-apis">Expand the lstrip and rstrip APIs</a></li>
<li><a class="reference internal" href="#remove-multiple-copies-of-a-prefix">Remove multiple copies of a prefix</a></li>
<li><a class="reference internal" href="#raising-an-exception-when-not-found">Raising an exception when not found</a></li>
<li><a class="reference internal" href="#accepting-a-tuple-of-affixes">Accepting a tuple of affixes</a></li>
<li><a class="reference internal" href="#alternative-method-names">Alternative Method Names</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-teach-this">How to Teach This</a></li>
<li><a class="reference internal" href="#reference-implementation">Reference Implementation</a></li>
<li><a class="reference internal" href="#history-of-major-revisions">History of Major revisions</a></li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br>
            <a id="source" href="https://github.com/python/peps/blob/main/peps/pep-0616.rst?plain=1">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
    <script src="../_static/sticky_banner.js"></script>
    <script src="https://analytics.python.org/js/script.outbound-links.js"
            data-domain="peps.python.org" defer></script>
    <script src="/pagefind/pagefind-ui.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            // Ranking configuration to boost exact title matches
            const searchOptions = {
                ranking: {
                    termSimilarity: 9.0, // Higher values favor exact matches
                    termFrequency: 0.5, // Lower values reduce penalty for low term frequency
                    pageLength: 0.2, // Lower values reduce the impact of page length
                }
            };

            // Initialize pagefind for either mobile or desktop, not both
            if (window.innerWidth <= 640) {
                new PagefindUI({ element: "#mobile-search", ...searchOptions, showSubResults: false });
            } else {
                new PagefindUI({ element: "#search", ...searchOptions, showSubResults: true });
            }
        });
    </script>
</body>
</html>