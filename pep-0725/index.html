
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>PEP 725 – Specifying external dependencies in pyproject.toml | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png">
    <link rel="canonical" href="https://peps.python.org/pep-0725/">
    <link rel="stylesheet" href="../_static/style.css" type="text/css">
    <link rel="stylesheet" href="../_static/mq.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg-light">
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark">
    <link rel="alternate" type="application/rss+xml" title="Latest PEPs" href="https://peps.python.org/peps.rss">
    <meta property="og:title" content='PEP 725 – Specifying external dependencies in pyproject.toml | peps.python.org'>
    <meta property="og:description" content="This PEP specifies how to write a project’s external, or non-PyPI, build and runtime dependencies in a pyproject.toml file for packaging-related tools to consume.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://peps.python.org/pep-0725/">
    <meta property="og:site_name" content="Python Enhancement Proposals (PEPs)">
    <meta property="og:image" content="https://peps.python.org/_static/og-image.png">
    <meta property="og:image:alt" content="Python PEPs">
    <meta property="og:image:width" content="200">
    <meta property="og:image:height" content="200">
    <meta name="description" content="This PEP specifies how to write a project’s external, or non-PyPI, build and runtime dependencies in a pyproject.toml file for packaging-related tools to consume.">
    <meta name="theme-color" content="#3776ab">
</head>
<body>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-sun-half" viewBox="0 0 24 24" pointer-events="all">
    <title>Following system colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9"></circle>
      <path d="M12 3v18m0-12l4.65-4.65M12 14.3l7.37-7.37M12 19.6l8.85-8.85"></path>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected dark colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected light colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
</svg>
    <script>

        document.documentElement.dataset.colour_scheme = localStorage.getItem("colour_scheme") || "auto"
    </script>
    <section id="pep-page-section">
        <header>
            <h1 data-pagefind-ignore>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 725</li>
            </ul>
            <button id="colour-scheme-cycler" onClick="setColourScheme(nextColourScheme())">
                <svg aria-hidden="true" class="colour-scheme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-dark"><use href="#svg-moon"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-light"><use href="#svg-sun"></use></svg>
                <span class="visually-hidden">Toggle light / dark / auto colour theme</span>
            </button>
        </header>
        
        <div id="mobile-search" class="mobile-search-container"></div>
        
        <article data-pagefind-body>
            
            <span data-pagefind-meta="title:PEP 725 – Specifying external dependencies in pyproject.toml" data-pagefind-weight="10" class="visually-hidden">PEP 725 – Specifying external dependencies in pyproject.toml</span>
            <section id="pep-content">
<h1 class="page-title">PEP 725 – Specifying external dependencies in pyproject.toml</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd">Pradyun Gedam &lt;pradyunsg&#32;&#97;t&#32;gmail.com&gt;,
Jaime Rodríguez-Guerra &lt;jaime.rogue&#32;&#97;t&#32;gmail.com&gt;,
Ralf Gommers &lt;ralf.gommers&#32;&#97;t&#32;gmail.com&gt;</dd>
<dt class="field-even">Discussions-To<span class="colon">:</span></dt>
<dd class="field-even"><a class="reference external" href="https://discuss.python.org/t/103890">Discourse thread</a></dd>
<dt class="field-odd">Status<span class="colon">:</span></dt>
<dd class="field-odd"><abbr title="Proposal under active discussion and revision">Draft</abbr></dd>
<dt class="field-even">Type<span class="colon">:</span></dt>
<dd class="field-even"><abbr title="Normative PEP with a new feature for Python, implementation change for CPython or interoperability standard for the ecosystem">Standards Track</abbr></dd>
<dt class="field-odd">Topic<span class="colon">:</span></dt>
<dd class="field-odd"><a class="reference external" href="../topic/packaging/">Packaging</a></dd>
<dt class="field-even">Created<span class="colon">:</span></dt>
<dd class="field-even">17-Aug-2023</dd>
<dt class="field-odd">Post-History<span class="colon">:</span></dt>
<dd class="field-odd"><a class="reference external" href="https://discuss.python.org/t/31888" title="Discourse thread">18-Aug-2023</a>,
<a class="reference external" href="https://discuss.python.org/t/103890" title="Discourse thread">22-Sep-2025</a></dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Table of Contents</summary><ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a><ul>
<li><a class="reference internal" href="#types-of-external-dependencies">Types of external dependencies</a></li>
<li><a class="reference internal" href="#cross-compilation">Cross compilation</a><ul>
<li><a class="reference internal" href="#terminology">Terminology</a></li>
<li><a class="reference internal" href="#build-and-host-dependencies">Build and host dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#specifying-external-dependencies">Specifying external dependencies</a><ul>
<li><a class="reference internal" href="#concrete-package-specification">Concrete package specification</a></li>
<li><a class="reference internal" href="#virtual-package-specification">Virtual package specification</a></li>
<li><a class="reference internal" href="#versioning">Versioning</a></li>
<li><a class="reference internal" href="#environment-markers">Environment markers</a></li>
<li><a class="reference internal" href="#canonical-names-of-dependencies-and-dev-el-split-packages">Canonical names of dependencies and <code class="docutils literal notranslate"><span class="pre">-dev(el)</span></code> split packages</a></li>
<li><a class="reference internal" href="#python-development-headers">Python development headers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#new-core-metadata-fields">New Core Metadata fields</a><ul>
<li><a class="reference internal" href="#effect-of-vendoring-shared-libraries-on-wheel-metadata">Effect of vendoring shared libraries on wheel metadata</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dependency-groups">Dependency groups</a><ul>
<li><a class="reference internal" href="#optional-dependencies-versus-dependency-groups">Optional dependencies versus dependency groups</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#depurl">DepURL</a></li>
<li><a class="reference internal" href="#external-dependency-specifiers">External dependency specifiers</a></li>
<li><a class="reference internal" href="#changes-in-core-metadata">Changes in Core Metadata</a><ul>
<li><a class="reference internal" href="#deprecations">Deprecations</a></li>
<li><a class="reference internal" href="#additions">Additions</a></li>
<li><a class="reference internal" href="#version-bump">Version bump</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changes-in-pyproject-toml">Changes in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code></a><ul>
<li><a class="reference internal" href="#table-name">Table name</a></li>
<li><a class="reference internal" href="#build-requires-optional-build-requires"><code class="docutils literal notranslate"><span class="pre">build-requires</span></code>/<code class="docutils literal notranslate"><span class="pre">optional-build-requires</span></code></a></li>
<li><a class="reference internal" href="#host-requires-optional-host-requires"><code class="docutils literal notranslate"><span class="pre">host-requires</span></code>/<code class="docutils literal notranslate"><span class="pre">optional-host-requires</span></code></a></li>
<li><a class="reference internal" href="#dependencies-optional-dependencies"><code class="docutils literal notranslate"><span class="pre">dependencies</span></code>/<code class="docutils literal notranslate"><span class="pre">optional-dependencies</span></code></a></li>
<li><a class="reference internal" href="#id6"><code class="docutils literal notranslate"><span class="pre">dependency-groups</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#cryptography-39-0">cryptography 39.0</a></li>
<li><a class="reference internal" href="#scipy-1-10">SciPy 1.10</a></li>
<li><a class="reference internal" href="#pillow-10-1-0">Pillow 10.1.0</a></li>
<li><a class="reference internal" href="#navis-1-4-0">NAVis 1.4.0</a></li>
<li><a class="reference internal" href="#spyder-6-0">Spyder 6.0</a></li>
<li><a class="reference internal" href="#jupyterlab-git-0-41-0">jupyterlab-git 0.41.0</a></li>
<li><a class="reference internal" href="#pyenchant-3-2-2">PyEnchant 3.2.2</a></li>
<li><a class="reference internal" href="#with-dependency-groups">With dependency groups</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#security-implications">Security Implications</a></li>
<li><a class="reference internal" href="#how-to-teach-this">How to Teach This</a></li>
<li><a class="reference internal" href="#reference-implementation">Reference Implementation</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#specific-syntax-for-external-dependencies-which-are-also-packaged-on-pypi">Specific syntax for external dependencies which are also packaged on PyPI</a></li>
<li><a class="reference internal" href="#using-library-and-header-names-as-external-dependencies">Using library and header names as external dependencies</a></li>
<li><a class="reference internal" href="#splitting-host-dependencies-with-explicit-dev-or-devel-suffixes">Splitting host dependencies with explicit <code class="docutils literal notranslate"><span class="pre">-dev</span></code> or <code class="docutils literal notranslate"><span class="pre">-devel</span></code> suffixes</a></li>
<li><a class="reference internal" href="#identifier-indirections">Identifier indirections</a></li>
<li><a class="reference internal" href="#adding-a-host-requires-key-under-build-system">Adding a <code class="docutils literal notranslate"><span class="pre">host-requires</span></code> key under <code class="docutils literal notranslate"><span class="pre">[build-system]</span></code></a></li>
<li><a class="reference internal" href="#reusing-the-requires-external-field-in-core-metadata">Reusing the <code class="docutils literal notranslate"><span class="pre">Requires-External</span></code> field in Core Metadata</a></li>
<li><a class="reference internal" href="#allowing-use-of-ecosystem-specific-version-comparison-semantics">Allowing use of ecosystem-specific version comparison semantics</a></li>
</ul>
</li>
<li><a class="reference internal" href="#open-issues">Open Issues</a></li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract" role="doc-backlink">Abstract</a></h2>
<p>This PEP specifies how to write a project’s external, or non-PyPI, build and
runtime dependencies in a <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file for packaging-related tools
to consume.</p>
<p>This PEP proposes to add an <code class="docutils literal notranslate"><span class="pre">[external]</span></code> table to <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> with
seven keys. “build-requires”, “host-requires” and “dependencies”
are for specifying three types of <em>required</em> dependencies:</p>
<ol class="arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">build-requires</span></code>, build tools to run on the build machine</li>
<li><code class="docutils literal notranslate"><span class="pre">host-requires</span></code>, build dependencies needed for the host machine but also needed at build time.</li>
<li><code class="docutils literal notranslate"><span class="pre">dependencies</span></code>, needed at runtime on the host machine but not needed at build time.</li>
</ol>
<p>These three keys also have their <em>optional</em> <code class="docutils literal notranslate"><span class="pre">external</span></code> counterparts (<code class="docutils literal notranslate"><span class="pre">optional-build-requires</span></code>,
<code class="docutils literal notranslate"><span class="pre">optional-host-requires</span></code>, <code class="docutils literal notranslate"><span class="pre">optional-dependencies</span></code>), which have the same role that
<code class="docutils literal notranslate"><span class="pre">project.optional-dependencies</span></code> plays for <code class="docutils literal notranslate"><span class="pre">project.dependencies</span></code>. Finally,
<code class="docutils literal notranslate"><span class="pre">dependency-groups</span></code> offers the same functionality as <a class="pep reference internal" href="../pep-0735/" title="PEP 735 – Dependency Groups in pyproject.toml">PEP 735</a> but for external
dependencies.</p>
<p>Cross compilation is taken into account by distinguishing between build and host dependencies.
Optional build-time and runtime dependencies are supported too, in a manner analogous
to how that is supported in the <code class="docutils literal notranslate"><span class="pre">[project]</span></code> table.</p>
</section>
<section id="motivation">
<h2><a class="toc-backref" href="#motivation" role="doc-backlink">Motivation</a></h2>
<p>Python packages may have dependencies on build tools, libraries, command-line
tools, or other software that is not present on PyPI. Currently there is no way
to express those dependencies in standardized metadata
<a class="footnote-reference brackets" href="#singular-vision-native-deps" id="id1">[1]</a>, <a class="footnote-reference brackets" href="#pypacking-native-deps" id="id2">[2]</a>. Key motivators for
this PEP are to:</p>
<ul class="simple">
<li>Enable tools to automatically map external dependencies to packages in other
packaging repositories,</li>
<li>Make it possible to include needed dependencies in error messages emitted by
Python package installers and build frontends,</li>
<li>Provide a canonical place for package authors to record this dependency
information.</li>
</ul>
<p>Packaging ecosystems like Linux distros, conda, Homebrew, Spack, and Nix need
full sets of dependencies for Python packages, and have tools like <a class="reference external" href="https://github.com/befeleme/pyp2spec">pyp2spec</a>
(Fedora), <a class="reference external" href="https://github.com/conda/grayskull">Grayskull</a> (conda), and <a class="reference external" href="https://www.debian.org/doc/packaging-manuals/python-policy/index.html#dh-python">dh_python</a> (Debian) which attempt to
automatically generate dependency metadata for their own package managers from the metadata in
upstream Python packages. External dependencies are currently handled manually,
because there is no metadata for this in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> or any other
standard location. Other tools resort to extracting dependencies from extension
modules and shared libraries inside Python packages, like <a class="reference external" href="https://github.com/python-wheel-build/elfdeps/">elfdeps</a> (Fedora).
Enabling automating this type of conversion by only using explicitly annotated metadata
is a key benefit of this PEP, making packaging Python packages for distros easier
and more reliable. In addition, the authors envision other types of tools
making use of this information, e.g., dependency analysis tools like <a class="reference external" href="https://repology.org/">Repology</a>,
<a class="reference external" href="https://github.com/dependabot">Dependabot</a> and <a class="reference external" href="https://libraries.io/">libraries.io</a>.</p>
<p>Software bill of materials (SBOM) generation tools may also be able to use this
information, e.g. for flagging that external dependencies listed in
<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> but not contained in wheel metadata are likely vendored
within the wheel. <a class="pep reference internal" href="../pep-0770/" title="PEP 770 – Improving measurability of Python packages with Software Bill-of-Materials">PEP 770</a>, which standardizes how SBOMs are included in
wheels, contains an instructive section on how that PEP differs from this one.</p>
<p>Packages with external dependencies are typically hard to build from source,
and error messages from build failures tend to be hard to decipher for end
users. Missing external dependencies on the end user’s system are the most
likely cause of build failures. If installers can show the required external
dependencies as part of their error message, this may save users a lot of time.</p>
<p>At the moment, information on external dependencies is only captured in
installation documentation of individual packages. It is hard to maintain for
package authors and tends to go out of date. It’s also hard for users and
distro packagers to find it. Having a canonical place to record this dependency
information will improve this situation.</p>
<p>This PEP is not trying to specify how the external dependencies should be used,
nor a mechanism to implement a name mapping from names of individual packages
that are canonical for Python projects published on PyPI to those of other
packaging ecosystems. Canonical names and a name mapping mechanism are addressed
in <a class="pep reference internal" href="../pep-0804/" title="PEP 804 – An external dependency registry and name mapping mechanism">PEP 804</a>.</p>
</section>
<section id="rationale">
<h2><a class="toc-backref" href="#rationale" role="doc-backlink">Rationale</a></h2>
<section id="types-of-external-dependencies">
<h3><a class="toc-backref" href="#types-of-external-dependencies" role="doc-backlink">Types of external dependencies</a></h3>
<p>Multiple types of external dependencies can be distinguished:</p>
<ul class="simple">
<li>Concrete packages that can be identified by name and have a canonical
location in another language-specific package repository. E.g., Rust
packages on <a class="reference external" href="https://crates.io/">crates.io</a>, R packages on
<a class="reference external" href="https://cran.r-project.org/">CRAN</a>, JavaScript packages on the
<a class="reference external" href="https://www.npmjs.com/">npm registry</a>.</li>
<li>Concrete packages that can be identified by name but do not have a clear
canonical location. This is typically the case for libraries and tools
written in C, C++, Fortran, CUDA and other low-level languages. E.g.,
Boost, OpenSSL, Protobuf, Intel MKL, GCC.</li>
<li>“Virtual” packages, which are names for concepts, types of tools or
interfaces. These typically have multiple implementations, which <em>are</em>
concrete packages. E.g., a C++ compiler, BLAS, LAPACK, OpenMP, MPI.</li>
</ul>
<p>Concrete packages are straightforward to understand, and are a concept present
in every package management system. Virtual packages are a concept
also present in a number of packaging systems – but not always, and the
details of their implementation vary.</p>
</section>
<section id="cross-compilation">
<h3><a class="toc-backref" href="#cross-compilation" role="doc-backlink">Cross compilation</a></h3>
<p>Cross compilation is not yet (as of September 2025) well-supported by stdlib
modules and <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> metadata. It is however important when
translating external dependencies to those of other packaging systems (with
tools like <code class="docutils literal notranslate"><span class="pre">pyp2spec</span></code>). Introducing support for cross compilation immediately
in this PEP is much easier than extending <code class="docutils literal notranslate"><span class="pre">[external]</span></code> in the future, hence
the authors choose to include this now.</p>
<section id="terminology">
<h4><a class="toc-backref" href="#terminology" role="doc-backlink">Terminology</a></h4>
<p>This PEP uses the following terminology:</p>
<ul class="simple">
<li><em>build machine</em>: the machine on which the package build process is being
executed.</li>
<li><em>host machine</em>: the machine on which the produced artifact will be installed
and run.</li>
<li><em>build dependency</em>: package required only during the build process. It must
be available at build time and is built for the <em>build</em> machine’s OS and
architecture. Typical examples include compilers, code generators, and
build tools.</li>
<li><em>host dependency</em>: package needed during the build and often also at runtime.
It must be available during the build and is built for the <em>host</em> machine’s OS
and architecture. These are usually libraries the project links against.</li>
<li><em>runtime dependency</em>: package required only when the package is used after
installation. It is not required at build time but must be available on
the <em>host</em> machine at runtime.</li>
</ul>
<p>Note that this terminology is not consistent across build and packaging tools,
so care must be taken when comparing build/host dependencies in
<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> to dependencies from other package managers.</p>
<p>Note that “target machine” or “target dependency” are not used in this PEP. That
is typically only relevant for cross-compiling a compiler or other such advanced
scenarios <a class="footnote-reference brackets" href="#gcc-cross-terminology" id="id3">[3]</a>, <a class="footnote-reference brackets" href="#meson-cross" id="id4">[4]</a> – this is out of scope for
this PEP.</p>
<p>Finally, note that while “dependency” is the term most widely used for packages
needed at build time, the existing key in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> for PyPI
build-time dependencies is <code class="docutils literal notranslate"><span class="pre">build-requires</span></code>. Hence this PEP uses the keys
<code class="docutils literal notranslate"><span class="pre">build-requires</span></code> and <code class="docutils literal notranslate"><span class="pre">host-requires</span></code> under <code class="docutils literal notranslate"><span class="pre">[external]</span></code> for consistency.</p>
</section>
<section id="build-and-host-dependencies">
<h4><a class="toc-backref" href="#build-and-host-dependencies" role="doc-backlink">Build and host dependencies</a></h4>
<p>Clear separation of metadata associated with the definition of build and host
platforms, rather than assuming that build and host platform will always be
the same, is important <a class="footnote-reference brackets" href="#pypackaging-native-cross" id="id5">[5]</a>.</p>
<p>Build dependencies are typically run during the build process - they may be
compilers, code generators, or other such tools. In case the use of a build
dependency implies a runtime dependency, that runtime dependency does not have
to be declared explicitly. For example, when compiling Fortran code with
<code class="docutils literal notranslate"><span class="pre">gfortran</span></code> into a Python extension module, the package likely incurs a
dependency on the <code class="docutils literal notranslate"><span class="pre">libgfortran</span></code> runtime library. The rationale for not
explicitly listing such runtime dependencies is two-fold: (1) it may depend on
compiler/linker flags or details of the build environment whether the
dependency is present, and (2) these runtime dependencies can be detected and
handled automatically by tools like <code class="docutils literal notranslate"><span class="pre">auditwheel</span></code>.</p>
<p>Host dependencies are typically not run during the build process, but only used
for linking against. This is not a rule though – it may be possible or
necessary to run a host dependency under an emulator, or through a custom tool
like <a class="reference external" href="https://github.com/benfogle/crossenv">crossenv</a>. When host dependencies imply a runtime dependency, that runtime
dependency also does not have to be declared, just like for build dependencies.</p>
<p>When host dependencies are declared and a tool which is executing an action
unrelated to cross-compiling, it may decide to merge the <code class="docutils literal notranslate"><span class="pre">host-requires</span></code> list
into <code class="docutils literal notranslate"><span class="pre">build-requires</span></code> - whether this is useful is context-dependent.</p>
</section>
</section>
<section id="specifying-external-dependencies">
<h3><a class="toc-backref" href="#specifying-external-dependencies" role="doc-backlink">Specifying external dependencies</a></h3>
<section id="concrete-package-specification">
<h4><a class="toc-backref" href="#concrete-package-specification" role="doc-backlink">Concrete package specification</a></h4>
<p>A “Package URL” or <a class="reference external" href="https://github.com/package-url/purl-spec/">PURL</a> is a widely used URL string for identifying packages
that is meant to be portable across packaging ecosystems. Its design is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>scheme:type/namespace/name@version?qualifiers#subpath
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">scheme</span></code> component is a fixed string, <code class="docutils literal notranslate"><span class="pre">pkg</span></code>, and of the other
components only <code class="docutils literal notranslate"><span class="pre">type</span></code> and <code class="docutils literal notranslate"><span class="pre">name</span></code> are required.</p>
<p>Since external dependencies are likely to be typed by hand, we propose a PURL
derivative that, in the name of ergonomics and user-friendliness, introduces a
number of changes (further discussed below):</p>
<ul class="simple">
<li>Support for virtual packages via a new <code class="docutils literal notranslate"><span class="pre">virtual</span></code> type.</li>
<li>Allow version ranges (and not just literals) in the <code class="docutils literal notranslate"><span class="pre">version</span></code> field.</li>
</ul>
<p>In this derivative, we replace the <code class="docutils literal notranslate"><span class="pre">pkg</span></code> scheme with <code class="docutils literal notranslate"><span class="pre">dep</span></code>. Hence,
we will refer to them as DepURLs.</p>
<p>As an example, a DepURL for the <code class="docutils literal notranslate"><span class="pre">requests</span></code> package on PyPI would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dep</span><span class="p">:</span><span class="n">pypi</span><span class="o">/</span><span class="n">requests</span>
<span class="c1"># equivalent to pkg:pypi/requests</span>
</pre></div>
</div>
<p>Adopting PURL-compatible strings to specify external dependencies in
<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> solves a number of problems at once, and there are already
implementations of the specification in Python and multiple other languages. PURL is
also already supported by dependency-related tooling like SPDX (see
<a class="reference external" href="https://spdx.github.io/spdx-spec/v2.3/external-repository-identifiers/#f35-purl">External Repository Identifiers in the SPDX 2.3 spec</a>),
the <a class="reference external" href="https://ossf.github.io/osv-schema/#affectedpackage-field">Open Source Vulnerability format</a>,
and the <a class="reference external" href="https://ossindex.sonatype.org/doc/coordinates">Sonatype OSS Index</a>;
not having to wait years before support in such tooling arrives is valuable.
DepURLs are very easily transformed into PURLs, with the exception of
<code class="docutils literal notranslate"><span class="pre">dep:virtual</span></code> which doesn’t have an equivalent in <a class="reference external" href="https://github.com/package-url/purl-spec/">PURL</a>.</p>
<p>For concrete packages without a canonical package manager to refer to, either
<code class="docutils literal notranslate"><span class="pre">dep:generic/dep-name</span></code> can be used, or a direct reference to the VCS system
that the package is maintained in (e.g.,
<code class="docutils literal notranslate"><span class="pre">dep:github/user-or-org-name/dep-name</span></code>). Which of these is more appropriate
is situation-dependent. This PEP recommends using <code class="docutils literal notranslate"><span class="pre">dep:generic</span></code> when the
package name is unambiguous and well-known (e.g., <code class="docutils literal notranslate"><span class="pre">dep:generic/git</span></code> or
<code class="docutils literal notranslate"><span class="pre">dep:generic/openblas</span></code>), and using the VCS as the type otherwise. Which name
is chosen as canonical for any given package, as well as the process to make
and record such choices, is the topic of <a class="pep reference internal" href="../pep-0804/" title="PEP 804 – An external dependency registry and name mapping mechanism">PEP 804</a>.</p>
</section>
<section id="virtual-package-specification">
<h4><a class="toc-backref" href="#virtual-package-specification" role="doc-backlink">Virtual package specification</a></h4>
<p>PURL does not offer support for virtual or virtual dependency specification yet.
A <a class="reference external" href="https://github.com/package-url/purl-spec/pull/450">proposal to add a virtual type</a>
is being discussed for revision 1.1.</p>
<p>In the meantime, we propose adding a new <em>type</em> to our <code class="docutils literal notranslate"><span class="pre">dep:</span></code> derivative, the <code class="docutils literal notranslate"><span class="pre">virtual</span></code>
type, which can take two <em>namespaces</em> (extensible through the process given in
<a class="pep reference internal" href="../pep-0804/" title="PEP 804 – An external dependency registry and name mapping mechanism">PEP 804</a>):</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">interface</span></code>: for components such as BLAS or MPI.</li>
<li><code class="docutils literal notranslate"><span class="pre">compiler</span></code>: for compiled languages like C or Rust.</li>
</ul>
<p>The <em>name</em> should be the most common name for the interface or language, lowercased.
Some examples include:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dep</span><span class="p">:</span><span class="n">virtual</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">c</span>
<span class="n">dep</span><span class="p">:</span><span class="n">virtual</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">cxx</span>
<span class="n">dep</span><span class="p">:</span><span class="n">virtual</span><span class="o">/</span><span class="n">compiler</span><span class="o">/</span><span class="n">rust</span>
<span class="n">dep</span><span class="p">:</span><span class="n">virtual</span><span class="o">/</span><span class="n">interface</span><span class="o">/</span><span class="n">blas</span>
<span class="n">dep</span><span class="p">:</span><span class="n">virtual</span><span class="o">/</span><span class="n">interface</span><span class="o">/</span><span class="n">lapack</span>
</pre></div>
</div>
<p>Since there are a limited number of such dependencies, it seems like it will be
understandable and map well to Linux distros with virtual packages and to the
likes of conda and Spack.</p>
</section>
<section id="versioning">
<h4><a class="toc-backref" href="#versioning" role="doc-backlink">Versioning</a></h4>
<p>PURLs support fixed versions via the <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> component of the URL. For example,
<code class="docutils literal notranslate"><span class="pre">numpy===2.0</span></code> can be expressed as <code class="docutils literal notranslate"><span class="pre">pkg:pypi/numpy&#64;2.0</span></code>.</p>
<p>Support in PURL for version expressions and ranges beyond a fixed version is
available via <code class="docutils literal notranslate"><span class="pre">vers</span></code> URIs (<a class="reference external" href="vers">see specification</a>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vers</span><span class="p">:</span><span class="nb">type</span><span class="o">/</span><span class="n">version</span><span class="o">-</span><span class="n">constraint</span><span class="o">|</span><span class="n">version</span><span class="o">-</span><span class="n">constraint</span><span class="o">|...</span>
</pre></div>
</div>
<p>Users are supposed to couple a <code class="docutils literal notranslate"><span class="pre">pkg:</span></code> URL with a <code class="docutils literal notranslate"><span class="pre">vers:</span></code> URL. For example,
to express <code class="docutils literal notranslate"><span class="pre">numpy&gt;=2.0</span></code>, the PURL equivalent would be <code class="docutils literal notranslate"><span class="pre">pkg:pypi/numpy</span></code> plus
<code class="docutils literal notranslate"><span class="pre">vers:pypi/&gt;=2.0</span></code>. This can be done with:</p>
<ul class="simple">
<li>A two-item list: <code class="docutils literal notranslate"><span class="pre">[&quot;pkg:pypi/numpy&quot;,</span> <span class="pre">&quot;vers:pypi/&gt;=2.0&quot;]</span></code>.</li>
<li>A <a class="reference external" href="https://github.com/package-url/purl-spec/blob/main/PURL-SPECIFICATION.rst#character-encoding">percent-encoded</a>
URL qualifier: <code class="docutils literal notranslate"><span class="pre">pkg:pypi/numpy?vers=vers:pypi%2F%3E%3D2.0</span></code>.</li>
</ul>
<p>Since none of these options are very ergonomic, we chose instead for DepURLs
to accept version range specifiers too with semantics that are a subset of
<a class="pep reference internal" href="../pep-0440/" title="PEP 440 – Version Identification and Dependency Specification">PEP 440</a> semantics. The allowed operators are those that are widely available
across package managers (e.g., <code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code> are common, while
<code class="docutils literal notranslate"><span class="pre">~=</span></code> isn’t).</p>
<p>Some examples:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">dep:pypi/numpy&#64;2.0</span></code>: <code class="docutils literal notranslate"><span class="pre">numpy</span></code> pinned at exactly version 2.0.</li>
<li><code class="docutils literal notranslate"><span class="pre">dep:pypi/numpy&#64;&gt;=2.0</span></code>: <code class="docutils literal notranslate"><span class="pre">numpy</span></code> with version greater or equal than 2.0.</li>
<li><code class="docutils literal notranslate"><span class="pre">dep:virtual/interface/lapack&#64;&gt;=3.7.1</span></code>: any package implementing the
LAPACK interface for version greater or equal than <code class="docutils literal notranslate"><span class="pre">3.7.1</span></code>.</li>
</ul>
<p>The versioning scheme for particular virtual packages, in case that isn’t
unambiguously defined by an upstream project or standard, will be defined in
the Central Registry (see <a class="pep reference internal" href="../pep-0804/" title="PEP 804 – An external dependency registry and name mapping mechanism">PEP 804</a>).</p>
</section>
<section id="environment-markers">
<h4><a class="toc-backref" href="#environment-markers" role="doc-backlink">Environment markers</a></h4>
<p>Regular environment markers (as originally defined in <a class="pep reference internal" href="../pep-0508/" title="PEP 508 – Dependency specification for Python Software Packages">PEP 508</a>) may
be used behind DepURLs. PURL qualifiers, which use <code class="docutils literal notranslate"><span class="pre">?</span></code> followed by a package
type-specific dependency specifier component, should not be used for the
purposes for which environment markers suffice. The reason for this is
pragmatic: environment markers are already used for other metadata in
<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>, hence any tooling that is used with <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> is
likely to already have a robust implementation to parse it. And we do not
expect to need the extra possibilities that PURL qualifiers provide (e.g., to
specify a Conan or conda channel, or a RubyGems platform).</p>
<p>We name the combination of a DepURL and environment markers as “external
dependency specifiers”, analogously to the existing <a class="reference external" href="https://packaging.python.org/en/latest/specifications/dependency-specifiers/">dependency specifiers</a>.</p>
</section>
<section id="canonical-names-of-dependencies-and-dev-el-split-packages">
<h4><a class="toc-backref" href="#canonical-names-of-dependencies-and-dev-el-split-packages" role="doc-backlink">Canonical names of dependencies and <code class="docutils literal notranslate"><span class="pre">-dev(el)</span></code> split packages</a></h4>
<p>It is fairly common, but far from universal, for distros to split a package
into two or more packages. In particular, runtime components are often
separately installable from development components (headers, pkg-config and
CMake files, etc.). The latter then typically has a name with <code class="docutils literal notranslate"><span class="pre">-dev</span></code> or
<code class="docutils literal notranslate"><span class="pre">-devel</span></code> appended to the project/library name. Also, larger packages are
sometimes split into multiple separate packages to keep install sizes
manageable. More often than not, such package splits are not defined or
recognized by the maintainers of a package, and it’s therefore ambiguous what
any split would mean. Hence, such splits should not be reflected in the
<code class="docutils literal notranslate"><span class="pre">[external]</span></code> table. It is not possible to specify this in a reasonable way
that works across distros, hence only the canonical name should be used in
<code class="docutils literal notranslate"><span class="pre">[external]</span></code>.</p>
<p>The intended meaning of using a DepURL is “the full package with the name
specified”. I.e., including all installable artifacts that are part of the
package. It will depend on the context in which the metadata is used whether a
package split is relevant. For example, if <code class="docutils literal notranslate"><span class="pre">libffi</span></code> is a host
dependency and a tool wants to prepare an environment for building a wheel,
then if a distro has split off the headers for <code class="docutils literal notranslate"><span class="pre">libffi</span></code> into a
<code class="docutils literal notranslate"><span class="pre">libffi-devel</span></code> package then the tool has to install both <code class="docutils literal notranslate"><span class="pre">libffi</span></code> and
<code class="docutils literal notranslate"><span class="pre">libffi-devel</span></code>.</p>
<p>For defining what canonical package names are and how package splits are
handled in practice when tools attempt to use <code class="docutils literal notranslate"><span class="pre">[external]</span></code> for installation
purposes, we refer to <a class="pep reference internal" href="../pep-0804/" title="PEP 804 – An external dependency registry and name mapping mechanism">PEP 804</a>.</p>
</section>
<section id="python-development-headers">
<h4><a class="toc-backref" href="#python-development-headers" role="doc-backlink">Python development headers</a></h4>
<p>Python headers and other build support files may also be split. This is the
same situation as in the section above (because Python is simply a regular
package in distros). <em>However</em>, a <code class="docutils literal notranslate"><span class="pre">python-dev|devel</span></code> dependency is special because
in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> Python itself is an implicit rather than an explicit
dependency. Hence a choice needs to be made here - add <code class="docutils literal notranslate"><span class="pre">python-dev</span></code> implicitly,
or make each package author add it explicitly under <code class="docutils literal notranslate"><span class="pre">[external]</span></code>. For
consistency between Python dependencies and external dependencies, we choose to
add it implicitly. Python development headers must be assumed to be necessary
when an <code class="docutils literal notranslate"><span class="pre">[external]</span></code> table contains one or more compiler packages.</p>
</section>
</section>
<section id="new-core-metadata-fields">
<h3><a class="toc-backref" href="#new-core-metadata-fields" role="doc-backlink">New Core Metadata fields</a></h3>
<p>Two new Core Metadata fields are proposed:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">Requires-External-Dep</span></code>. An external requirement. Mimics the transition
from <code class="docutils literal notranslate"><span class="pre">Requires</span></code> to <code class="docutils literal notranslate"><span class="pre">Requires-Dist</span></code>. We chose the <code class="docutils literal notranslate"><span class="pre">-Dep</span></code> suffix to
emphasize that the value is not a regular Python specifier (distribution),
but an external dependency specifier containing a DepURL.</li>
<li><code class="docutils literal notranslate"><span class="pre">Provides-External-Extra</span></code>. An <em>extra</em> group that carries external dependencies
(as found in <code class="docutils literal notranslate"><span class="pre">Requires-External-Dep</span></code>) only.</li>
</ul>
<p>Since the Core Metadata specification does not contain fields for any metadata in
<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>’s <code class="docutils literal notranslate"><span class="pre">[build-system]</span></code> table, the <code class="docutils literal notranslate"><span class="pre">build-requires</span></code>
and <code class="docutils literal notranslate"><span class="pre">host-requires</span></code> content do not need to be reflected in existing core
metadata fields.</p>
<p>Additionally, this PEP also proposes to deprecate the <code class="docutils literal notranslate"><span class="pre">Requires-External</span></code> field.
The reasons being:</p>
<ul class="simple">
<li>Avoiding confusion with the newly proposed fields.</li>
<li>Avoiding potential incompatibilities with existing usage (even if limited).</li>
<li>Low penetration in the ecosystem:<ul>
<li>There is no direct correspondence to a field in the <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> metadata.</li>
<li>Mainstream build backends like <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> (see <a class="reference external" href="https://github.com/pypa/setuptools/discussions/4220#discussioncomment-8930671">pypa/setuptools#4220</a>),
<code class="docutils literal notranslate"><span class="pre">hatch</span></code> (see <a class="reference external" href="https://github.com/pypa/hatch/issues/1712">pypa/hatch#1712</a>), <code class="docutils literal notranslate"><span class="pre">flit</span></code> (see <a class="reference external" href="https://github.com/pypa/flit/issues/353">pypa/flit#353</a>), or <code class="docutils literal notranslate"><span class="pre">poetry</span></code>
do not offer ways to specify it or require a plugin (e.g. <a class="reference external" href="https://pypi.org/project/poetry-external-dependencies/">poetry-external-dependencies</a>).
<code class="docutils literal notranslate"><span class="pre">maturin</span></code> does seem to support it since 0.7.0 (see <a class="reference external" href="https://github.com/PyO3/maturin/commit/5b0e4808bb8852fe796cd2848932a35fbb14de8b">PyO3/maturin&#64;5b0e4808</a>),
but it’s not directly documented. Other backends like <code class="docutils literal notranslate"><span class="pre">scikit-build-core</span></code> or
<code class="docutils literal notranslate"><span class="pre">meson-python</span></code> returned no results for <code class="docutils literal notranslate"><span class="pre">External-Requires</span></code>.</li>
<li>The field is not included in the <a class="reference external" href="https://docs.pypi.org/api/json/">PyPI JSON API responses</a>.</li>
</ul>
</li>
</ul>
<section id="effect-of-vendoring-shared-libraries-on-wheel-metadata">
<h4><a class="toc-backref" href="#effect-of-vendoring-shared-libraries-on-wheel-metadata" role="doc-backlink">Effect of vendoring shared libraries on wheel metadata</a></h4>
<p>A wheel may vendor its external dependencies. This happens in particular when
distributing wheels on PyPI or other Python package indexes – and tools like
<a class="reference external" href="https://github.com/pypa/auditwheel">auditwheel</a>, <a class="reference external" href="https://github.com/adang1345/delvewheel">delvewheel</a> and <a class="reference external" href="https://github.com/matthew-brett/delocate">delocate</a> automate this process. As a result, a
<code class="docutils literal notranslate"><span class="pre">Requires-External-Dep</span></code> entry in an sdist may disappear from a wheel built from
that sdist with a tool like <code class="docutils literal notranslate"><span class="pre">cibuildwheel</span></code>. It is also possible that a
<code class="docutils literal notranslate"><span class="pre">Requires-External-Dep</span></code> entry remains in a wheel, either unchanged or with
narrower constraints. <code class="docutils literal notranslate"><span class="pre">auditwheel</span></code> does not vendor certain allow-listed
dependencies, such as OpenGL, by default. In addition, <code class="docutils literal notranslate"><span class="pre">auditwheel</span></code> and
<code class="docutils literal notranslate"><span class="pre">delvewheel</span></code> allow a user to manually exclude dependencies via a
<code class="docutils literal notranslate"><span class="pre">--exclude</span></code> or <code class="docutils literal notranslate"><span class="pre">--no-dll</span></code> command-line flag. This is used to avoid
vendoring large shared libraries, for example those from CUDA.</p>
<p><code class="docutils literal notranslate"><span class="pre">Requires-External-Dep</span></code> entries generated from external dependencies in
<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> can therefore differ between an sdist and its corresponding
wheel(s) depending on the build/distribution process.</p>
<p>Note that this does not imply that the field must be marked as Dynamic, since
this distinction only applies to wheels built from an sdist by a build backend.
In particular, wheels built from other wheels do not need to satisfy this
constraint.</p>
</section>
</section>
<section id="dependency-groups">
<h3><a class="toc-backref" href="#dependency-groups" role="doc-backlink">Dependency groups</a></h3>
<p>This PEP has chosen to include the <a class="pep reference internal" href="../pep-0735/" title="PEP 735 – Dependency Groups in pyproject.toml">PEP 735</a> key <code class="docutils literal notranslate"><span class="pre">dependency-groups</span></code> under
the <code class="docutils literal notranslate"><span class="pre">[external]</span></code> table too. This decision is motivated by the need of having
similar functionality for external metadata. The top-level table cannot be used
for external dependencies because it’s expected to have PEP 508 strings (and tables
for group includes), while we have chosen to rely on <code class="docutils literal notranslate"><span class="pre">dep:</span></code> URLs for the external
dependencies. Conflating both would raise significant backwards compatibility
issues with existing usage.</p>
<p>Strictly speaking, the <code class="docutils literal notranslate"><span class="pre">dependency-groups</span></code> schema allows us to define external
dependencies in per-group sub-tables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">dependency</span><span class="o">-</span><span class="n">groups</span><span class="p">]</span>
<span class="n">dev</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s2">&quot;pytest&quot;</span><span class="p">,</span>
  <span class="p">{</span> <span class="n">external</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;dep:cargo/ripgrep&quot;</span><span class="p">]</span> <span class="p">},</span>
<span class="p">]</span>
</pre></div>
</div>
<p>However, this has the same problem: we are mixing different types of dependency
specifiers in the same data structure. We believe it’s cleaner to separate concerns
in different top-level tables, hence why we still prefer to have
<code class="docutils literal notranslate"><span class="pre">external.dependency-groups</span></code>.</p>
<section id="optional-dependencies-versus-dependency-groups">
<h4><a class="toc-backref" href="#optional-dependencies-versus-dependency-groups" role="doc-backlink">Optional dependencies versus dependency groups</a></h4>
<p>The rationale for having <code class="docutils literal notranslate"><span class="pre">external.dependency-groups</span></code> is identical for the
rationale given in <a class="pep reference internal" href="../pep-0735/" title="PEP 735 – Dependency Groups in pyproject.toml">PEP 735</a> for introducing <code class="docutils literal notranslate"><span class="pre">[dependency-groups]</span></code>. The
intended usage and semantics of inclusion/exclusion into Core Metadata
is thus identical to <code class="docutils literal notranslate"><span class="pre">[dependency-groups]</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">external.optional-dependencies</span></code> will show up in Core Metadata.
<code class="docutils literal notranslate"><span class="pre">external.dependency-groups</span></code> will not.</p>
</section>
</section>
</section>
<section id="specification">
<h2><a class="toc-backref" href="#specification" role="doc-backlink">Specification</a></h2>
<p>If metadata is improperly specified then tools MUST raise an error to notify
the user about their mistake.</p>
<section id="depurl">
<h3><a class="toc-backref" href="#depurl" role="doc-backlink">DepURL</a></h3>
<p>A DepURL implements a scheme for identifying packages that is meant to be
portable across packaging ecosystems. Its design is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>dep:type/namespace/name@version?qualifiers#subpath
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">dep:</span></code> is a fixed string, and always present. <code class="docutils literal notranslate"><span class="pre">type</span></code> and <code class="docutils literal notranslate"><span class="pre">name</span></code> are
required, other components are optional.  All components apply for both PURL
and virtual <code class="docutils literal notranslate"><span class="pre">type</span></code>’s, and have these requirements:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">type</span></code> (required): MUST be either a <a class="reference external" href="https://github.com/package-url/purl-spec/">PURL</a> <code class="docutils literal notranslate"><span class="pre">type</span></code>, or <code class="docutils literal notranslate"><span class="pre">virtual</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">namespace</span></code> (optional): MUST be a <a class="reference external" href="https://github.com/package-url/purl-spec/">PURL</a> <code class="docutils literal notranslate"><span class="pre">namespace</span></code>, or a namespace in
the DepURL central registry (see <a class="pep reference internal" href="../pep-0804/" title="PEP 804 – An external dependency registry and name mapping mechanism">PEP 804</a>).</li>
<li><code class="docutils literal notranslate"><span class="pre">name</span></code> (required): MUST be a name that parses as a valid <a class="reference external" href="https://github.com/package-url/purl-spec/">PURL</a> <code class="docutils literal notranslate"><span class="pre">name</span></code>.
Tools MAY warn or error if a name is not present in the DepURL central
registry (see <a class="pep reference internal" href="../pep-0804/" title="PEP 804 – An external dependency registry and name mapping mechanism">PEP 804</a>).</li>
<li><code class="docutils literal notranslate"><span class="pre">version</span></code> (optional): MUST be a regular <a class="reference external" href="https://packaging.python.org/en/latest/specifications/version-specifiers/">version specifier</a> (PEP 440
semantics) as a single version or version range, with the restriction that
only the following operators may be used: <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>,
<code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">,</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">qualifiers</span></code> (optional): MUST parse as a valid <a class="reference external" href="https://github.com/package-url/purl-spec/">PURL</a> <code class="docutils literal notranslate"><span class="pre">qualifier</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">subpath</span></code> (optional): MUST parse as a valid <a class="reference external" href="https://github.com/package-url/purl-spec/">PURL</a> <code class="docutils literal notranslate"><span class="pre">subpath</span></code>.</li>
</ul>
</section>
<section id="external-dependency-specifiers">
<h3><a class="toc-backref" href="#external-dependency-specifiers" role="doc-backlink">External dependency specifiers</a></h3>
<p>External dependency specifiers MUST contain a DepURL, and MAY contain
environment markers with the same syntax as used in regular <a class="reference external" href="https://packaging.python.org/en/latest/specifications/dependency-specifiers/">dependency
specifiers</a> (as originally specified in <a class="pep reference internal" href="../pep-0508/" title="PEP 508 – Dependency specification for Python Software Packages">PEP 508</a>).</p>
</section>
<section id="changes-in-core-metadata">
<h3><a class="toc-backref" href="#changes-in-core-metadata" role="doc-backlink">Changes in Core Metadata</a></h3>
<section id="deprecations">
<h4><a class="toc-backref" href="#deprecations" role="doc-backlink">Deprecations</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">External-Requires</span></code> Core Metadata field will be marked as <em>obsolete</em> and its
usage will be discouraged.</p>
</section>
<section id="additions">
<h4><a class="toc-backref" href="#additions" role="doc-backlink">Additions</a></h4>
<p>Two new fields are added to Core Metadata:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">Requires-External-Dep</span></code>. An external requirement expressed as an external
dependency specifier string.</li>
<li><code class="docutils literal notranslate"><span class="pre">Provides-External-Extra</span></code>. An <em>extra</em> group that carries external dependencies
(as found in <code class="docutils literal notranslate"><span class="pre">Requires-External-Dep</span></code>) only.</li>
</ul>
</section>
<section id="version-bump">
<h4><a class="toc-backref" href="#version-bump" role="doc-backlink">Version bump</a></h4>
<p>Given that the proposed changes are purely additive, the Core Metadata
version will be bumped to 2.6.</p>
<p>This will only impact PyPI and tools that want to support external runtime dependencies,
and require no changes otherwise.</p>
</section>
</section>
<section id="changes-in-pyproject-toml">
<h3><a class="toc-backref" href="#changes-in-pyproject-toml" role="doc-backlink">Changes in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code></a></h3>
<p>Note that <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> content is in the same format as in <a class="pep reference internal" href="../pep-0621/" title="PEP 621 – Storing project metadata in pyproject.toml">PEP 621</a>.</p>
<section id="table-name">
<h4><a class="toc-backref" href="#table-name" role="doc-backlink">Table name</a></h4>
<p>Tools MUST specify fields defined by this PEP in a table named <code class="docutils literal notranslate"><span class="pre">[external]</span></code>.
No tools may add fields to this table which are not defined by this PEP or
subsequent PEPs. The lack of an <code class="docutils literal notranslate"><span class="pre">[external]</span></code> table means the package either
does not have any external dependencies, or the ones it does have are assumed
to be present on the system already.</p>
</section>
<section id="build-requires-optional-build-requires">
<h4><a class="toc-backref" href="#build-requires-optional-build-requires" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">build-requires</span></code>/<code class="docutils literal notranslate"><span class="pre">optional-build-requires</span></code></a></h4>
<ul class="simple">
<li>Format: Array of external dependency specifiers (<code class="docutils literal notranslate"><span class="pre">build-requires</span></code>) and a
table with values of arrays of external dependency specifiers
(<code class="docutils literal notranslate"><span class="pre">optional-build-requires</span></code>)</li>
<li><a class="reference external" href="https://packaging.python.org/specifications/core-metadata/">Core metadata</a>: N/A</li>
</ul>
<p>The (optional) external build requirements needed to build the project.</p>
<p>For <code class="docutils literal notranslate"><span class="pre">build-requires</span></code>, it is a key whose value is an array of strings. Each
string represents a build requirement of the project and MUST be formatted as
a valid external dependency specifier.</p>
<p>For <code class="docutils literal notranslate"><span class="pre">optional-build-requires</span></code>, it is a table where each key specifies an
extra set of build requirements and whose value is an array of strings. The
strings of the arrays MUST be valid external dependency specifiers.</p>
</section>
<section id="host-requires-optional-host-requires">
<h4><a class="toc-backref" href="#host-requires-optional-host-requires" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">host-requires</span></code>/<code class="docutils literal notranslate"><span class="pre">optional-host-requires</span></code></a></h4>
<ul class="simple">
<li>Format: Array of external dependency specifiers (<code class="docutils literal notranslate"><span class="pre">host-requires</span></code>) and a
table with values of arrays of external dependency specifiers
(<code class="docutils literal notranslate"><span class="pre">optional-host-requires</span></code>) -
<a class="reference external" href="https://packaging.python.org/specifications/core-metadata/">Core metadata</a>: N/A</li>
</ul>
<p>The (optional) external host requirements needed to build the project.</p>
<p>For <code class="docutils literal notranslate"><span class="pre">host-requires</span></code>, it is a key whose value is an array of strings. Each
string represents a host requirement of the project and MUST be formatted as
a valid external dependency specifier.</p>
<p>For <code class="docutils literal notranslate"><span class="pre">optional-host-requires</span></code>, it is a table where each key specifies an
extra set of host requirements and whose value is an array of strings. The
strings of the arrays MUST be valid external dependency specifiers.</p>
</section>
<section id="dependencies-optional-dependencies">
<h4><a class="toc-backref" href="#dependencies-optional-dependencies" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">dependencies</span></code>/<code class="docutils literal notranslate"><span class="pre">optional-dependencies</span></code></a></h4>
<ul class="simple">
<li>Format: Array of external dependency specifiers (<code class="docutils literal notranslate"><span class="pre">dependencies</span></code>) and a
table with values of arrays of external dependency specifiers
(<code class="docutils literal notranslate"><span class="pre">optional-dependencies</span></code>)</li>
<li><a class="reference external" href="https://packaging.python.org/specifications/core-metadata/">Core metadata</a>: <code class="docutils literal notranslate"><span class="pre">Requires-External-Dep</span></code>, <code class="docutils literal notranslate"><span class="pre">Provides-External-Extra</span></code></li>
</ul>
<p>The (optional) runtime dependencies of the project.</p>
<p>For <code class="docutils literal notranslate"><span class="pre">dependencies</span></code>, it is a key whose value is an array of strings. Each
string represents a dependency of the project and MUST be formatted as a valid
external dependency specifier. Each string must be added to <a class="reference external" href="https://packaging.python.org/specifications/core-metadata/">Core Metadata</a> as
a <code class="docutils literal notranslate"><span class="pre">Requires-External-Dep</span></code> field.</p>
<p>For <code class="docutils literal notranslate"><span class="pre">optional-dependencies</span></code>, it is a table where each key specifies an <em>extra</em>
and whose value is an array of strings. The strings of the arrays MUST be valid
external dependency specifiers. For each <code class="docutils literal notranslate"><span class="pre">optional-dependencies</span></code> group:</p>
<ul class="simple">
<li>The name of the group MUST be added to <a class="reference external" href="https://packaging.python.org/specifications/core-metadata/">Core Metadata</a> as a
<code class="docutils literal notranslate"><span class="pre">Provides-External-Extra</span></code> field.</li>
<li>The external dependency specifiers in that group MUST be added to <a class="reference external" href="https://packaging.python.org/specifications/core-metadata/">Core
Metadata</a> as a <code class="docutils literal notranslate"><span class="pre">Requires-External-Dep</span></code> field, with the corresponding <code class="docutils literal notranslate"><span class="pre">;</span>
<span class="pre">extra</span> <span class="pre">==</span> <span class="pre">'name'</span></code> environment marker.</li>
</ul>
</section>
<section id="id6">
<h4><a class="toc-backref" href="#id6" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">dependency-groups</span></code></a></h4>
<ul class="simple">
<li>Format: A table where each key is the name of the group, and the values are
arrays of external dependency specifiers, tables, or a mix of both.</li>
<li><a class="reference external" href="https://packaging.python.org/specifications/core-metadata/">Core metadata</a>: N/A</li>
</ul>
<p>PEP 735 -style dependency groups, but using external dependency specifiers
instead of PEP 508 strings. Every other detail (e.g. group inclusion, name
normalization) follows the official <a class="reference external" href="https://packaging.python.org/en/latest/specifications/dependency-groups/">dependency groups specification</a>.</p>
</section>
</section>
<section id="examples">
<h3><a class="toc-backref" href="#examples" role="doc-backlink">Examples</a></h3>
<p>These examples show what the <code class="docutils literal notranslate"><span class="pre">[external]</span></code> table content for a number of
packages, and the corresponding <code class="docutils literal notranslate"><span class="pre">PKG-INFO</span></code>/<code class="docutils literal notranslate"><span class="pre">METADATA</span></code> content (if any) is
expected to be.</p>
<section id="cryptography-39-0">
<h4><a class="toc-backref" href="#cryptography-39-0" role="doc-backlink">cryptography 39.0</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> content:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[external]</span>
<span class="n">build-requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="s2">&quot;dep:virtual/compiler/c&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:virtual/compiler/rust&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/pkg-config&quot;</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">host-requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/openssl&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/libffi&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">PKG-INFO</span></code> / <code class="docutils literal notranslate"><span class="pre">METADATA</span></code> content: N/A.</p>
</section>
<section id="scipy-1-10">
<h4><a class="toc-backref" href="#scipy-1-10" role="doc-backlink">SciPy 1.10</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> content:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[external]</span>
<span class="n">build-requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="s2">&quot;dep:virtual/compiler/c&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:virtual/compiler/cpp&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:virtual/compiler/fortran&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/ninja&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/pkg-config&quot;</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">host-requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="s2">&quot;dep:virtual/interface/blas&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:virtual/interface/lapack@&gt;=3.7.1&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">PKG-INFO</span></code> / <code class="docutils literal notranslate"><span class="pre">METADATA</span></code> content: N/A.</p>
</section>
<section id="pillow-10-1-0">
<h4><a class="toc-backref" href="#pillow-10-1-0" role="doc-backlink">Pillow 10.1.0</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> content:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[external]</span>
<span class="n">build-requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="s2">&quot;dep:virtual/compiler/c&quot;</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">host-requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/libjpeg&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/zlib&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">[external.optional-host-requires]</span>
<span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/lcms2&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/freetype&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/libimagequant&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/libraqm&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/libtiff&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/libxcb&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/libwebp&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/openjpeg@&gt;=2.0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/tk&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">PKG-INFO</span></code> / <code class="docutils literal notranslate"><span class="pre">METADATA</span></code> content: N/A.</p>
</section>
<section id="navis-1-4-0">
<h4><a class="toc-backref" href="#navis-1-4-0" role="doc-backlink">NAVis 1.4.0</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> content:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[project.optional-dependencies]</span>
<span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;rpy2&quot;</span><span class="p">]</span>

<span class="k">[external]</span>
<span class="n">build-requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/XCB; platform_system==&#39;Linux&#39;&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">[external.optional-dependencies]</span>
<span class="n">nat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="s2">&quot;dep:cran/nat&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:cran/nat.nblast&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">PKG-INFO</span></code> / <code class="docutils literal notranslate"><span class="pre">METADATA</span></code> content:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Provides</span><span class="o">-</span><span class="n">External</span><span class="o">-</span><span class="n">Extra</span><span class="p">:</span> <span class="n">nat</span>
<span class="n">Requires</span><span class="o">-</span><span class="n">External</span><span class="o">-</span><span class="n">Dep</span><span class="p">:</span> <span class="n">dep</span><span class="p">:</span><span class="n">cran</span><span class="o">/</span><span class="n">nat</span><span class="p">;</span> <span class="n">extra</span> <span class="o">==</span> <span class="s1">&#39;nat&#39;</span>
<span class="n">Requires</span><span class="o">-</span><span class="n">External</span><span class="o">-</span><span class="n">Dep</span><span class="p">:</span> <span class="n">dep</span><span class="p">:</span><span class="n">cran</span><span class="o">/</span><span class="n">nat</span><span class="o">.</span><span class="n">nblast</span><span class="p">;</span> <span class="n">extra</span> <span class="o">==</span> <span class="s1">&#39;nat&#39;</span>
</pre></div>
</div>
</section>
<section id="spyder-6-0">
<h4><a class="toc-backref" href="#spyder-6-0" role="doc-backlink">Spyder 6.0</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> content:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[external]</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="s2">&quot;dep:cargo/ripgrep&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:cargo/tree-sitter-cli&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:golang/github.com/junegunn/fzf&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">PKG-INFO</span></code> / <code class="docutils literal notranslate"><span class="pre">METADATA</span></code> content:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Requires</span><span class="o">-</span><span class="n">External</span><span class="o">-</span><span class="n">Dep</span><span class="p">:</span> <span class="n">dep</span><span class="p">:</span><span class="n">cargo</span><span class="o">/</span><span class="n">ripgrep</span>
<span class="n">Requires</span><span class="o">-</span><span class="n">External</span><span class="o">-</span><span class="n">Dep</span><span class="p">:</span> <span class="n">dep</span><span class="p">:</span><span class="n">cargo</span><span class="o">/</span><span class="n">tree</span><span class="o">-</span><span class="n">sitter</span><span class="o">-</span><span class="n">cli</span>
<span class="n">Requires</span><span class="o">-</span><span class="n">External</span><span class="o">-</span><span class="n">Dep</span><span class="p">:</span> <span class="n">dep</span><span class="p">:</span><span class="n">golang</span><span class="o">/</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">junegunn</span><span class="o">/</span><span class="n">fzf</span>
</pre></div>
</div>
</section>
<section id="jupyterlab-git-0-41-0">
<h4><a class="toc-backref" href="#jupyterlab-git-0-41-0" role="doc-backlink">jupyterlab-git 0.41.0</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> content:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[external]</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/git&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">[external.optional-build-requires]</span>
<span class="n">dev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/nodejs&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">PKG-INFO</span></code> / <code class="docutils literal notranslate"><span class="pre">METADATA</span></code> content:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Requires</span><span class="o">-</span><span class="n">External</span><span class="o">-</span><span class="n">Dep</span><span class="p">:</span> <span class="n">dep</span><span class="p">:</span><span class="n">generic</span><span class="o">/</span><span class="n">git</span>
</pre></div>
</div>
</section>
<section id="pyenchant-3-2-2">
<h4><a class="toc-backref" href="#pyenchant-3-2-2" role="doc-backlink">PyEnchant 3.2.2</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> content:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[external]</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="c1"># libenchant is needed on all platforms but vendored into wheels</span>
<span class="w">  </span><span class="c1"># distributed on PyPI for Windows. Hence choose to encode that in</span>
<span class="w">  </span><span class="c1"># the metadata. Note: there is no completely unambiguous way to do</span>
<span class="w">  </span><span class="c1"># this; another choice is to leave out the environment marker in the</span>
<span class="w">  </span><span class="c1"># source distribution and either live with the unnecessary ``METADATA``</span>
<span class="w">  </span><span class="c1"># entry in the distributed Windows wheels, or to apply a patch to this</span>
<span class="w">  </span><span class="c1"># metadata when building those wheels.</span>
<span class="w">  </span><span class="s2">&quot;dep:github/AbiWord/enchant; platform_system!=&#39;Windows&#39;&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">PKG-INFO</span></code> / <code class="docutils literal notranslate"><span class="pre">METADATA</span></code> content:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Requires</span><span class="o">-</span><span class="n">External</span><span class="o">-</span><span class="n">Dep</span><span class="p">:</span> <span class="n">dep</span><span class="p">:</span><span class="n">github</span><span class="o">/</span><span class="n">AbiWord</span><span class="o">/</span><span class="n">enchant</span><span class="p">;</span> <span class="n">platform_system</span><span class="o">!=</span><span class="s2">&quot;Windows&quot;</span>
</pre></div>
</div>
</section>
<section id="with-dependency-groups">
<h4><a class="toc-backref" href="#with-dependency-groups" role="doc-backlink">With dependency groups</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> content:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[external.dependency-groups]</span>
<span class="n">dev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/catch2&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/valgrind&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">PKG-INFO</span></code> / <code class="docutils literal notranslate"><span class="pre">METADATA</span></code> content: N/A.</p>
</section>
</section>
</section>
<section id="backwards-compatibility">
<h2><a class="toc-backref" href="#backwards-compatibility" role="doc-backlink">Backwards Compatibility</a></h2>
<p>There is no impact on backwards compatibility, as this PEP only adds new,
optional metadata. In the absence of such metadata, nothing changes for package
authors or packaging tooling.</p>
<p>The only change introduced in this PEP that has impact on existing projects is the
deprecation of the <code class="docutils literal notranslate"><span class="pre">External-Requires</span></code> Core Metadata field. We estimate the impact
of this deprecation to be negligible, given the its low penetration in the ecosystem
(see Rationale).</p>
<p>The field will still be recognized by existing tools such as <a class="reference external" href="https://pypi.org/project/setuptools-ext/">setuptools-ext</a>
but its usage will be discouraged in the <a class="reference external" href="https://packaging.python.org">Python Packaging User Guide</a>, similar to
what is done for obsolete fields like <code class="docutils literal notranslate"><span class="pre">Requires</span></code> (deprecated in favor of
<code class="docutils literal notranslate"><span class="pre">Requires-Dist</span></code>).</p>
</section>
<section id="security-implications">
<h2><a class="toc-backref" href="#security-implications" role="doc-backlink">Security Implications</a></h2>
<p>There are no direct security concerns as this PEP covers how to statically
define metadata for external dependencies. Any security issues would stem from
how tools consume the metadata and choose to act upon it.</p>
</section>
<section id="how-to-teach-this">
<h2><a class="toc-backref" href="#how-to-teach-this" role="doc-backlink">How to Teach This</a></h2>
<p>External dependencies and if and how those external dependencies are vendored
are topics that are typically not understood in detail by Python package
authors. We intend to start from how an external dependency is defined, the
different ways it can be depended on—from runtime-only with <code class="docutils literal notranslate"><span class="pre">ctypes</span></code> or a
<code class="docutils literal notranslate"><span class="pre">subprocess</span></code> call to it being a build dependency that’s linked against—
before going into how to declare external dependencies in metadata. The
documentation should make explicit what is relevant for package authors, and
what for distro packagers.</p>
<p>Material on this topic will be added to the most relevant packaging tutorials,
primarily the <a class="reference external" href="https://packaging.python.org">Python Packaging User Guide</a>. In addition, we expect that any
build backend that adds support for external dependencies metadata will include
information about that in its documentation, as will tools like <code class="docutils literal notranslate"><span class="pre">auditwheel</span></code>.</p>
</section>
<section id="reference-implementation">
<h2><a class="toc-backref" href="#reference-implementation" role="doc-backlink">Reference Implementation</a></h2>
<p>This PEP contains a metadata specification, rather that a code feature - hence
there will not be code implementing the metadata spec as a whole. However,
there are parts that do have a reference implementation:</p>
<ol class="arabic simple">
<li>The <code class="docutils literal notranslate"><span class="pre">[external]</span></code> table has to be valid TOML and therefore can be loaded
with <code class="docutils literal notranslate"><span class="pre">tomllib</span></code>. This table can be further processed with the
<a class="reference external" href="https://github.com/jaimergp/pyproject-external">pyproject-external</a> package, demonstrated below.</li>
<li>The PURL specification, as a key part of this spec, has a Python package
with a reference implementation for constructing and parsing PURLs:
<a class="reference external" href="https://pypi.org/project/packageurl-python/">packageurl-python</a>. This package is wrapped in <a class="reference external" href="https://github.com/jaimergp/pyproject-external">pyproject-external</a>
to provide DepURL-specific validation and handling.</li>
</ol>
<p>There are multiple possible consumers and use cases of this metadata, once
that metadata gets added to Python packages. Tested metadata for all of the
top 150 most-downloaded packages from PyPI with published platform-specific
wheels can be found in <a class="reference external" href="https://github.com/rgommers/external-deps-build">rgommers/external-deps-build</a>. This metadata has
been validated by using it to build wheels from sdists patched with that
metadata in clean Docker containers.</p>
<section id="example">
<h3><a class="toc-backref" href="#example" role="doc-backlink">Example</a></h3>
<p>Given a <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> with this <code class="docutils literal notranslate"><span class="pre">[external]</span></code> table:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[external]</span>
<span class="n">build-requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="s2">&quot;dep:virtual/compiler/c&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:virtual/compiler/rust&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/pkg-config&quot;</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">host-requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/openssl&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;dep:generic/libffi&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>You can use <code class="docutils literal notranslate"><span class="pre">pyproject_external.External</span></code> to parse it and manipulate it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyproject_external</span><span class="w"> </span><span class="kn">import</span> <span class="n">External</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">external</span> <span class="o">=</span> <span class="n">External</span><span class="o">.</span><span class="n">from_pyproject_path</span><span class="p">(</span><span class="s2">&quot;./pyproject.toml&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">external</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">external</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
<span class="go">{&#39;external&#39;: {&#39;build_requires&#39;: [&#39;dep:virtual/compiler/c&#39;, &#39;dep:virtual/compiler/rust&#39;, &#39;dep:generic/pkg-config&#39;], &#39;host_requires&#39;: [&#39;dep:generic/openssl&#39;, &#39;dep:generic/libffi&#39;]}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">external</span><span class="o">.</span><span class="n">build_requires</span>
<span class="go">[DepURL(type=&#39;virtual&#39;, namespace=&#39;compiler&#39;, name=&#39;c&#39;, version=None, qualifiers={}, subpath=None), DepURL(type=&#39;virtual&#39;, namespace=&#39;compiler&#39;, name=&#39;rust&#39;, version=None, qualifiers={}, subpath=None), DepURL(type=&#39;generic&#39;, namespace=None, name=&#39;pkg-config&#39;, version=None, qualifiers={}, subpath=None)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">external</span><span class="o">.</span><span class="n">build_requires</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">DepURL(type=&#39;virtual&#39;, namespace=&#39;compiler&#39;, name=&#39;c&#39;, version=None, qualifiers={}, subpath=None)</span>
</pre></div>
</div>
<p>Note the proposed <code class="docutils literal notranslate"><span class="pre">[external]</span></code> table was well-formed. With invalid contents such as:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[external]</span>
<span class="n">build-requires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="s2">&quot;dep:this-is-missing-the-type&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="s2">&quot;pkg:not-a-dep-url&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
<p>You would fail the validation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">external</span> <span class="o">=</span> <span class="n">External</span><span class="o">.</span><span class="n">from_pyproject_data</span><span class="p">(</span>
<span class="go">  {</span>
<span class="go">    &quot;external&quot;: {</span>
<span class="go">      &quot;build_requires&quot;: [</span>
<span class="go">        &quot;dep:this-is-missing-the-type&quot;,</span>
<span class="go">        &quot;pkg:not-a-dep-url&quot;</span>
<span class="go">      ]</span>
<span class="go">    }</span>
<span class="go">  }</span>
<span class="go">)</span>
<span class="go">ValueError: purl is missing the required type component: &#39;dep:this-is-missing-the-type&#39;.</span>
</pre></div>
</div>
</section>
</section>
<section id="rejected-ideas">
<h2><a class="toc-backref" href="#rejected-ideas" role="doc-backlink">Rejected Ideas</a></h2>
<section id="specific-syntax-for-external-dependencies-which-are-also-packaged-on-pypi">
<h3><a class="toc-backref" href="#specific-syntax-for-external-dependencies-which-are-also-packaged-on-pypi" role="doc-backlink">Specific syntax for external dependencies which are also packaged on PyPI</a></h3>
<p>There are non-Python packages which are packaged on PyPI, such as Ninja,
patchelf and CMake. What is typically desired is to use the system version of
those, and if it’s not present on the system then install the PyPI package for
it. The authors believe that specific support for this scenario is not
necessary (or at least, too complex to justify such support); a dependency
provider for external dependencies can treat PyPI as one possible source for
obtaining the package. An example mapping for this use case is proposed in
<a class="pep reference internal" href="../pep-0804/" title="PEP 804 – An external dependency registry and name mapping mechanism">PEP 804</a>.</p>
</section>
<section id="using-library-and-header-names-as-external-dependencies">
<h3><a class="toc-backref" href="#using-library-and-header-names-as-external-dependencies" role="doc-backlink">Using library and header names as external dependencies</a></h3>
<p>A previous draft PEP (<a class="reference external" href="https://github.com/pypa/interoperability-peps/pull/30">“External dependencies” (2015)</a>)
proposed using specific library and header names as external dependencies. This
is both too granular, and insufficient (e.g., headers are often unversioned;
multiple packages may provide the same header or library). Using package names
is a well-established pattern across packaging ecosystems and should be
preferred.</p>
</section>
<section id="splitting-host-dependencies-with-explicit-dev-or-devel-suffixes">
<h3><a class="toc-backref" href="#splitting-host-dependencies-with-explicit-dev-or-devel-suffixes" role="doc-backlink">Splitting host dependencies with explicit <code class="docutils literal notranslate"><span class="pre">-dev</span></code> or <code class="docutils literal notranslate"><span class="pre">-devel</span></code> suffixes</a></h3>
<p>This convention is not consistent across packaging ecosystems, nor commonly
accepted by upstream package authors. Since the need for explicit control
(e.g., installing headers when a package is used as a runtime rather than a
build-time dependency) is quite niche and we don’t want to add design
complexity without enough clear use cases, we have chosen to rely solely on the
<code class="docutils literal notranslate"><span class="pre">build</span></code>, <code class="docutils literal notranslate"><span class="pre">host</span></code> and <code class="docutils literal notranslate"><span class="pre">run</span></code> category split, with tools being in charge of
which category applies to each case in a context-dependent way.</p>
<p>If this proves to be insufficient, a future PEP could use the URL qualifier
features present in the PURL schema (<code class="docutils literal notranslate"><span class="pre">?key=value</span></code>) to implement the necessary
adjustments. This can be done in a backwards compatible fashion.</p>
</section>
<section id="identifier-indirections">
<h3><a class="toc-backref" href="#identifier-indirections" role="doc-backlink">Identifier indirections</a></h3>
<p>Some ecosystems exhibit methods to select packages based on parametrized
functions like <code class="docutils literal notranslate"><span class="pre">cmake(&quot;dependency&quot;)</span></code> or <code class="docutils literal notranslate"><span class="pre">compiler(&quot;language&quot;)</span></code>, which
return package names based on some additional context or configuration. This
feature is arguably not very common and, even when present, rarely used.
Additionally, its dynamic nature makes it prone to changing meaning over time,
and relying on specific build systems for the name resolution is in general not
a good idea.</p>
<p>The authors prefer static identifiers that can be mapped explicitly via well
known metadata (e.g., as proposed in <a class="pep reference internal" href="../pep-0804/" title="PEP 804 – An external dependency registry and name mapping mechanism">PEP 804</a>).</p>
<p>Ecosystems that do implement these indirections can use them to support the
infrastructure designed to generate the mappings proposed in <a class="pep reference internal" href="../pep-0804/" title="PEP 804 – An external dependency registry and name mapping mechanism">PEP 804</a>.</p>
</section>
<section id="adding-a-host-requires-key-under-build-system">
<h3><a class="toc-backref" href="#adding-a-host-requires-key-under-build-system" role="doc-backlink">Adding a <code class="docutils literal notranslate"><span class="pre">host-requires</span></code> key under <code class="docutils literal notranslate"><span class="pre">[build-system]</span></code></a></h3>
<p>Adding <code class="docutils literal notranslate"><span class="pre">host-requires</span></code> for host dependencies that are on PyPI in order to
better support name mapping to other packaging systems with support for
cross-compiling seems useful in principle, for the same reasons as this PEP
adds a <code class="docutils literal notranslate"><span class="pre">host-requires</span></code> under the <code class="docutils literal notranslate"><span class="pre">[external]</span></code> table. However, it isn’t
necessary to include in this PEP, and hence the authors prefer to keep the
scope of this PEP limited - a future PEP on cross compilation may want to
tackle this. <a class="reference external" href="https://github.com/rgommers/peps/issues/6">This issue</a>
contains more arguments in favor and against adding <code class="docutils literal notranslate"><span class="pre">host-requires</span></code> under
<code class="docutils literal notranslate"><span class="pre">[build-system]</span></code> as part of this PEP.</p>
</section>
<section id="reusing-the-requires-external-field-in-core-metadata">
<h3><a class="toc-backref" href="#reusing-the-requires-external-field-in-core-metadata" role="doc-backlink">Reusing the <code class="docutils literal notranslate"><span class="pre">Requires-External</span></code> field in Core Metadata</a></h3>
<p>The <a class="reference external" href="https://packaging.python.org/specifications/core-metadata/">Core Metadata</a> specification contains one relevant field, namely
<code class="docutils literal notranslate"><span class="pre">Requires-External</span></code>. While at first sight it would be a good candidate to
record the <code class="docutils literal notranslate"><span class="pre">external.dependencies</span></code> table, the authors have decided to not
re-use this field to propagate the external runtime dependencies metadata.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Requires-External</span></code> field has very loosely defined semantics as of
version 2.4. Essentially: <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">[(version)][;</span> <span class="pre">environment</span> <span class="pre">marker]</span></code> (with
square brackets denoting optional fields). It is not defined what valid strings
for <code class="docutils literal notranslate"><span class="pre">name</span></code> are; the example in the specification uses both “C” as a language
name, and “libpng” as a package name. Tightening up the semantics would be
backwards incompatible, and leaving it as is seems unsatisfactory. DepURLs
would need to be decomposed to fit in this syntax.</p>
</section>
<section id="allowing-use-of-ecosystem-specific-version-comparison-semantics">
<h3><a class="toc-backref" href="#allowing-use-of-ecosystem-specific-version-comparison-semantics" role="doc-backlink">Allowing use of ecosystem-specific version comparison semantics</a></h3>
<p>There are cases, in particular when dealing with pre-releases, where PEP 440
semantics for version comparisons don’t quite work. For example, <code class="docutils literal notranslate"><span class="pre">1.2.3a</span></code> may
indicate a release subsequent to <code class="docutils literal notranslate"><span class="pre">1.2.3</span></code> rather than an alpha version. To
handle such cases correctly, it would be necessary to allow arbitrary
versioning schemes. The authors of this PEP consider the added value of
allowing that is not justified by the additional complexity. If desired, a
package author can use either a code comment or the <code class="docutils literal notranslate"><span class="pre">qualifier</span></code> field of a
DepURL (see the Versioning section under Rationale) to capture this level of
detail.</p>
</section>
</section>
<section id="open-issues">
<h2><a class="toc-backref" href="#open-issues" role="doc-backlink">Open Issues</a></h2>
<p>None at this time.</p>
</section>
<section id="references">
<h2><a class="toc-backref" href="#references" role="doc-backlink">References</a></h2>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="singular-vision-native-deps" role="doc-footnote">
<dt class="label" id="singular-vision-native-deps">[<a href="#id1">1</a>]</dt>
<dd>The “define native requirements metadata”
part of the “Wanting a singular packaging vision” thread (2022, Discourse):
<a class="reference external" href="https://discuss.python.org/t/wanting-a-singular-packaging-tool-vision/21141/92">https://discuss.python.org/t/wanting-a-singular-packaging-tool-vision/21141/92</a></aside>
<aside class="footnote brackets" id="pypacking-native-deps" role="doc-footnote">
<dt class="label" id="pypacking-native-deps">[<a href="#id2">2</a>]</dt>
<dd>pypackaging-native: “Native dependencies”
<a class="reference external" href="https://pypackaging-native.github.io/key-issues/native-dependencies/">https://pypackaging-native.github.io/key-issues/native-dependencies/</a></aside>
<aside class="footnote brackets" id="gcc-cross-terminology" role="doc-footnote">
<dt class="label" id="gcc-cross-terminology">[<a href="#id3">3</a>]</dt>
<dd>GCC documentation - Configure Terms and History,
<a class="reference external" href="https://gcc.gnu.org/onlinedocs/gccint/Configure-Terms.html">https://gcc.gnu.org/onlinedocs/gccint/Configure-Terms.html</a></aside>
<aside class="footnote brackets" id="meson-cross" role="doc-footnote">
<dt class="label" id="meson-cross">[<a href="#id4">4</a>]</dt>
<dd>Meson documentation - Cross compilation
<a class="reference external" href="https://mesonbuild.com/Cross-compilation.html">https://mesonbuild.com/Cross-compilation.html</a></aside>
<aside class="footnote brackets" id="pypackaging-native-cross" role="doc-footnote">
<dt class="label" id="pypackaging-native-cross">[<a href="#id5">5</a>]</dt>
<dd>pypackaging-native: “Cross compilation”
<a class="reference external" href="https://pypackaging-native.github.io/key-issues/cross_compilation/">https://pypackaging-native.github.io/key-issues/cross_compilation/</a></aside>
<aside class="footnote brackets" id="pkgconfig-and-ctypes-findlibrary" role="doc-footnote">
<dt class="label" id="pkgconfig-and-ctypes-findlibrary">[6]</dt>
<dd>The “<code class="docutils literal notranslate"><span class="pre">pkgconfig</span></code> specification as an
alternative to <code class="docutils literal notranslate"><span class="pre">ctypes.util.find_library</span></code>” thread (2023, Discourse):
<a class="reference external" href="https://discuss.python.org/t/pkgconfig-specification-as-an-alternative-to-ctypes-util-find-library/31379">https://discuss.python.org/t/pkgconfig-specification-as-an-alternative-to-ctypes-util-find-library/31379</a></aside>
</aside>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright" role="doc-backlink">Copyright</a></h2>
<p>This document is placed in the public domain or under the
CC0-1.0-Universal license, whichever is more permissive.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/peps/pep-0725.rst">https://github.com/python/peps/blob/main/peps/pep-0725.rst</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/peps/pep-0725.rst">2025-09-29 13:22:31 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <div id="search"></div>
            <h2>Contents</h2>
            <ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a><ul>
<li><a class="reference internal" href="#types-of-external-dependencies">Types of external dependencies</a></li>
<li><a class="reference internal" href="#cross-compilation">Cross compilation</a><ul>
<li><a class="reference internal" href="#terminology">Terminology</a></li>
<li><a class="reference internal" href="#build-and-host-dependencies">Build and host dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#specifying-external-dependencies">Specifying external dependencies</a><ul>
<li><a class="reference internal" href="#concrete-package-specification">Concrete package specification</a></li>
<li><a class="reference internal" href="#virtual-package-specification">Virtual package specification</a></li>
<li><a class="reference internal" href="#versioning">Versioning</a></li>
<li><a class="reference internal" href="#environment-markers">Environment markers</a></li>
<li><a class="reference internal" href="#canonical-names-of-dependencies-and-dev-el-split-packages">Canonical names of dependencies and <code class="docutils literal notranslate"><span class="pre">-dev(el)</span></code> split packages</a></li>
<li><a class="reference internal" href="#python-development-headers">Python development headers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#new-core-metadata-fields">New Core Metadata fields</a><ul>
<li><a class="reference internal" href="#effect-of-vendoring-shared-libraries-on-wheel-metadata">Effect of vendoring shared libraries on wheel metadata</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dependency-groups">Dependency groups</a><ul>
<li><a class="reference internal" href="#optional-dependencies-versus-dependency-groups">Optional dependencies versus dependency groups</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#depurl">DepURL</a></li>
<li><a class="reference internal" href="#external-dependency-specifiers">External dependency specifiers</a></li>
<li><a class="reference internal" href="#changes-in-core-metadata">Changes in Core Metadata</a><ul>
<li><a class="reference internal" href="#deprecations">Deprecations</a></li>
<li><a class="reference internal" href="#additions">Additions</a></li>
<li><a class="reference internal" href="#version-bump">Version bump</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changes-in-pyproject-toml">Changes in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code></a><ul>
<li><a class="reference internal" href="#table-name">Table name</a></li>
<li><a class="reference internal" href="#build-requires-optional-build-requires"><code class="docutils literal notranslate"><span class="pre">build-requires</span></code>/<code class="docutils literal notranslate"><span class="pre">optional-build-requires</span></code></a></li>
<li><a class="reference internal" href="#host-requires-optional-host-requires"><code class="docutils literal notranslate"><span class="pre">host-requires</span></code>/<code class="docutils literal notranslate"><span class="pre">optional-host-requires</span></code></a></li>
<li><a class="reference internal" href="#dependencies-optional-dependencies"><code class="docutils literal notranslate"><span class="pre">dependencies</span></code>/<code class="docutils literal notranslate"><span class="pre">optional-dependencies</span></code></a></li>
<li><a class="reference internal" href="#id6"><code class="docutils literal notranslate"><span class="pre">dependency-groups</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#cryptography-39-0">cryptography 39.0</a></li>
<li><a class="reference internal" href="#scipy-1-10">SciPy 1.10</a></li>
<li><a class="reference internal" href="#pillow-10-1-0">Pillow 10.1.0</a></li>
<li><a class="reference internal" href="#navis-1-4-0">NAVis 1.4.0</a></li>
<li><a class="reference internal" href="#spyder-6-0">Spyder 6.0</a></li>
<li><a class="reference internal" href="#jupyterlab-git-0-41-0">jupyterlab-git 0.41.0</a></li>
<li><a class="reference internal" href="#pyenchant-3-2-2">PyEnchant 3.2.2</a></li>
<li><a class="reference internal" href="#with-dependency-groups">With dependency groups</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#security-implications">Security Implications</a></li>
<li><a class="reference internal" href="#how-to-teach-this">How to Teach This</a></li>
<li><a class="reference internal" href="#reference-implementation">Reference Implementation</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#specific-syntax-for-external-dependencies-which-are-also-packaged-on-pypi">Specific syntax for external dependencies which are also packaged on PyPI</a></li>
<li><a class="reference internal" href="#using-library-and-header-names-as-external-dependencies">Using library and header names as external dependencies</a></li>
<li><a class="reference internal" href="#splitting-host-dependencies-with-explicit-dev-or-devel-suffixes">Splitting host dependencies with explicit <code class="docutils literal notranslate"><span class="pre">-dev</span></code> or <code class="docutils literal notranslate"><span class="pre">-devel</span></code> suffixes</a></li>
<li><a class="reference internal" href="#identifier-indirections">Identifier indirections</a></li>
<li><a class="reference internal" href="#adding-a-host-requires-key-under-build-system">Adding a <code class="docutils literal notranslate"><span class="pre">host-requires</span></code> key under <code class="docutils literal notranslate"><span class="pre">[build-system]</span></code></a></li>
<li><a class="reference internal" href="#reusing-the-requires-external-field-in-core-metadata">Reusing the <code class="docutils literal notranslate"><span class="pre">Requires-External</span></code> field in Core Metadata</a></li>
<li><a class="reference internal" href="#allowing-use-of-ecosystem-specific-version-comparison-semantics">Allowing use of ecosystem-specific version comparison semantics</a></li>
</ul>
</li>
<li><a class="reference internal" href="#open-issues">Open Issues</a></li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br>
            <a id="source" href="https://github.com/python/peps/blob/main/peps/pep-0725.rst?plain=1">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
    <script src="../_static/sticky_banner.js"></script>
    <script src="https://analytics.python.org/js/script.outbound-links.js"
            data-domain="peps.python.org" defer></script>
    <script src="/pagefind/pagefind-ui.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            // Ranking configuration to boost exact title matches
            const searchOptions = {
                ranking: {
                    termSimilarity: 9.0, // Higher values favor exact matches
                    termFrequency: 0.5, // Lower values reduce penalty for low term frequency
                    pageLength: 0.2, // Lower values reduce the impact of page length
                }
            };

            // Initialize pagefind for either mobile or desktop, not both
            if (window.innerWidth <= 640) {
                new PagefindUI({ element: "#mobile-search", ...searchOptions, showSubResults: false });
            } else {
                new PagefindUI({ element: "#search", ...searchOptions, showSubResults: true });
            }
        });
    </script>
</body>
</html>